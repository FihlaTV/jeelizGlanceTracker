 /**
 * Jeeliz Glance Tracker - https://github.com/jeeliz/jeelizGlanceTracker
 *
 * Copyright 2018 Jeeliz ( https://jeeliz.com )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

var GLANCETRACKERAPI=(function(){function ia(b,d){var e=new XMLHttpRequest;e.open("GET",b,!0);e.withCredentials=!1;e.onreadystatechange=function(){4!==e.readyState||200!==e.status&&0!==e.status||d(e.responseText)};e.send()}
function ka(b){switch(b){case "relu":return"gl_FragColor=max(vec4(0.,0.,0.,0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.,1.,1.,1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1,0.1,0.1,0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}
function na(b,d){var e=d%8;return b[(d-e)/8]>>7-e&1}
function pa(b){var d=JSON.parse(b);b=d.ne;var e=d.nf,g=d.n;var h="undefined"===typeof btoa?Buffer.from(d.data,"base64").toString("latin1"):atob(d.data);var l=h.length;d=new Uint8Array(l);for(var p=0;p<l;++p)d[p]=h.charCodeAt(p);h=new Float32Array(g);l=new Float32Array(e);p=b+e+1;for(var r=0;r<g;++r){for(var q=p*r,k=0===na(d,q)?1:-1,n=q+1,m=1,y=0,t=n+b-1;t>=n;--t)y+=m*na(d,t),m*=2;n=y;q=q+1+b;m=l.length;y=0;for(t=q;t<q+m;++t)l[y]=na(d,t),++y;for(m=q=0;m<e;++m)q+=l[m]*Math.pow(2,-m-1);h[r]=0===q&&0===
n?0:k*(1+q)*Math.pow(2,1+n-Math.pow(2,b-1))}return h}
var x=function(){function b(f,v){f=a.createShader(f);a.shaderSource(f,v);a.compileShader(f);return a.getShaderParameter(f,a.COMPILE_STATUS)?f:!1}function d(f,v){f=b(a.VERTEX_SHADER,f);v=b(a.FRAGMENT_SHADER,v);var z=a.createProgram();a.attachShader(z,f);a.attachShader(z,v);a.linkProgram(z);return z}function e(f){void 0===f.V&&(f.V="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");void 0===f.X&&(f.X=["a0"]);void 0===f.O&&(f.O=[2]);
if(void 0===f.precision||"highp"===f.precision)f.precision=q;f.id=p++;void 0!==f.Zb&&f.Zb.forEach(function(z,R){f.c=f.c.replace(z,f.ca[R])});f.xa=0;f.O.forEach(function(z){f.xa+=4*z});f.ba=d(f.V,"precision "+f.precision+" float;\n"+f.c);f.l={};f.f.forEach(function(z){f.l[z]=a.getUniformLocation(f.ba,z)});f.attributes={};f.P=[];f.X.forEach(function(z){var R=a.getAttribLocation(f.ba,z);f.attributes[z]=R;f.P.push(R)});if(f.g){a.useProgram(f.ba);l=f;h=f.id;for(var v in f.g)a.uniform1i(f.l[v],f.g[v])}f.Xc=
!0}function g(f){sa.gc(A);h!==f.id&&(A.fa(),h=f.id,l=f,a.useProgram(f.ba),f.P.forEach(function(v){0!==v&&a.enableVertexAttribArray(v)}))}var h=-1,l=!1,p=0,r=!1,q="highp",k=["u1"],n=["u0"],m={u1:0},y={u0:0},t={u1:0,u2:1},B={u3:0},E={s0:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:k,g:m},s1:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:k,g:m,precision:"lowp"},s2:{c:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",
f:["u1","u2"],g:t},s3:{c:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",f:k,g:m},s4:{c:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",f:["u1","mask"],g:t},s5:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",f:k,g:m},s6:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",
f:k,g:m},s7:{c:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",f:["u0","u4"],g:y},s8:{c:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 g=vec4(.25,.25,.25,.25),e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,g);gl_FragColor=b*e;}",f:["u0","u4"],g:y},s9:{c:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",
f:k,g:m},s10:{c:"uniform sampler2D u1,u5;uniform float u6;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);gl_FragColor=mix(b,a,u6*f);}",f:["u1","u5","u6"],g:{u1:0,u5:1}},s11:{c:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u7)+texture2D(u1,vv0+u7*vec2(1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,1.)));}",f:["u1","u7"],g:m},s12:{c:"uniform sampler2D u1;uniform vec4 u8;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 k(float a){if(a==0.)return vec4(0.,0.,0.,0.);float l=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),m=c+127.,b=(a/exp2(c)-1.)*8388608.,d=m/2.,n=fract(d)*2.,o=floor(d),p=e(b,0.,8.),q=e(b,8.,16.),r=n*128.+e(b,16.,23.),j=l+o;return vec4(p,q,r,j)/255.;}void main(){float a=dot(texture2D(u1,vv0),u8);gl_FragColor=k(a);}",
f:["u1","u8"],g:m},s13:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",f:n,g:y},s14:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(e,a);}",f:n,g:y},s15:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-e,a,step(0.,a));}",f:n,g:y},s16:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-e;gl_FragColor=mix(.1*b,a,step(0.,a));}",
f:n,g:y},s17:{c:"uniform sampler2D u0,u6,u9;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u6,vv0),d=texture2D(u9,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",f:["u0","u6","u9"],g:{u0:0,u6:1,u9:2}},s18:{c:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",f:n,g:y},s19:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=log(e+a);gl_FragColor=b;}",
f:n,g:y},s20:{c:"uniform sampler2D u0,u10;uniform float u11;const vec2 f=vec2(.5,.5);const float g=1e-5;const vec4 h=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u10,f);float b=u11*u11;vec4 c=max(b*a,g*h);gl_FragColor=texture2D(u0,vv0)/c;}",f:["u0","u12","u11"],g:{u0:0,u12:1}},s21:{c:"uniform sampler2D u1;uniform vec2 u13;varying vec2 vv0;void main(){float a=u13.x*u13.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u13.y),g=floor(u13.x*fract(b*u13.y)),f=(g*u13.y+d)/a;gl_FragColor=texture2D(u1,f+c/a);}",
f:["u1","u13"],g:m},s22:{c:"uniform sampler2D u14,u15,u16;varying vec2 vv0;void main(){vec4 a=texture2D(u16,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u14,b),e=texture2D(u15,c);gl_FragColor=d*e;}",f:["u14","u15","u16"],g:{u15:0,u14:1,u16:2}},s23:{c:"uniform float u17;uniform sampler2D u14,u15;varying vec2 vv0;void main(){vec2 a=fract(vv0*u17);vec4 b=texture2D(u14,vv0),c=texture2D(u15,a);gl_FragColor=b*c;}",f:["u15","u14","u17"],g:{u15:0,u14:1}},s24:{c:"uniform float u17;uniform sampler2D u14,u15,u18,u19,u20,u21;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 i=vv0*u17,m=floor(i),c=i-m;vec4 n=texture2D(u14,vv0),d=texture2D(u15,c),a=texture2D(u21,vv0);a=a*255.;vec4 o=texture2D(u18,c),p=texture2D(u19,c),q=texture2D(u20,c),j=step(-g,-a),b=e-j,k=b*step(-e-g,-a);b*=e-k;vec4 h=b*step(-2.*e-g,-a);b*=e-h;vec4 l=b;d=j*d+k*o+h*p+l*q,gl_FragColor=n*d;}",
f:"u14 u15 u17 u21 u18 u19 u20".split(" "),g:{u15:0,u14:1,u21:3,u18:4,u19:5,u20:6}},s25:{c:"uniform sampler2D u14,u15,u22;uniform float u17,u23,u24,u25;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u23*vv0),g=u23*vv0-a;float b=u17/u23;vec2 c=floor(g*b),d=g*b-c,h=(a+d)/u23;float l=u23*u25/u17;vec2 m=l*c,i=(m+d*u24)/u25,e=step(i,j);vec4 n=texture2D(u14,h),o=texture2D(u15,i),p=n*o*e.x*e.y,k=texture2D(u22,h);gl_FragColor=p*u24*u24+k;}",f:"u14 u15 u17 u23 u24 u25 u22".split(" "),g:{u15:0,
u14:1,u22:2}},s26:{c:"uniform sampler2D u14,u15;varying vec2 vv0;void main(){vec4 a=texture2D(u14,vv0),b=texture2D(u15,vv0);gl_FragColor=a*b;}",f:["u14","u15"],g:{u15:0,u14:1}},s27:{c:"uniform sampler2D u1,u22;uniform float u26;varying vec2 vv0;void main(){gl_FragColor=texture2D(u22,vv0)+u26*texture2D(u1,vv0);}",f:["u1","u22","u26"],g:{u1:0,u22:1}},s28:{c:"varying vec2 vv0;uniform sampler2D u1;const vec4 g=vec4(1.,1.,1.,1.),e=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,e)*g;}",
f:k,g:m,precision:"lowp"},s29:{c:"varying vec2 vv0;uniform sampler2D u1;uniform float u27;const vec3 e=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u27)).rgb,c=texture2D(u1,vv0+vec2(u27,u27)).rgb,d=texture2D(u1,vv0+vec2(u27,0.)).rgb;gl_FragColor=vec4(dot(a,e),dot(b,e),dot(c,e),dot(d,e));}",f:["u1","u27"],g:m,precision:"lowp"},s30:{c:"varying vec2 vv0;uniform sampler2D u1;uniform float u27;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u27)).rgb,c=texture2D(u1,vv0+vec2(u27,u27)).rgb,d=texture2D(u1,vv0+vec2(u27,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
f:["u1","u27"],g:m,precision:"lowp"},s31:{c:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 g=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u28))*2.,b-=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,b+=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u28))*2.,b+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),f=texture2D(u2,vv0);gl_FragColor=f.a*e.r*g;}",
f:["u1","u2","u28"],g:t},s32:{c:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float i=0.;vec2 l=k*u28,a,b;float c,d,g=0.;for(float f=-4.;f<=4.;f+=1.)for(float e=-4.;e<=4.;e+=1.)a=vec2(f,e),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,i+=d*texture2D(u1,b).r,g+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-i/g)*j;}",f:["u1","u2","u28"],g:t},s33:{c:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 h=vec2(.5,.5),i=vec2(1.,0.),j=vec2(0.,1.);void main(){vec2 a=vv0-u7*h;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*i),d=texture2D(u3,a+u7*j),k=texture2D(u3,a+u7),l=e(b,c),g=e(d,k);gl_FragColor=e(l,g);}",
f:["u3","u7"],g:B},s34:{c:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;const vec2 j=vec2(1.,0.),k=vec2(0.,1.),l=vec2(2.,0.),m=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*j),d=texture2D(u3,a+u7*k),g=texture2D(u3,a+u7),i=e(b,c),h=e(d,g);return e(i,h);}void main(){vec2 a=vv0+u7*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u7*l),d=f(a+u7*2.),g=f(a+u7*m),i=e(b,c),h=e(d,g);gl_FragColor=e(i,h);}",f:["u3","u7"],g:B},s35:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",
f:["u1"],g:m,precision:"lowp"},s36:{c:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;const float d=15444.;void main(){vec4 a=1001./d*texture2D(u1,vv0-3.*u7)+2002./d*texture2D(u1,vv0-2.*u7)+3003./d*texture2D(u1,vv0-u7)+3432./d*texture2D(u1,vv0)+3003./d*texture2D(u1,vv0+u7)+2002./d*texture2D(u1,vv0+2.*u7)+1001./d*texture2D(u1,vv0+3.*u7);gl_FragColor=a;}",f:["u7","u1"],g:m,precision:"lowp"},s37:{c:"uniform sampler2D u1,u29,u30;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);const float h=.1;void main(){vec4 a=texture2D(u29,vv0),b=texture2D(u30,vv0),c=texture2D(u1,vv0),d=max(g*h,b-a*a),f=sqrt(d);gl_FragColor=(c-a)/f;}",
f:["u1","u29","u30"],g:{u1:0,u29:1,u30:2}}},M={s38:{c:"uniform float u17,u31;uniform sampler2D u14,u15,u22;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u22,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u17,xyTo=floor(vv0*u17+eps2);float weightSize=toSparsity*u17;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u31*(xyPatch-halfFromSparsity))/u17,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u14,uvWeight)*texture2D(u15,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
f:["u17","u14","u15","u22","u31"],ca:["1.1111","gl_FragColor\\*=2.2222;"]},s39:{c:"uniform float u17,u31,u25;uniform sampler2D u14,u15,u22;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u22,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u25,xyTo=floor(vv0*u17+eps2);float weightSize=fromSparsity*u25;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u17;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u31*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u25,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u14,uvWeight)*texture2D(u15,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
f:"u17 u25 u14 u15 u22 u31".split(" "),ca:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},A={ta:function(){return r},i:function(){if(!r){q="highp";for(var f in E)e(E[f],f);x.set("s0");a.enableVertexAttribArray(0);f=ta.i();r=!0;return f}},eb:function(f){f.forEach(function(v){A.Aa(v)})},Aa:function(f){E[f.id]=f;e(f,f.id)},Ma:function(f,v,z){v||(v=f);E[v]=Object.create(M[f]);M[f].ca&&M[f].ca.forEach(function(R,da){E[v].c=E[v].c.replace(new RegExp(R,"g"),z[da])});e(E[v],v)},set:function(f){g(E[f])},xb:function(f){return"undefined"!==
typeof E[f]},Gc:function(){return l.Dc},fa:function(){-1!==h&&(h=-1,l.P.forEach(function(f){0!==f&&a.disableVertexAttribArray(f)}))},va:function(){var f=0;l.P.forEach(function(v,z){z=l.O[z];a.vertexAttribPointer(v,z,a.FLOAT,!1,l.xa,f);f+=4*z})},Cc:function(){a.enableVertexAttribArray(0)},wa:function(){a.vertexAttribPointer(l.P[0],2,a.FLOAT,!1,8,0)},jd:function(f,v){a.uniform1i(l.l[f],v)},D:function(f,v){a.uniform1f(l.l[f],v)},T:function(f,v,z){a.uniform2f(l.l[f],v,z)},kd:function(f,v){a.uniform2fv(l.l[f],
v)},ld:function(f,v){a.uniform3fv(l.l[f],v)},hc:function(f,v,z,R){a.uniform3f(l.l[f],v,z,R)},Za:function(f,v){a.uniform4fv(l.l[f],v)},md:function(f,v){a.uniformMatrix2fv(l.l[f],!1,v)},nd:function(f,v){a.uniformMatrix3fv(l.l[f],!1,v)},od:function(f,v){a.uniformMatrix4fv(l.l[f],!1,v)},F:function(f,v){A.set(f);v.forEach(function(z){switch(z.type){case "4f":a.uniform4fv(l.l[z.name],z.value);break;case "3f":a.uniform3fv(l.l[z.name],z.value);break;case "2f":a.uniform2fv(l.l[z.name],z.value);break;case "1f":a.uniform1f(l.l[z.name],
z.value);break;case "1i":a.uniform1i(l.l[z.name],z.value);break;case "mat2":a.uniformMatrix2fv(l.l[z.name],!1,z.value);break;case "mat3":a.uniformMatrix3fv(l.l[z.name],!1,z.value);break;case "mat4":a.uniformMatrix4fv(l.l[z.name],!1,z.value)}})},Pc:function(){return"lowp"}};return A}(),a=!1,ya=function(){function b(k){console.log("ERROR in ContextFeedForward : ",k);return!1}function d(){if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){var k=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);
k=2<k.length?[parseInt(k[1],10),parseInt(k[2],10),parseInt(k[3]||0,10)]:[0,0,0];return 12===k[0]||13===k[0]?!0:!1}return/(Mac)/i.test(navigator.platform)&&((k=navigator.userAgent)?(k=k.match(/Mac OS X (\d+)_(\d+)/)||k.match(/Mac OS X (\d+).(\d+)/),k=!k||3>k.length?!1:[parseInt(k[1],10),parseInt(k[2],10)]):k=!1,k&&10===k[0]&&15===k[1])?!0:!1}var e=!1,g=!1,h=!1,l=!1,p=!0,r=!1,q={s:function(){return e.width},C:function(){return e.height},Hc:function(){return e},Fc:function(){return a},m:function(){return p},
flush:function(){a.flush()},Cb:function(){r||(r=new Uint8Array(e.width*e.height*4));a.readPixels(0,0,e.width,e.height,a.RGBA,a.UNSIGNED_BYTE,r);return r},Jc:function(){return e.toDataURL("image/jpeg")},Kc:function(){F.A();g||(g=document.createElement("canvas"),h=g.getContext("2d"));g.width=e.width;g.height=e.height;var k=q.Cb(),n=h.createImageData(g.width,g.height),m,y,t=g.width,B=g.height,E=n.data;for(y=0;y<B;++y){var M=B-y-1;for(m=0;m<t;++m){var A=4*(y*t+m);var f=4*(M*t+m);E[A]=k[f];E[A+1]=k[f+
1];E[A+2]=k[f+2];E[A+3]=k[f+3]}}h.putImageData(n,0,0);return g.toDataURL("image/png")},Ic:function(k){!g&&k&&(g=document.createElement("canvas"),h=g.getContext("2d"));var n=k?g:document.createElement("canvas");n.width=e.width;n.height=e.height;(k?h:n.getContext("2d")).drawImage(e,0,0);return n},i:function(k){k.Ga&&!k.Fa?e=document.getElementById(k.Ga):k.Fa&&(e=k.Fa);e||(e=document.createElement("canvas"));e.width=k&&void 0!==k.width?k.width:512;e.height=k&&void 0!==k.height?k.height:512;"undefined"===
typeof k&&(k={});void 0===k.premultipliedAlpha&&(k.premultipliedAlpha=!1);void 0===k.sa&&(k.sa=!0);void 0===k.antialias&&(k.antialias=!1);var n={antialias:k.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:k.premultipliedAlpha,stencil:!1,depth:k.sa};d()||(a=e.getContext("webgl2",n));a?p=!0:((a=e.getContext("webgl",n))||(a=e.getContext("experimental-webgl",n)),p=!1);if(!a)return b("WebGL is not enabled");(l=a.getExtension("WEBGL_lose_context"))&&e.addEventListener("webglcontextlost",
k.ed,!1);if(!L.i())return b("Not enough capabilities");if(!L.lb()&&p)return b("Your configuration cannot process color buffer float");a.clearColor(0,0,0,0);a.disable(a.DEPTH_TEST);a.disable(a.BLEND);a.disable(a.DITHER);a.disable(a.STENCIL_TEST);a.disable(a.SCISSOR_TEST);a.GENERATE_MIPMAP_HINT&&a.hint(a.GENERATE_MIPMAP_HINT,a.FASTEST);a.disable(a.SAMPLE_ALPHA_TO_COVERAGE);a.disable(a.SAMPLE_COVERAGE);return!0},Wc:function(){if(!x.i())return!1;a.depthFunc(a.LEQUAL);a.clearDepth(1);return!0}};return q}(),
sa=function(){var b="undefined"===typeof x?null:x;return{gc:function(d){b!==d&&(b&&b.fa(),b=d)},ta:function(){return b.ta()},wa:function(){b.wa()},va:function(){b.va()},fa:function(){b.fa()},set:function(d){b.set(d)}}}(),O=function(){var b=null,d=null,e=0,g=-2,h=-2,l=!1,p={reset:function(){h=g=-2},i:function(){l||(b=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,b),a.bufferData(a.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),a.STATIC_DRAW),d=a.createBuffer(),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,d),
a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),a.STATIC_DRAW),p.ia(),l=!0)},a:function(r){var q=e++,k=r.J?r.J.length:0,n="undefined"===typeof r.mode?a.STATIC_DRAW:r.mode,m=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,m);a.bufferData(a.ARRAY_BUFFER,r.bb instanceof Float32Array?r.bb:new Float32Array(r.bb),n);g=q;if(r.J){var y=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,y);if(65536>r.J.length){var t=Uint16Array;var B=a.UNSIGNED_SHORT;var E=2}else t=Uint32Array,B=a.UNSIGNED_INT,
E=4;a.bufferData(a.ELEMENT_ARRAY_BUFFER,r.J instanceof t?r.J:new t(r.J),n);h=q}var M={jb:function(A){g!==q&&(a.bindBuffer(a.ARRAY_BUFFER,m),g=q);A&&sa.va()},gb:function(){h!==q&&(a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,y),h=q)},bind:function(A){M.jb(A);M.gb()},Ac:function(){a.drawElements(a.TRIANGLES,k,B,0)},Bc:function(A,f){a.drawElements(a.TRIANGLES,A,B,f*E)},remove:function(){a.deleteBuffer(m);r.J&&a.deleteBuffer(y);M=null}};return M},ia:function(){-1!==g&&(a.bindBuffer(a.ARRAY_BUFFER,b),g=-1);-1!==
h&&(a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,d),h=-1)},h:function(r,q){r&&O.ia();q&&sa.wa();a.drawElements(a.TRIANGLES,3,a.UNSIGNED_SHORT,0)},Ab:function(){a.deleteBuffer(b);a.deleteBuffer(d)}};return p}(),F=function(){var b=null,d=null,e=null,g=!1,h={o:-2,yb:1};return{i:function(){if(!g){b=a.createFramebuffer();var l=L.m();d=l&&a.DRAW_FRAMEBUFFER?a.DRAW_FRAMEBUFFER:a.FRAMEBUFFER;e=l&&a.READ_FRAMEBUFFER?a.READ_FRAMEBUFFER:a.FRAMEBUFFER;g=!0}},Mc:function(){return d},oa:function(){return e},L:function(){return a.FRAMEBUFFER},
Qc:function(){return h},Ec:function(){return b},a:function(l){void 0===l.Oa&&(l.Oa=!1);var p=l.N?l.N:!1,r=l.width,q=void 0!==l.height?l.height:l.width,k=b,n=!1,m=!1,y=0;p&&(r=r?r:p.s(),q=q?q:p.C());var t={Ya:function(){m||(k=a.createFramebuffer(),m=!0,y=h.yb++)},cb:function(){t.Ya();t.j();n=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,n);a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,r,q);a.framebufferRenderbuffer(d,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,n);a.clearDepth(1)},bind:function(B,
E){y!==h.o&&(a.bindFramebuffer(d,k),h.o=y);p&&p.j();E&&a.viewport(0,0,r,q);B&&a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)},tc:function(){y!==h.o&&(a.bindFramebuffer(d,k),h.o=y)},clear:function(){a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)},wc:function(){a.clear(a.COLOR_BUFFER_BIT)},xc:function(){a.clear(a.DEPTH_BUFFER_BIT)},jc:function(){a.viewport(0,0,r,q)},j:function(){y!==h.o&&(a.bindFramebuffer(d,k),h.o=y)},rtt:function(B){p=B;h.o!==y&&(a.bindFramebuffer(a.FRAMEBUFFER,k),h.o=y);B.j()},A:function(){a.bindFramebuffer(d,
null);h.o=-1},resize:function(B,E){r=B;q=E;n&&(a.bindRenderbuffer(a.RENDERBUFFER,n),a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,r,q))},remove:function(){a.bindFramebuffer(d,k);a.framebufferTexture2D(d,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,null,0);n&&a.framebufferRenderbuffer(d,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,null);a.bindFramebuffer(d,null);a.deleteFramebuffer(k);n&&a.deleteRenderbuffer(n);t=null}};l.Oa&&t.cb();return t},A:function(){a.bindFramebuffer(d,null);h.o=-1},qc:function(){a.bindFramebuffer(d,
null);a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);a.viewport(0,0,L.s(),L.C());h.o=-1},reset:function(){h.o=-2},I:function(){0!==h.o&&(a.bindFramebuffer(d,b),h.o=0)},clear:function(){a.viewport(0,0,L.s(),L.C());a.clear(a.COLOR_BUFFER_BIT)}}}(),T=function(){function b(c){a.bindTexture(a.TEXTURE_2D,c)}function d(c){R[0]=c;c=da[0];var w=c>>16&32768,G=c>>12&2047,C=c>>23&255;return 103>C?w:142<C?w|31744|((255==C?0:1)&&c&8388607):113>C?(G|=2048,w|(G>>114-C)+(G>>113-C&1)):w=(w|C-112<<10|G>>1)+(G&1)}function e(c){var w=
new Uint16Array(c.length);c.forEach(function(G,C){w[C]=d(G)});return w}function g(){if(null!==S.qa)return S.qa;var c=l(e([1,1,1,1]));return null===c?!0:S.qa=c}function h(){if(null!==S.ra)return S.ra;var c=l(new Uint8Array([255,255,255,255]));return null===c?!0:S.ra=c}function l(c){if(!sa.ta()||!B)return null;var w=null;try{var G=a.getError();w=N.a({isFloat:!1,v:!0,array:c,width:1});G=a.getError();if(G!==a.NO_ERROR)return!1}catch(C){return!1}F.A();a.viewport(0,0,1,1);a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT);
sa.set("s0");w.Ba(0);O.h(!1,!0);c=new Uint8Array(4);a.readPixels(0,0,1,1,a.RGBA,a.UNSIGNED_BYTE,c);c=.9<c[0];w.remove();F.I();return c}var p=0,r=null,q=0,k=null,n=!1,m=null,y=null,t=null,B=!1,E=!1,M=null,A=null,f=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],v=!1,z=!1,R=new Float32Array(1),da=new Int32Array(R.buffer),S={qa:null,ra:null},N={i:function(){if(!B){y=[a.RGB,!1,a.RGB,a.RGBA];t=[a.RGB,!1,a.RGB,a.RGBA];r=[a.TEXTURE0,a.TEXTURE1,a.TEXTURE2,a.TEXTURE3,a.TEXTURE4,a.TEXTURE5,a.TEXTURE6,a.TEXTURE7];
v="undefined"!==typeof JEContext;z="undefined"!==typeof L;v&&JEContext.cd()&&r.push(a.TEXTURE8,a.TEXTURE9);k=[-1,-1,-1,-1,-1,-1,-1,-1];m=[a.UNSIGNED_BYTE,a.FLOAT,a.FLOAT];if(!n){for(var c=new Float32Array(16384),w=0;16384>w;++w)c[w]=2*Math.random()-1;n={random:N.a({isFloat:!0,isPot:!0,array:c,width:64}),ab:N.a({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}B=!0}},Gb:function(){N.rc()},Uc:function(){return n.ab},rc:function(){m[1]=L.Z()},ac:function(){t=y=[a.RGBA,a.RGBA,a.RGBA,a.RGBA]},
fd:function(c,w){x.set("s1");F.A();var G=c.s(),C=c.C();a.viewport(0,0,G,C);c.b(0);O.h(!1,!1);a.readPixels(0,0,G,C,a.RGBA,a.UNSIGNED_BYTE,w)},zb:function(c,w,G){a.activeTexture(a.TEXTURE0);p=0;var C=a.createTexture();b(C);var V=L.m()&&a.RGBA32F?a.RGBA32F:a.FLOAT;w=w instanceof Float32Array?w:new Float32Array(w);var U=Math.log2(w.length);U!==Math.floor(U)&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE));a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_MAG_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,G);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,c.s(),c.C(),0,a.RGBA,V,w);b(null);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1);F.I();x.set("s0");c.B();a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT);b(C);O.h(!0,!1);a.deleteTexture(C)},a:function(c){function w(){b(D);ea&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,ea);c.isPot?(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,c.Qa?a.MIRRORED_REPEAT:
a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,c.K?a.MIRRORED_REPEAT:a.REPEAT)):(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE));c.$&&"undefined"!==typeof JESETTINGS&&a.texParameterf(a.TEXTURE_2D,JEContext.Lc().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.sc);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,c.isLinear?a.LINEAR:a.NEAREST);c.isLinear?a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,c.isMipmap&&!la?a.NEAREST_MIPMAP_LINEAR:
a.LINEAR):a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,c.isMipmap&&!la?a.NEAREST_MIPMAP_NEAREST:a.NEAREST);Z=y[c.S-1];aa=t[c.S-1];ba=m[G];if(L.m()){var u=a.RGBA32F;Z===a.RGBA&&ba===a.FLOAT&&u&&(aa=u);Z===a.RGB&&ba===a.FLOAT&&u&&(aa=u,Z=a.RGBA)}if(c.v&&!c.isFloat||c.isFloat&&c.isMipmap&&ta.Lb())(u=a.RGBA16F)&&(aa=u),ba=L.Z();c.Sa&&"undefined"!==typeof a.texStorage2D&&(ua=c.Sa);c.Ra&&4===c.S&&(Z=JEContext.Sc());if(c.u)a.texImage2D(a.TEXTURE_2D,0,aa,Z,ba,c.u);else if(c.url)a.texImage2D(a.TEXTURE_2D,
0,aa,Z,ba,W);else if(X){try{a.getError(),a.texImage2D(a.TEXTURE_2D,0,aa,I,K,0,Z,ba,X),a.getError()!==a.NO_ERROR&&(a.texImage2D(a.TEXTURE_2D,0,aa,I,K,0,Z,ba,null),a.getError()!==a.NO_ERROR&&a.texImage2D(a.TEXTURE_2D,0,a.RGBA,I,K,0,a.RGBA,a.UNSIGNED_BYTE,null))}catch(db){a.texImage2D(a.TEXTURE_2D,0,aa,I,K,0,Z,ba,null)}c.isKeepArray||(X=null)}else a.texImage2D(a.TEXTURE_2D,0,aa,I,K,0,Z,ba,null);if(c.isMipmap)if(!la&&P)P.na(),va=!0;else if(la){u=Math.log(Math.min(I,K))/Math.log(2);oa=Array(1+u);oa[0]=
D;for(var H=1;H<=u;++H){var Y=Math.pow(2,H),J=I/Y;Y=K/Y;var ma=a.createTexture();b(ma);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texImage2D(a.TEXTURE_2D,0,aa,J,Y,0,Z,ba,null);b(null);oa[H]=ma}va=!0}b(null);k[p]=-1;ea&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1);wa=!0;ca&&P&&(ca(P),ca=!1)}"undefined"===typeof c.isFloat&&(c.isFloat=!1);"undefined"===typeof c.v&&(c.v=!1);"undefined"===typeof c.isPot&&(c.isPot=!0);"undefined"===
typeof c.isLinear&&(c.isLinear=!1);"undefined"===typeof c.isMipmap&&(c.isMipmap=!1);"undefined"===typeof c.ja&&(c.ja=!1);void 0===c.$&&(c.$=!1);void 0===c.K&&(c.K=!1);void 0===c.Qa&&(c.Qa=!1);void 0===c.Ra&&(c.Ra=!1);void 0===c.S&&(c.S=4);void 0===c.Pa&&(c.Pa=!1);"undefined"===typeof c.isFlipY&&(c.isFlipY=c.url||c.array?!0:!1);"undefined"===typeof c.isKeepArray&&(c.isKeepArray=!1);c.data&&(c.array="string"===typeof c.data?pa(c.data):c.isFloat?new Float32Array(c.data):new Uint8Array(c.data),c.isFlipY=
!1);var G=0,C=c.u?!0:!1,V=null,U=null,Q=!1,fa=null;c.isFloat&&(c.v=!0);c.v&&(G=1);c.Pa||L.m()||!c.isFloat||!z||L.Da()||(c.isFloat=!1);c.isFloat&&(G=2);c.$&&v&&!JEContext.Yc()&&(c.$=!1);var D=a.createTexture(),ca=c.ja,W=null,X=!1,I=0,K=0,wa=!1,qa=q++,xa=!1,ha=null,ja=null,Aa=null,ra=null,aa=null,Z=null,ba=null,ea=c.isFlipY,la=c.v&&c.isMipmap&&"undefined"!==typeof ta&&!ta.nb()?!0:!1,oa=null,ua=-1,va=!1;"undefined"!==typeof c.width&&c.width&&(I=c.width,K="undefined"!==typeof c.height&&c.height?c.height:
I);var P={get:function(){return D},s:function(){return I},C:function(){return K},Vc:function(){return c.url},Zc:function(){return c.isFloat},ad:function(){return c.v},bd:function(){return c.isLinear},na:function(){a.generateMipmap(a.TEXTURE_2D)},ib:function(u,H){la?(u||(u=P.Ka()),P.ha(H),b(oa[u]),k[H]=-1):P.b(H)},Ka:function(){-1===ua&&(ua=Math.log(I)/Math.log(2));return ua},Bb:function(u){if(la){u||(u=P.Ka());x.set("s11");P.ha(0);for(var H=I,Y=K,J=1;J<=u;++J)H/=2,Y/=2,x.T("u7",.25/H,.25/Y),a.viewport(0,
0,H,Y),b(oa[J-1]),a.framebufferTexture2D(F.L(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,oa[J],0),O.h(!1,1===J);k[0]=-1}else P.na()},ha:function(u){u!==p&&(a.activeTexture(r[u]),p=u)},b:function(u){if(!wa)return!1;P.ha(u);if(k[u]===qa)return!1;b(D);k[u]=qa;return!0},Ba:function(u){a.activeTexture(r[u]);p=u;b(D);k[u]=qa},j:function(){a.framebufferTexture2D(F.L(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,D,0)},B:function(){a.viewport(0,0,I,K);a.framebufferTexture2D(F.L(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,D,0)},rd:function(){a.framebufferTexture2D(F.L(),
a.COLOR_ATTACHMENT0,a.TEXTURE_2D,null,0)},resize:function(u,H){I=u;K=H;w()},clone:function(u){u=N.a({width:I,height:K,v:c.v,isFloat:c.isFloat,isLinear:c.isLinear,K:c.K,isFlipY:u?!ea:ea,isPot:c.isPot});sa.set("s0");F.I();u.j();a.viewport(0,0,I,K);P.b(0);O.h(!0,!0);return u},jc:function(){a.viewport(0,0,I,K)},remove:function(){a.deleteTexture(D);P=null},refresh:function(){P.Ba(0);ea&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!0);C?a.texImage2D(a.TEXTURE_2D,0,aa,Z,a.UNSIGNED_BYTE,c.u):a.texImage2D(a.TEXTURE_2D,
0,aa,I,K,0,Z,ba,X);ea&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1)},Ea:function(){var u=I*K*4;ja=[new Uint8Array(u),new Uint8Array(u),new Uint8Array(u),new Uint8Array(u)];ha=[new Float32Array(ja[0].buffer),new Float32Array(ja[1].buffer),new Float32Array(ja[2].buffer),new Float32Array(ja[3].buffer)];Aa=new Uint8Array(4*u);ra=new Float32Array(Aa.buffer);xa=!0},Wa:function(){xa||P.Ea();a.readPixels(0,0,I,4*K,a.RGBA,a.UNSIGNED_BYTE,Aa);for(var u=I*K,H=2*u,Y=3*u,J=0;J<u;++J)ha[0][J]=ra[J],ha[1][J]=ra[J+u],
ha[2][J]=ra[J+H],ha[3][J]=ra[J+Y];return ha},Ha:function(){F.A();x.set("s12");P.b(0);for(var u=0;4>u;++u)a.viewport(0,K*u,I,K),x.Za("u8",f[u]),O.h(!1,0===u)},sd:function(u){var H=ba===m[0]&&!h();b(D);ea&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,ea);H?(Q||(V=document.createElement("canvas"),V.width=I,V.height=K,U=V.getContext("2d"),fa=U.createImageData(I,K),Q=!0),fa.data.set(u),U.putImageData(fa,0,0),a.texImage2D(a.TEXTURE_2D,0,aa,Z,ba,V)):a.texImage2D(a.TEXTURE_2D,0,aa,I,K,0,Z,ba,u);k[p]=qa;ea&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,
!1)},td:function(u,H){b(D);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,H);a.texImage2D(a.TEXTURE_2D,0,aa,Z,ba,u);k[p]=qa;H&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1)},hd:function(u,H){var Y=I*K,J=4*Y;u=c.v?u?"RGBE":"JSON":"RGBA";H&&(u=H);H=L.m()&&!1;var ma=null;switch(u){case "RGBE":ma="s40";break;case "JSON":ma=H?"s0":"s12";break;case "RGBA":case "RGBAARRAY":ma="s6"}xa||("RGBA"===u||"RGBE"===u||"RGBAARRAY"===u?(ja=new Uint8Array(J),xa=!0):"JSON"!==u||H||P.Ea());F.A();x.set(ma);P.b(0);J=null;if("RGBA"===u||
"RGBE"===u||"RGBAARRAY"===u){a.viewport(0,0,I,K);O.h(!0,!0);a.readPixels(0,0,I,K,a.RGBA,a.UNSIGNED_BYTE,ja);if("RGBAARRAY"===u)return{data:ja};E||(M=document.createElement("canvas"),A=M.getContext("2d"),E=!0);M.width=I;M.height=K;Y=A.createImageData(I,K);Y.data.set(ja);A.putImageData(Y,0,0);J=M.toDataURL("image/png")}else if("JSON"===u)if(H)J=new Float32Array(Y),a.viewport(0,0,I,K),O.h(!0,!0),a.readPixels(0,0,I,K,a.RGBA,a.FLOAT,J);else{for(J=0;4>J;++J)a.viewport(0,K*J,I,K),x.Za("u8",f[J]),O.h(!J,
!J);P.Wa();J=Array(Y);for(H=0;H<Y;++H)J[4*H]=ha[0][H],J[4*H+1]=ha[1][H],J[4*H+2]=ha[2][H],J[4*H+3]=ha[3][H]}return{format:u,data:J,width:I,height:K,isMirrorY:c.K,isFlipY:"RGBA"===u?c.isFlipY:!c.isFlipY}}};c.isMipmap&&!la&&wa&&!va&&(P.na(),va=!0);if(c.url)b(D),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,null),W=new Image,W.yc="Anonymous",W.crossOrigin="Anonymous",W.src=c.url,W.onload=function(){I=W.width;K=W.height;w()};else if(c.u){var Ea=function(){I=void 0!==c.u.videoWidth?c.u.videoWidth:
c.u.width;K=void 0!==c.u.videoHeight?c.u.videoHeight:c.u.height;I?w():setTimeout(Ea,1)};Ea()}else c.array?(c.v&&!c.isFloat?c.array instanceof Uint16Array?(X=c.array,w()):g()?(X=e(c.array),w()):(w(),N.zb(P,c.array,ea)):(X=c.isFloat?c.array instanceof Float32Array?c.array:new Float32Array(c.array):c.array instanceof Uint8Array?c.array:new Uint8Array(c.array),w()),c.isKeepArray||(X&&X!==c.array&&(X=null),delete c.array)):w();P.Rc=P.s;ca&&wa&&(ca(P),ca=!1);return P},A:function(c){c!==p&&(a.activeTexture(r[c]),
p=c);k[c]=-1;b(null)},uc:function(c){n.random.b(c)},reset:function(){for(var c=0;c<r.length;++c)k[c]=-1;p=-1},gd:function(){p=-1},pd:function(){for(var c=0;c<r.length;++c)N.A(c)},Ab:function(){n&&(n.random.remove(),n.ab.remove())},qd:function(c,w){if("RGBA"===c.format||"RGBE"===c.format){var G=new Image;G.src=c.data;G.onload=function(){N.a({K:c.isMirrorY,isFlipY:c.isFlipY,isFloat:!1,u:G,ja:function(C){if("RGBA"===c.format)w(C);else{var V=c.width,U=c.height,Q=N.a({K:c.isMirrorY,isFloat:!0,width:V,
height:U,isFlipY:c.isFlipY});F.I();a.viewport(0,0,V,U);x.set("s41");Q.j();C.b(0);O.h(!0,!0);N.A(0);w(Q);a.flush();setTimeout(C.remove,50)}}})}}else"JSON"===c.format?w(N.a({isFloat:!0,isFlipY:c.isFlipY,width:c.width,height:c.height,array:new Float32Array(c.data)})):w(!1)}};return N}(),za={a:function(b){var d=[T.a(b),T.a(b)],e=[d[1],d[0]],g=e,h={dc:function(l){g[1].j();g[0].b(l);h.$a()},ec:function(l){g[1].B();g[0].b(l);h.$a()},$a:function(){g=g===d?e:d},refresh:function(){g[0].refresh();g[1].refresh()},
b:function(l){g[0].b(l)},Nc:function(){return g[0]}};return h}},L=function(){function b(){d="undefined"===typeof ya?JEContext:ya;e=!0}var d=null,e=!1,g=!1,h=!1,l=!1,p=!1,r=!1,q=!1,k=!1,n=!1,m=!1,y=!1,t=!0,B=!0,E=!0,M=null,A="undefined"===typeof window?{}:window,f={i:function(){if(e)return!0;b();f.Ia();f.ma();f.vb();f.wb();F.i();T.i();if(!f.rb())return!1;O.i();T.Gb();return!0},s:function(){e||b();return d.s()},C:function(){e||b();return d.C()},m:function(){e||b();return d.m()},vb:function(){y=(m=a.getExtension("EXT_color_buffer_float")||
a.getExtension("WEBGL_color_buffer_float")||a.getExtension("OES_color_buffer_float"))?!0:!1;A.GL_EXT_COLORBUFFERFLOAT=m},wb:function(){a.getExtension("EXT_color_buffer_half_float")||a.getExtension("WEBGL_color_buffer_half_float")||a.getExtension("OES_color_buffer_half_float")},Ia:function(){if(!g){this.m()||(h=a.getExtension("OES_texture_float")||a.getExtension("MOZ_OES_texture_float")||a.getExtension("WEBKIT_OES_texture_float"),p=(A.GL_EXT_FLOAT=h)?!0:!1);if(p||this.m())l=a.getExtension("OES_texture_float_linear")||
a.getExtension("MOZ_OES_texture_float_linear")||a.getExtension("WEBKIT_OES_texture_float_linear"),A.GL_EXT_FLOATLINEAR=l;g=!0}},ma:function(){if(!n){if(!this.m()){if(r=a.getExtension("OES_texture_half_float")||a.getExtension("MOZ_OES_texture_half_float")||a.getExtension("WEBKIT_OES_texture_half_float"))M=r.HALF_FLOAT_OES,q=!0;!M&&a.HALF_FLOAT&&(M=a.HALF_FLOAT);!M&&a.FLOAT&&(M=a.FLOAT);A.GL_EXT_HALFFLOAT=r}if(q||this.m())k=a.getExtension("OES_texture_half_float_linear")||a.getExtension("MOZ_OES_texture_half_float_linear")||
a.getExtension("WEBKIT_OES_texture_half_float_linear"),A.GL_EXT_HALFFLOATLINEAR=k;n=!0}},Z:function(){if(f.m())return a.HALF_FLOAT;f.ma();return q?M:a.FLOAT},Da:function(){return t},mb:function(){return B},vc:function(){return E},lb:function(){return y},tb:function(){B=t=!0;var v=a.createFramebuffer();a.bindFramebuffer(a.FRAMEBUFFER,v);var z=a.createTexture();a.bindTexture(a.TEXTURE_2D,z);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,
a.NEAREST);a.texImage2D(a.TEXTURE_2D,0,f.m()&&a.RGBA32F?a.RGBA32F:a.RGBA,1,1,0,a.RGBA,a.FLOAT,null);a.framebufferTexture2D(F.L(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,z,0);var R=a.checkFramebufferStatus(F.oa());R!==a.FRAMEBUFFER_COMPLETE&&(t=!1);a.texImage2D(a.TEXTURE_2D,0,f.m()&&a.RGBA16F?a.RGBA16F:a.RGBA,1,1,0,a.RGBA,f.Z(),null);a.framebufferTexture2D(F.L(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,z,0);R=a.checkFramebufferStatus(F.oa());R!==a.FRAMEBUFFER_COMPLETE&&(B=!1);a.bindTexture(a.TEXTURE_2D,null);a.bindFramebuffer(a.FRAMEBUFFER,
null);a.deleteTexture(z);a.deleteFramebuffer(v)},sb:function(){var v=F.a({width:1});v.Ya();var z=T.a({width:1,isFloat:!0,S:3});v.j();z.j();a.flush();a.checkFramebufferStatus(F.oa())!==a.FRAMEBUFFER_COMPLETE?(T.ac(),E=!1):E=!0;v.remove();z.remove()},rb:function(){f.tb();if(!t&&!B)return!1;f.sb();return!0}};return f}(),ta=function(){function b(t,B,E,M){a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,M?a.NEAREST_MIPMAP_NEAREST:a.LINEAR);var A=null;try{if(A=a.getError(),A!==a.NO_ERROR&&console.log("GLERR in test_mipmapping() :",
A),a.texImage2D(a.TEXTURE_2D,0,t,2,2,0,a.RGBA,B,E),A=a.getError(),A!==a.NO_ERROR)return!1}catch(f){return!1}M&&a.generateMipmap(a.TEXTURE_2D);O.ia();O.h(!1,!0);a.readPixels(0,0,1,1,a.RGBA,a.UNSIGNED_BYTE,p);A=a.getError();A===a.INVALID_OPERATION&&"undefined"!==typeof a.PIXEL_PACK_BUFFER&&(a.bindBuffer(a.PIXEL_PACK_BUFFER,null),a.readPixels(0,0,1,1,a.RGBA,a.UNSIGNED_BYTE,p),A=a.getError());return A!==a.NO_ERROR?!1:0!==p[0]}function d(t){return L.Da()&&b(n,a.FLOAT,new Float32Array(q),t)?(l=h.za,!0):
!1}function e(t){return L.mb()?b(m,L.Z(),new Uint16Array(q),t)||b(m,a.FLOAT,new Float32Array(q),t)?(l=h.ga_,!0):!1:!1}var g=!1,h={za:3,ga_:2,RGBA8:0},l=h.RGBA8,p=new Uint8Array(4),r=[.8,1,.8,1],q=r.concat(r,r,r),k=!0,n=null,m=null,y={i:function(){L.Ia();L.ma();m=n=a.RGBA;if(ya.m()){var t=a.RGBA32F;t&&(n=t);(t=a.RGBA16F)&&(m=t)}O.i();F.reset();F.A();a.viewport(0,0,1,1);x.set("s0");g=!0;t=a.createTexture();a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,t);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,
a.REPEAT);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);if(e(!0)||d(!0))return!0;k=!1;if(e(!1)||d(!1))return!0;if(ya.m()){m=n=a.RGBA;if(e(!0)||d(!0))return!0;k=!1;if(e(!1)||d(!1))return!0}return!1},nb:function(){return k},Oc:function(){return l},$c:function(){g||y.i();return l===h.za},Lb:function(){g||y.i();return l===h.ga_}};return y}(),Ba={a:function(b){var d=T.a(b.alpha),e=T.a(b.beta);return{ub:function(){d.b(1);e.b(2)}}}},Fa=
{a:function(b){var d=null,e=!1,g=!1,h=!1,l=!1,p=null,r="undefined"===typeof b.preprocessing?!1:b.preprocessing,q="undefined"===typeof b.preprocessingSize?b.size:b.preprocessingSize;b.mask&&(e=!0,Ca&&void 0!==Ca.fb&&(b.mask=Ca.fb+b.mask),d=T.a({isFloat:!1,url:b.mask}));var k=!1;b.customInputShader&&(k="s42",x.Aa({name:"_",id:k,c:b.customInputShader,f:["uSource"],precision:"lowp"}),x.F(k,[{type:"1i",name:"_",value:0}]));switch(r){case "sobel":p="s31";h=!0;break;case "meanNormalization":p="s32";h=!0;
break;case "grayScale":p="s28";h=!1;break;case "grayScaleTilt":p="s29";l=!0;h=!1;break;case "rgbGrayTilt":p="s30";l=!0;h=!1;break;case "copy":p=k?k:"s0";break;case "inputLightRegulation":p=k?k:"s28";Da.i({Na:q,Va:b.size,Ta:b.nBlurPass,Kb:!1});g=!0;break;case "direct":case "none":p=!1;break;default:p="s3"}l&&x.F(p,[{name:"u27",type:"1f",value:b.tilt}]);e&&(p+="Mask");var n=T.a({isFloat:!1,isPot:!1,width:b.size}),m={s:function(){return q},pa:function(){return m.s()},Eb:function(){return g?Da.La():n},
w:function(){F.I();p&&(x.set(p),h&&x.D("u28",1/b.size),n.B(),e&&d.b(1),O.h(!1,!1),n.b(0),g&&Da.Wb(n))}};return m}},La={a:function(b){"undefined"===typeof b.disableNormalize&&(b.disableNormalize=!1);var d=null,e=null,g=null,h=null,l=null,p=null,r=null,q=null,k=[],n=[],m=!1,y=null,t=!0,B=-1,E=b.isReorganize?b.isReorganize:!1,M=b.kernelsNumber?!0:!1,A=b.dynPelu?Ba.a(b.dynPelu):!1,f=A?!0:!1,v={isEnabled:!1};b.Jb?(b.sparsity="undefined"!==typeof b.sparsity?b.sparsity:b.aa.pa(),t=!1):"full"===b.connectivityUp&&
(b.sparsity=b.aa.pa());var z={elu:"s15",elu01:"s16",relu:"s14",arctan:"s18",sigmoid:"s13",copy:"s0",softplus:"s19",dynPelu:"s17"}[b.activation],R=b.sparsity*b.sparsity,da=!1,S=b.size,N="";if(b.maxPooling){switch(b.maxPooling.size){case 2:N="s33";break;case 4:N="s34"}da=!0;S/=b.maxPooling.size;p=T.a({isFloat:!0,isPot:!1,width:S})}var c=void 0!==b.Ub&&b.Ub?!0:!1,w=null,G=null,C=null;if(c){w="s43"+b.index.toString();x.Ma("s43",w,[((b.normalization.n-1)/2).toFixed(1)]);x.F(w,[{type:"1i",name:"u1",value:0},
{type:"2f",name:"u7",value:[1/b.size,1/b.size]},{type:"1f",name:"u6",value:b.normalization.alpha},{type:"1f",name:"u9",value:b.normalization.beta},{type:"1f",name:"u32",value:b.normalization.k}]);var V={isFloat:!0,isPot:!0,width:b.size};G=T.a(V);C=T.a(V)}var U=-1,Q=null;t&&(h=T.a({isFloat:!0,isPot:!1,width:b.size}));e=T.a(b.bias);var fa={s:function(){return b.size},pa:function(){return S},Ja:function(){return b.classesCount},hb:function(D){q.b(D)},Xb:function(){b.remap&&b.remap.isEnabled&&(v={isEnabled:!0,
Ob:T.a({isFloat:!1,isFlipY:!1,array:new Uint8Array(b.remap.maskTexture.data),width:b.remap.maskTexture.width,isPot:!1}),layers:b.remap.layers.map(function(D){return b.parent.Db(D)}),depth:b.remap.depth})},cc:function(){switch(b.connectivityUp){case "direct":Q=Ga.a(b.connectivity);break;case "square":Q=Ha.a(b.connectivity);break;case "squareFast":Q=Ia.a(b.connectivity,b.activation);break;case "full":Q=Ja.a(b.connectivity);break;case "conv":B=b.kernelsNumber,Q=Ka.a(b.connectivity),E&&(l=T.a({width:S,
isFloat:!0,isFlipY:!1,isPot:!1}))}if(Q.M){var D=b.size*b.sparsity;U=Math.log(D/b.size)/Math.log(2);d=T.a({isMipmap:!0,isFloat:!0,isPot:!0,width:D,Sa:U});g=T.a({isFloat:!0,isPot:!0,width:b.size})}},w:function(D){q=D;Q.M?(d.B(),M&&e.b(2),Q.w(v),d.b(0),d.Bb(U),g.B(),M?x.set("s0"):(x.set("s27"),x.D("u26",R),e.b(1)),d.ib(U,0),O.h(!1,!1),x.set(z),c?G.j():h.j(),g.b(0),f&&A.ub(),O.h(!1,!1)):(h.B(),e.b(1),Q.w());c&&(x.set(w),C.j(),G.b(0),O.h(!1,!1),x.set("s44"),x.D("u6",1),h.j(),C.b(1),O.h(!1,!1));if(t)return da?
(p.B(),h.b(0),x.set(N),x.T("u7",1/b.size,1/b.size),O.h(!1,!1),D=p):D=h,D.b(0),E&&(l.j(),x.set("s21"),x.T("u13",B,S/B),O.h(!1,!1),D=l,l.b(0)),D;D=h;b.disableNormalize||(x.set("gpuRawAvg"===m?"s8":"s7"),x.D("u4",1/b.size),r.B(),h.b(0),O.h(!1,!1),D=r);switch(m){case "cpuRGBA2Float":D.Ha();D=fa.Yb(D);y(D);break;case "gpuRawAvg":case "gpuRaw":D.b(0);case "none":y(D)}return!1},pb:function(D){D&&"undefined"!==typeof D.Ua&&(m=D.Ua,y=D.Vb);h=T.a({isFloat:!0,isPot:!0,isMipmap:!1,width:b.size});D="undefined"!==
typeof b.classesCount&&b.classesCount?b.classesCount:b.size*b.size;for(var ca=0,W=0,X=0;ca<D;++ca)k.push(W+(b.size-1-X)*b.size),n.push([-1,-1,-1,-1]),++W,W===b.size&&(W=0,++X);b.disableNormalize||(r=T.a({isFloat:!0,isPot:!0,width:b.size}))},Yb:function(D){D.Ha();var ca=D.Wa();k.forEach(function(W,X){n[X][0]=ca[0][W];n[X][1]=ca[1][W];n[X][2]=ca[2][W];n[X][3]=ca[3][W]});return n}};b.aa&&fa.cc(b.aa);return fa}};
function Ma(){var b=null,d=null,e=0;this.Db=function(g){return b[g]};this.$b=function(g){var h=null;e=g.length;b=g.map(function(l,p){l=Object.assign({},l,{index:p,parent:this,aa:h,Jb:p===e-1});return h=p=0===p?Fa.a(l):La.a(l)});d=b[e-1];b.forEach(function(l,p){0!==p&&l.Xb()})};this.w=function(g,h){var l=h;b.forEach(function(p){l=p.w(l,g)});return l};this.La=function(){return d.Eb()};this.bc=function(g){d.pb(g)};this.Ja=function(){return d.Ja()}}
var Ga={a:function(b){var d=T.a(b.weights);delete b.weights.data;return{M:!0,Y:function(){return 1},Fb:function(){return d},w:function(){x.set("s26");d.b(1);O.h(!1,!1)}}}},Ja={a:function(b){var d=b.fromLayerSize,e=T.a(b.weights);return{M:!0,Y:function(){return d},w:function(g){if(g.isEnabled){x.set("s24");g.Ob.b(3);var h,l=Math.min(g.layers.length,g.depth);for(h=0;h<l;++h)g.layers[h].hb(4+h)}else x.set("s23");x.D("u17",b.toLayerSize);e.b(1);O.h(!1,!1)}}}},Ha={a:function(b){for(var d=b.fromLayerSize,
e=b.toLayerSize,g=b.toSparsity,h=g*e,l=h/d,p=d/e,r=0,q=0,k=0,n=Array(g*e*g*e*4),m=Array(g*e*g*e*4),y=Array(d*d),t=0;t<y.length;++t)y[t]=0;t=Math.floor(g/2);for(var B=.5/e,E=.5/d,M=.5/h,A=0;A<e;++A)for(var f=Math.round(A*p),v=0;v<e;++v){var z=Math.round(v*p),R=A/e,da=v/e;R+=B;da+=B;for(var S=0;S<g;++S){var N=f+S-t;0>N&&(N+=d);N>=d&&(N-=d);for(var c=0;c<g;++c){var w=r/h,G=q/h,C=z+c-t;0>C&&(C+=d);C>=d&&(C-=d);var V=N/d,U=C/d;G=1-G-1/h;V+=E;U+=E;w+=M;G+=M;var Q=A*g+S,fa=v*g+c;fa=e*g-fa-1;Q=fa*e*g+Q;n[4*
Q]=w;n[4*Q+1]=G;n[4*Q+2]=V;n[4*Q+3]=U;U=y[C*d+N]++;Q=U%l;V=N*l+Q;C=C*l+(U-Q)/l;C=d*l-1-C;C=C*d*l+V;m[4*C]=w;m[4*C+1]=G;m[4*C+2]=R;m[4*C+3]=da;++r>=h&&(r=0,++q);++k}}}y=null;var D=T.a(b.weights);T.a({width:h,isFloat:!0,array:new Float32Array(m),isPot:!0});m=null;var ca=T.a({width:h,isFloat:!0,array:new Float32Array(n),isPot:!0});n=null;return{M:!0,Y:function(){return l},w:function(){x.set("s22");D.b(1);ca.b(2);O.h(!1,!1)}}}},Ka={a:function(b){var d=b.kernelsNumber,e=b.toSparsity,g=e*b.toLayerSize/
b.fromLayerSize,h=T.a(b.weights);return{M:!0,Y:function(){return g},Tc:function(){return e},Fb:function(){return h},w:function(){x.set("s25");x.D("u23",d);x.D("u24",e);x.D("u17",b.toLayerSize);x.D("u25",b.fromLayerSize);h.b(1);O.h(!1,!1)}}}},Ia={a:function(b,d){var e=b.fromLayerSize,g=b.toLayerSize,h=b.toSparsity,l=b.stride?b.stride:1,p=h*g/e,r=g<e,q=e/g,k=T.a(b.weights),n="s45"+[e.toString(),g.toString(),h.toString(),l.toString(),d].join("_");x.xb(n)||(b=ka(d),g=[{type:"1f",name:"u17",value:g},{type:"1f",
name:"u31",value:l}],r&&g.push({type:"1f",name:"u25",value:e}),e=[(r?p:h).toFixed(1),b],r&&e.push(q.toFixed(1)),x.Ma(r?"s39":"s38",n,e),x.F(n,g.concat([{type:"1i",name:"u15",value:0},{type:"1i",name:"u22",value:1},{type:"1i",name:"u14",value:3}])));return{M:!1,Y:function(){return p},w:function(){x.set(n);k.b(3);O.h(!1,!1)}}}},Da=function(){var b=-1,d=-1,e=-1,g=-1,h=!1,l=null,p=null,r=null,q=null,k=null;return{i:function(n){b=n.Ta?n.Ta:3;d=n.Na?n.Na:64;e=n.Va?n.Va:64;h=n.Kb?!0:!1;n={isFloat:!1,width:d,
isPot:!1,isFlipY:!1};l=T.a(n);p=T.a(n);r=T.a(n);q=T.a(n);k=T.a({isFloat:!0,width:e,isPot:!1,isFlipY:!1});g=1/d},Wb:function(n){x.set("s35");q.j();O.h(h,!1);x.set("s36");for(var m=0;m<b;++m)l.j(),x.T("u7",g,0),O.h(h,!1),r.j(),q.b(0),O.h(h,!1),p.j(),l.b(0),x.T("u7",0,g),O.h(h,!1),q.j(),r.b(0),O.h(h,!1),m!==b-1&&p.b(0);x.set("s37");k.j();n.b(0);p.b(1);q.b(2);O.h(h,!1);k.b(0)},La:function(){return k}}}();function Na(b,d){b[d]=!0;b.setAttribute(d,"true")}
function Oa(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}function Pa(){var b=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return 2<b.length?[parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3]||0,10)]:[0,0,0]}function Qa(){var b=navigator.userAgent.toLowerCase();return-1!==b.indexOf("safari")&&-1===b.indexOf("chrome")?!0:!1}function Ra(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1}
function Sa(b){if(!b)return b;var d=!1;if(b.video){var e=function(g){var h={};"undefined"!==typeof g.min&&(h.min=g.min);"undefined"!==typeof g.max&&(h.max=g.max);"undefined"!==typeof g.ideal&&(h.ideal=g.ideal);return h};d={};"undefined"!==typeof b.video.width&&(d.width=e(b.video.width));"undefined"!==typeof b.video.height&&(d.height=e(b.video.height));"undefined"!==typeof b.video.facingMode&&(d.facingMode=b.video.facingMode)}d={audio:b.audio,video:d};"undefined"!==typeof b.deviceId&&(d.deviceId=b.deviceId);
return d}function Ta(b){var d=b.video.width;b.video.width=b.video.height;b.video.height=d;return b}
function Ua(b){function d(m){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(y,t){return Math.abs(y-m)-Math.abs(t-m)})}function e(m){var y=Sa(b);g.push(m(y))}var g=[];if(!b||!b.video)return g;if(b.video.width&&b.video.height){if(b.video.width.ideal&&b.video.height.ideal){var h=d(b.video.width.ideal).slice(0,3),l=d(b.video.height.ideal).slice(0,3),p={},r=0;for(p.H=void 0;r<h.length;p={H:p.H},++r){p.H=h[r];var q={},k=0;for(q.G=void 0;k<l.length;q={G:q.G},++k)if(q.G=l[k],
p.H!==b.video.width.ideal||q.G!==b.video.height.ideal){var n=Math.max(p.H,q.G)/Math.min(p.H,q.G);n<4/3-.1||n>16/9+.1||e(function(m,y){return function(t){t.video.width.ideal=m.H;t.video.height.ideal=y.G;return t}}(p,q))}}}e(function(m){return Ta(m)})}b.video.width&&b.video.height&&(b.video.width.ideal&&b.video.height.ideal&&e(function(m){delete m.video.width.ideal;delete m.video.height.ideal;return m}),e(function(m){delete m.video.width;delete m.video.height;return m}));b.video.facingMode&&(e(function(m){delete m.video.facingMode;
return m}),b.video.width&&b.video.height&&e(function(m){Ta(m);delete m.video.facingMode;return m}));g.push({audio:b.audio,video:!0});return g}function Va(b){try{var d=window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(g){d=window.innerHeight>window.innerWidth}if(d&&b&&b.video){d=b.video.width;var e=b.video.height;d&&e&&d.ideal&&e.ideal&&d.ideal>e.ideal&&(b.video.height=d,b.video.width=e)}}
function Wa(b){b.volume=0;Na(b,"muted");if(Qa()){if(1===b.volume){var d=function(){b.volume=0;window.removeEventListener("mousemove",d,!1);window.removeEventListener("touchstart",d,!1)};window.addEventListener("mousemove",d,!1);window.addEventListener("touchstart",d,!1)}setTimeout(function(){b.volume=0;Na(b,"muted")},5)}}
function Xa(b,d,e){return new Promise(function(g,h){if(b.srcObject&&b.srcObject.getVideoTracks){var l=b.srcObject.getVideoTracks();1!==l.length?h("INVALID_TRACKNUMBER"):(l=l[0],d?Ya(b,g,h,e):(l.stop(),g()))}else h("BAD_IMPLEMENTATION")})}
function Za(b,d,e,g){function h(p){l||(l=!0,e(p))}var l=!1;navigator.mediaDevices.getUserMedia(g).then(function(p){function r(){setTimeout(function(){if(b.currentTime){var q=b.videoWidth,k=b.videoHeight;if(0===q||0===k)h("VIDEO_NULLSIZE");else{q&&(b.style.width=q.toString()+"px");k&&(b.style.height=k.toString()+"px");q={ob:null,kc:null,Rb:null};try{var n=p.getVideoTracks()[0];n&&(q.Rb=n,q.ob=n.getCapabilities(),q.kc=n.getSettings())}catch(m){}Qa()||Oa()?b.parentNode&&null!==b.parentNode?(l||d(b,p,
q),setTimeout(function(){b.play()},100)):(document.body.appendChild(b),Wa(b),l||d(b,p,q),setTimeout(function(){b.style.transform="scale(0.0001,0.0001)";b.style.position="fixed";b.style.bottom="0px";b.style.right="0px";Wa(b);setTimeout(function(){b.play()},100)},80)):l||d(b,p,q)}}else h("VIDEO_NOTSTARTED")},700)}"undefined"!==typeof b.srcObject?b.srcObject=p:(b.src=window.URL.createObjectURL(p),b.videoStream=p);Wa(b);b.addEventListener("loadeddata",function(){var q=b.play();Wa(b);"undefined"===typeof q?
r():q.then(function(){r()}).catch(function(){h("VIDEO_PLAYPROMISEREJECTED")})},!1)}).catch(function(p){h(p)})}
function Ya(b,d,e,g){if(b)if(Ra()){if(g&&g.video){if(Oa()){var h=Pa();(12>h[0]||12===h[0]&&2>h[1])&&Va(g)}g.video.width&&g.video.width.ideal&&(b.style.width=g.video.width.ideal+"px");g.video.height&&g.video.height.ideal&&(b.style.height=g.video.height.ideal+"px")}Na(b,"autoplay");Na(b,"playsinline");g&&g.audio?b.volume=0:Na(b,"muted");Za(b,d,function(){function l(r){if(0===r.length)e("INVALID_FALLBACKCONSTRAINTS");else{var q=r.shift();Za(b,d,function(){l(r)},q)}}var p=Ua(g);l(p)},g)}else e&&e("MEDIASTREAMAPI_NOTFOUND");
else e&&e("VIDEO_NOTPROVIDED")}var $a=[1,1,2],ab=[.2,.8],Ca={};
function bb(b){function d(){++z;1===z&&(cb.ready=!0,b.kb(!1,{video:m.element,GL:a,videoTexture:m.N.get(),videoTextureCut:n.R.get()}),B!==t.pause&&(g(),B=t.da,h(0)),z=0)}function e(c){v=setTimeout(h.bind(null,c),10)}function g(){f&&(window.cancelAnimationFrame(f),f=null);v&&(window.clearTimeout(v),v=null)}function h(){if(B!==t.pause){F.reset();F.I();var c=m.element.currentTime-S;0>c&&(S=m.element.currentTime);20>1E3*c||(m.N.refresh(),S+=c,x.set("s48"),m.ea.B(),m.N.b(0),O.h(!1,!0));for(c=0;1>c;++c)x.set("s49"),
n.R.B(),m.ea.b(0),n.U.b(1),O.h(!1,!1),n.R.b(0),r.w(!1,n.R);M===E.visible&&(F.qc(),x.set("s47"),m.ea.b(1),n.U.b(0),O.h(!1,!1));a.flush();f=window.requestAnimationFrame(e)}}function l(){n.U.ec(1);x.set("s50");x.hc("u33",A.x,A.y,A.scale);O.h(!1,!1);0!==++A.n%2&&(A.scale+=q.lc,2.5<A.scale&&(A.x+=q.mc,A.scale=1.25,A.x>q.Pb&&(A.x=q.Sb,A.y+=q.nc,A.y>q.Qb&&(A.y=q.Tb))));x.set("s51");n.ua.dc(1);n.U.b(0);O.h(!1,!1);var c=Date.now();if(100<c-p){p=c;x.set("s1");F.A();n.ua.b(0);O.h(!1,!1);a.readPixels(0,0,1,1,
a.RGBA,a.UNSIGNED_BYTE,y);c=ab[0]+da*(ab[1]-ab[0]);var w=Math.abs(y[1]/255*2-1),G=128<y[0],C=G&&w<c+.1;B===t.da&&G&&w<c-.1?(b.Ca(!0),B=t.la):B!==t.la||C||(b.Ca(!1),B=t.da);F.I()}}var p=Date.now(),r=null,q={mc:.1,nc:.1,lc:1.25/3,Sb:.25,Tb:.25,Pb:.75,Qb:.75},k=[.16,.16],n={R:null,U:null,ua:null,zc:null},m={element:null,N:null,ea:null,ka:null},y=new Uint8Array([0,0,0,0]),t={Nb:0,da:1,la:2,pause:3},B=t.Nb,E={hidden:0,visible:1},M=b.Ib?E.visible:E.hidden,A={n:0,x:.25,y:.25,scale:1.25},f=null,v=null,z=
0,R="undefined"!==typeof b.ya?b.ya:"./",da=(("undefined"!==typeof b.Xa?b.Xa:.55)-ab[0])/(ab[1]-ab[0]),S=0,N={fc:function(c){da=c},oc:function(c){M=c?E.visible:E.hidden},pc:function(c,w){if(c&&B===t.pause||!c&&B!==t.pause)return Promise.resolve();w=w?Xa(m.element,!c,m.ka):Promise.resolve();c?(B=t.pause,g()):(B=t.la,g(),B=t.da,h(0));return w},i:function(){m.ka={video:{facingMode:{ideal:"user"},width:{min:480,max:1280,ideal:800},height:{min:480,max:1280,ideal:600}},audio:!1};Ya(Ra()?document.createElement("video"):
!1,function(c){N.start(c)},function(){errorCallback("NO_WEBCAM")},m.ka)},start:function(c){m.element=c;N.Hb();N.qb();N.ic();ia(R+'NNC.json',N.Mb.bind(null,d))},Hb:function(){x.eb([{id:"s48",name:"_",V:"attribute vec2 a0;uniform vec2 u34,u35;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=u35+u34*a0;}",X:["a0"],O:[2],c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:["u1","u34","u35"],precision:"lowp"},{id:"s49",
name:"_",c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",V:"attribute vec2 a0;uniform sampler2D u36;uniform vec2 u37;const vec2 k=vec2(.25,.5),j=vec2(.75,.5),e=vec2(.5,.5);varying vec2 vv0;void main(){vec4 a=texture2D(u36,k);vec2 d=a.gb,b=a.a*u37;vec4 c=texture2D(u36,j);float l=c.a,g=c.y;vec2 f=vec2(1./cos(g),1.);b*=f;vec2 i=a0*.5+e;vv0=d+(i-e)*b,gl_Position=vec4(a0,0.,1.);}",X:["a0"],O:[2],f:["u1","u36","u37"],precision:"lowp"},{id:"s50",name:"_",V:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",
c:"uniform sampler2D u38,u36;uniform vec3 u33,u39;uniform float u40,u41,u42,u43,u44,u45;const vec4 e=vec4(.25,.25,.25,.25);const float f=1e-3;void main(){vec4 b=texture2D(u36,vec2(.25,.5));float a=floor(b.r+f),c=0.;vec4 h=texture2D(u38,vec2(.125,.625)),i=texture2D(u38,vec2(.375,.625));float d=dot(h,e),j=dot(i,e);bool k=d>u43&&d>j+u44;k?a=2.:a>u42?a=0.:a>1.9&&(b.a>u41||b.a<u40)?a=0.:a>1.9?a+=1.:0.;if(a<.9)b.gba=u33,a=1.;else{float l=dot(e,texture2D(u38,vec2(.375,.875))),m=dot(e,texture2D(u38,vec2(.625,.875))),n=dot(e,texture2D(u38,vec2(.875,.875))),o=dot(e,texture2D(u38,vec2(.125,.875)));c=clamp(o,-1.+f,1.-f);float p=step(1.5,a);a*=p;float g=b.a*u45;b.gba+=vec3(l,m,n)*u39*g;}b.r=a+c*.5+.5,gl_FragColor=b;}",
f:"u38 u36 u33 u40 u41 u42 u44 u43 u39 u45".split(" ")},{id:"s51",name:"_",c:"uniform sampler2D u36,u46;uniform float u47;varying vec2 vv0;const vec2 e=vec2(.5,.5);void main(){vec4 a=texture2D(u36,e),b=texture2D(u46,e);float c=step(2.,a.r),d=fract(a.r);vec4 f=vec4(c,d,0.,1.);gl_FragColor=mix(f,b,u47);}",f:["u36","u46","u47"]},{id:"s47",name:"_",c:"uniform sampler2D u36,u48;uniform vec2 u37;varying vec2 vv0;const vec2 j=vec2(1.,1.);const vec3 k=vec3(0.,.7,1.);void main(){vec4 g=texture2D(u36,vec2(.5,.5));vec3 l=texture2D(u48,vv0).rgb;vec2 h=g.gb;float m=g.a;vec2 b=m*u37,d=h+b,c=h;c-=b/2.,d-=b/2.;vec2 n=.5*(c+d),i=step(c,vv0)*step(vv0,d);float o=i.x*i.y;vec2 a=2.*abs(n-vv0)/b;a=pow(a,3.*j);float f=max(a.x,a.y);f*=o,gl_FragColor=vec4(mix(l,k,f),1.);}",
f:["u36","u48","u37"]}]);x.F("s49",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u36",value:1},{type:"2f",name:"u37",value:k}]);x.F("s51",[{type:"1i",name:"u36",value:0},{type:"1i",name:"u46",value:1},{type:"1f",name:"u47",value:.9}]);x.F("s47",[{type:"1i",name:"u36",value:0},{type:"1i",name:"u48",value:1},{type:"2f",name:"u37",value:k}]);x.F("s50",[{type:"1i",name:"u38",value:0},{type:"1i",name:"u36",value:1},{type:"1f",name:"u40",value:1.1},{type:"1f",name:"u41",value:5.8},{type:"1f",name:"u42",
value:55},{type:"1f",name:"u43",value:.95},{type:"1f",name:"u44",value:1.1},{type:"1f",name:"u45",value:k[0]},{type:"3f",name:"u39",value:[$a[0]*k[0],$a[1]*k[1],$a[2]]}])},qb:function(){m.N=T.a({u:m.element,isPot:!1,isFloat:!1,isFlipY:!0});m.ea=T.a({isPot:!1,dd:!0,isFloat:!1,width:400,height:400});n.R=T.a({isPot:!0,isFloat:!1,width:64});n.U=za.a({width:1,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,.25,.25,0])});n.ua=za.a({width:1,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,.5,
0,1])})},ic:function(){var c=[.5,.5],w=m.element.videoHeight/m.element.videoWidth,G=ya.C()/ya.s();w>G?1>=w?c[0]*=w:c[1]/=w:(c[0]*=w,w=1/G,c[0]*=w,c[1]*=w);c[1]*=G;x.F("s48",[{type:"1i",name:"u1",value:0},{type:"2f",name:"u34",value:c},{type:"2f",name:"u35",value:[.5,.5]}])},Mb:function(c,w){w="object"===typeof w?w:JSON.parse(w);r=new Ma;r.$b(w.layers);r.bc({Ua:"gpuRawAvg",Vb:l});c&&c()}};return N}
var cb={ready:!1,set_sensibility:function(b){cb.ready&&cb.W.fc(b)},toggle_pause:function(b,d){if(cb.ready)return cb.W.pc(b,d)},toggle_display:function(b){cb.ready&&cb.W.oc(b)},init:function(b){function d(e){b.callbackReady&&b.callbackReady(e?e:"UNKNOW_ERROR")}cb.W=bb({Ib:"undefined"===typeof b.isDisplayVideo?!0:b.isDisplayVideo,kb:function(e,g){b.callbackReady&&b.callbackReady(e,g)},Ca:b.callbackTrack,Xa:b.sensibility,ya:b.NNCpath});if(!ya.i({Ga:b.canvasId,width:400,height:400,debug:!1,sa:!1,premultipliedAlpha:!0}))return d&&
d("COMPAT_FAIL"),!1;x.i();cb.W.i();return!0}};window.GLANCETRACKERAPI=cb;
;return GLANCETRACKERAPI;})();