 /**
 * Jeeliz Glance Tracker - https://github.com/jeeliz/jeelizGlanceTracker
 *
 * Copyright 2018 Jeeliz ( https://jeeliz.com )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

var GLANCETRACKERAPI=(function(){function na(b,d){var e=new XMLHttpRequest;e.open("GET",b,!0);e.withCredentials=!1;e.onreadystatechange=function(){4!==e.readyState||200!==e.status&&0!==e.status||d(e.responseText)};e.send()}
function qa(b){switch(b){case "relu":return"gl_FragColor=max(vec4(0.,0.,0.,0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.,1.,1.,1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1,0.1,0.1,0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}
function sa(b,d){var e=d%8;return b[(d-e)/8]>>7-e&1}
function ua(b){var d=JSON.parse(b);b=d.ne;var e=d.nf,g=d.n,k="undefined"===typeof btoa?Buffer.from(d.data,"base64").toString("latin1"):atob(d.data),l=k.length,m;d=new Uint8Array(l);for(m=0;m<l;++m)d[m]=k.charCodeAt(m);k=new Float32Array(g);l=new Float32Array(e);m=b+e+1;var n,p;for(n=0;n<g;++n){var h=m*n;var q=0===sa(d,h)?1:-1;var r=h+1;var x=1,D=0;for(p=r+b-1;p>=r;--p)D+=x*sa(d,p),x*=2;p=D;r=d;x=h+1+b;D=l;var A=0,z=D.length;for(h=x;h<x+z;++h)D[A]=sa(r,h),++A;for(h=r=0;h<e;++h)r+=l[h]*Math.pow(2,-h-
1);q=0===r&&0===p?0:q*(1+r)*Math.pow(2,1+p-Math.pow(2,b-1));k[n]=q}return k}
var u=function(){function b(f,v){f=a.createShader(f);a.shaderSource(f,v);a.compileShader(f);return a.getShaderParameter(f,a.COMPILE_STATUS)?f:!1}function d(f,v){f=b(a.VERTEX_SHADER,f);v=b(a.FRAGMENT_SHADER,v);var w=a.createProgram();a.attachShader(w,f);a.attachShader(w,v);a.linkProgram(w);return w}function e(f){void 0===f.U&&(f.U="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");void 0===f.W&&(f.W=["a0"]);void 0===f.O&&(f.O=[2]);
if(void 0===f.precision||"highp"===f.precision)f.precision=p;f.id=m++;void 0!==f.Mb&&f.Mb.forEach(function(w,Q){f.c=f.c.replace(w,f.aa[Q])});f.ra=0;f.O.forEach(function(w){f.ra+=4*w});f.$=d(f.U,"precision "+f.precision+" float;\n"+f.c);f.l={};f.f.forEach(function(w){f.l[w]=a.getUniformLocation(f.$,w)});f.attributes={};f.P=[];f.W.forEach(function(w){var Q=a.getAttribLocation(f.$,w);f.attributes[w]=Q;f.P.push(Q)});if(f.h){a.useProgram(f.$);l=f;k=f.id;for(var v in f.h)a.uniform1i(f.l[v],f.h[v])}f.Gc=
!0}function g(f){wa.Ub(H);k!==f.id&&(H.ca(),k=f.id,l=f,a.useProgram(f.$),f.P.forEach(function(v){0!==v&&a.enableVertexAttribArray(v)}))}var k=-1,l=!1,m=0,n=!1,p="highp",h=["u1"],q=["u0"],r={u1:0},x={u0:0},D={u1:0,u2:1},A={u3:0},z={s0:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:h,h:r},s1:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:h,h:r,precision:"lowp"},s2:{c:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",
f:["u1","u2"],h:D},s3:{c:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",f:h,h:r},s4:{c:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",f:["u1","mask"],h:D},s5:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",f:h,h:r},s6:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",
f:h,h:r},s7:{c:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",f:["u0","u4"],h:x},s8:{c:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 g=vec4(.25,.25,.25,.25),e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,g);gl_FragColor=b*e;}",f:["u0","u4"],h:x},s9:{c:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",
f:h,h:r},s10:{c:"uniform sampler2D u1,u5;uniform float u6;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);gl_FragColor=mix(b,a,u6*f);}",f:["u1","u5","u6"],h:{u1:0,u5:1}},s11:{c:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u7)+texture2D(u1,vv0+u7*vec2(1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,1.)));}",f:["u1","u7"],h:r},s12:{c:"uniform sampler2D u1;uniform vec4 u8;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 k(float a){if(a==0.)return vec4(0.,0.,0.,0.);float l=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),m=c+127.,b=(a/exp2(c)-1.)*8388608.,d=m/2.,n=fract(d)*2.,o=floor(d),p=e(b,0.,8.),q=e(b,8.,16.),r=n*128.+e(b,16.,23.),j=l+o;return vec4(p,q,r,j)/255.;}void main(){float a=dot(texture2D(u1,vv0),u8);gl_FragColor=k(a);}",
f:["u1","u8"],h:r},s13:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",f:q,h:x},s14:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(e,a);}",f:q,h:x},s15:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-e,a,step(0.,a));}",f:q,h:x},s16:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-e;gl_FragColor=mix(.1*b,a,step(0.,a));}",
f:q,h:x},s17:{c:"uniform sampler2D u0,u6,u9;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u6,vv0),d=texture2D(u9,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",f:["u0","u6","u9"],h:{u0:0,u6:1,u9:2}},s18:{c:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",f:q,h:x},s19:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(.5,.5,.5,.5);void main(){vec4 a=texture2D(u0,vv0),b=log(e+a);gl_FragColor=b;}",
f:q,h:x},s20:{c:"uniform sampler2D u0;uniform float gain;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=exp(a);}",f:["u0","u10"],h:x},s21:{c:"uniform sampler2D u0,u11;uniform float u12;const vec2 f=vec2(.5,.5);const float g=1e-5;const vec4 h=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u11,f);float b=u12*u12;vec4 c=max(b*a,g*h);gl_FragColor=texture2D(u0,vv0)/c;}",f:["u0","u13","u12"],h:{u0:0,u13:1}},s22:{c:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){float a=u14.x*u14.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u14.y),g=floor(u14.x*fract(b*u14.y)),f=(g*u14.y+d)/a;gl_FragColor=texture2D(u1,f+c/a);}",
f:["u1","u14"],h:r},s23:{c:"uniform sampler2D u15,u16,u17;varying vec2 vv0;void main(){vec4 a=texture2D(u17,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u15,b),e=texture2D(u16,c);gl_FragColor=d*e;}",f:["u15","u16","u17"],h:{u16:0,u15:1,u17:2}},s24:{c:"uniform float u18;uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec2 a=fract(vv0*u18);vec4 b=texture2D(u15,vv0),c=texture2D(u16,a);gl_FragColor=b*c;}",f:["u16","u15","u18"],h:{u16:0,u15:1}},s25:{c:"uniform float u18;uniform sampler2D u15,u16,u19,u20,u21,u22;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 i=vv0*u18,m=floor(i),c=i-m;vec4 n=texture2D(u15,vv0),d=texture2D(u16,c),a=texture2D(u22,vv0);a=a*255.;vec4 o=texture2D(u19,c),p=texture2D(u20,c),q=texture2D(u21,c),j=step(-g,-a),b=e-j,k=b*step(-e-g,-a);b*=e-k;vec4 h=b*step(-2.*e-g,-a);b*=e-h;vec4 l=b;d=j*d+k*o+h*p+l*q,gl_FragColor=n*d;}",
f:"u15 u16 u18 u22 u19 u20 u21".split(" "),h:{u16:0,u15:1,u22:3,u19:4,u20:5,u21:6}},s26:{c:"uniform sampler2D u15,u16,u23;uniform float u18,u24,u25,u26;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u24*vv0),g=u24*vv0-a;float b=u18/u24;vec2 c=floor(g*b),d=g*b-c,h=(a+d)/u24;float l=u24*u26/u18;vec2 m=l*c,i=(m+d*u25)/u26,e=step(i,j);vec4 n=texture2D(u15,h),o=texture2D(u16,i),p=n*o*e.x*e.y,k=texture2D(u23,h);gl_FragColor=p*u25*u25+k;}",f:"u15 u16 u18 u24 u25 u26 u23".split(" "),h:{u16:0,
u15:1,u23:2}},s27:{c:"uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec4 a=texture2D(u15,vv0),b=texture2D(u16,vv0);gl_FragColor=a*b;}",f:["u15","u16"],h:{u16:0,u15:1}},s28:{c:"uniform sampler2D u1,u23;uniform float u27;varying vec2 vv0;void main(){gl_FragColor=texture2D(u23,vv0)+u27*texture2D(u1,vv0);}",f:["u1","u23","u27"],h:{u1:0,u23:1}},s29:{c:"varying vec2 vv0;uniform sampler2D u1;const vec4 g=vec4(1.,1.,1.,1.),e=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,e)*g;}",
f:h,h:r,precision:"lowp"},s30:{c:"varying vec2 vv0;uniform sampler2D u1;uniform float u28;const vec3 e=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u28)).rgb,c=texture2D(u1,vv0+vec2(u28,u28)).rgb,d=texture2D(u1,vv0+vec2(u28,0.)).rgb;gl_FragColor=vec4(dot(a,e),dot(b,e),dot(c,e),dot(d,e));}",f:["u1","u28"],h:r,precision:"lowp"},s31:{c:"varying vec2 vv0;uniform sampler2D u1;uniform float u28;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u28)).rgb,c=texture2D(u1,vv0+vec2(u28,u28)).rgb,d=texture2D(u1,vv0+vec2(u28,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
f:["u1","u28"],h:r,precision:"lowp"},s32:{c:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u29;const vec4 g=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u29,vv0.y-u29))*1.,a-=texture2D(u1,vec2(vv0.x-u29,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u29,vv0.y+u29))*1.,a+=texture2D(u1,vec2(vv0.x+u29,vv0.y-u29))*1.,a+=texture2D(u1,vec2(vv0.x+u29,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u29,vv0.y+u29))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u29,vv0.y-u29))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u29))*2.,b-=texture2D(u1,vec2(vv0.x+u29,vv0.y-u29))*1.,b+=texture2D(u1,vec2(vv0.x-u29,vv0.y+u29))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u29))*2.,b+=texture2D(u1,vec2(vv0.x+u29,vv0.y+u29))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),f=texture2D(u2,vv0);gl_FragColor=f.a*e.r*g;}",
f:["u1","u2","u29"],h:D},s33:{c:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u29;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float i=0.;vec2 l=k*u29,b,c;float d,a,g=0.;for(float f=-4.;f<=4.;f+=1.)for(float e=-4.;e<=4.;e+=1.)b=vec2(f,e),d=length(b)/2.,a=exp(-d*d),c=vv0+l*b,a=1.,i+=a*texture2D(u1,c).r,g+=a;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,c).r-i/g)*j;}",f:["u1","u2","u29"],h:D},s34:{c:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 h=vec2(.5,.5),i=vec2(1.,0.),j=vec2(0.,1.);void main(){vec2 a=vv0-u7*h;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*i),d=texture2D(u3,a+u7*j),k=texture2D(u3,a+u7),l=e(b,c),g=e(d,k);gl_FragColor=e(l,g);}",
f:["u3","u7"],h:A},s35:{c:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;const vec2 j=vec2(1.,0.),k=vec2(0.,1.),l=vec2(2.,0.),m=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*j),d=texture2D(u3,a+u7*k),g=texture2D(u3,a+u7),i=e(b,c),h=e(d,g);return e(i,h);}void main(){vec2 a=vv0+u7*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u7*l),d=f(a+u7*2.),g=f(a+u7*m),i=e(b,c),h=e(d,g);gl_FragColor=e(i,h);}",f:["u3","u7"],h:A},s36:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",
f:["u1"],h:r,precision:"lowp"},s37:{c:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;const float d=15444.;void main(){vec4 a=1001./d*texture2D(u1,vv0-3.*u7)+2002./d*texture2D(u1,vv0-2.*u7)+3003./d*texture2D(u1,vv0-u7)+3432./d*texture2D(u1,vv0)+3003./d*texture2D(u1,vv0+u7)+2002./d*texture2D(u1,vv0+2.*u7)+1001./d*texture2D(u1,vv0+3.*u7);gl_FragColor=a;}",f:["u7","u1"],h:r,precision:"lowp"},s38:{c:"uniform sampler2D u1,u30,u31;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);const float h=.1;void main(){vec4 a=texture2D(u30,vv0),b=texture2D(u31,vv0),c=texture2D(u1,vv0),d=max(g*h,b-a*a),f=sqrt(d);gl_FragColor=(c-a)/f;}",
f:["u1","u30","u31"],h:{u1:0,u30:1,u31:2}}},F={s39:{c:"uniform float u18,u32;uniform sampler2D u15,u16,u23;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u23,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u18,xyTo=floor(vv0*u18+eps2);float weightSize=toSparsity*u18;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u32*(xyPatch-halfFromSparsity))/u18,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u15,uvWeight)*texture2D(u16,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
f:["u18","u15","u16","u23","u32"],aa:["1.1111","gl_FragColor\\*=2.2222;"]},s40:{c:"uniform float u18,u32,u26;uniform sampler2D u15,u16,u23;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u23,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u26,xyTo=floor(vv0*u18+eps2);float weightSize=fromSparsity*u26;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u18;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u32*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u26,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u15,uvWeight)*texture2D(u16,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
f:"u18 u26 u15 u16 u23 u32".split(" "),aa:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},H={oa:function(){return n},j:function(){if(!n){p="highp";for(var f in z)e(z[f],f);u.set("s0");a.enableVertexAttribArray(0);f=xa.j();n=!0;return f}},ab:function(f){f.forEach(function(v){H.ua(v)})},ua:function(f){z[f.id]=f;e(f,f.id)},Ia:function(f,v,w){v||(v=f);z[v]=Object.create(F[f]);F[f].aa&&F[f].aa.forEach(function(Q,fa){z[v].c=z[v].c.replace(new RegExp(Q,"g"),w[fa])});e(z[v],v)},set:function(f){g(z[f])},sb:function(f){return"undefined"!==
typeof z[f]},qc:function(){return l.nc},ca:function(){-1!==k&&(k=-1,l.P.forEach(function(f){0!==f&&a.disableVertexAttribArray(f)}))},pa:function(){var f=0;l.P.forEach(function(v,w){w=l.O[w];a.vertexAttribPointer(v,w,a.FLOAT,!1,l.ra,f);f+=4*w})},mc:function(){a.enableVertexAttribArray(0)},qa:function(){a.vertexAttribPointer(l.P[0],2,a.FLOAT,!1,8,0)},Sc:function(f,v){a.uniform1i(l.l[f],v)},C:function(f,v){a.uniform1f(l.l[f],v)},T:function(f,v,w){a.uniform2f(l.l[f],v,w)},Tc:function(f,v){a.uniform2fv(l.l[f],
v)},Uc:function(f,v){a.uniform3fv(l.l[f],v)},Vb:function(f,v,w,Q){a.uniform3f(l.l[f],v,w,Q)},Wa:function(f,v){a.uniform4fv(l.l[f],v)},Vc:function(f,v){a.uniformMatrix2fv(l.l[f],!1,v)},Wc:function(f,v){a.uniformMatrix3fv(l.l[f],!1,v)},Xc:function(f,v){a.uniformMatrix4fv(l.l[f],!1,v)},D:function(f,v){H.set(f);v.forEach(function(w){switch(w.type){case "4f":a.uniform4fv(l.l[w.name],w.value);break;case "3f":a.uniform3fv(l.l[w.name],w.value);break;case "2f":a.uniform2fv(l.l[w.name],w.value);break;case "1f":a.uniform1f(l.l[w.name],
w.value);break;case "1i":a.uniform1i(l.l[w.name],w.value);break;case "mat2":a.uniformMatrix2fv(l.l[w.name],!1,w.value);break;case "mat3":a.uniformMatrix3fv(l.l[w.name],!1,w.value);break;case "mat4":a.uniformMatrix4fv(l.l[w.name],!1,w.value)}})},zc:function(){return"lowp"}};return H}(),a=!1,Aa=function(){function b(h){console.log("ERROR in ContextFeedForward : ",h);return!1}function d(){if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){var h=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);
h=2<h.length?[parseInt(h[1],10),parseInt(h[2],10),parseInt(h[3]||0,10)]:[0,0,0];return 12===h[0]||13===h[0]?!0:!1}return/(Mac)/i.test(navigator.platform)&&((h=navigator.userAgent)?(h=h.match(/Mac OS X (\d+)_(\d+)/)||h.match(/Mac OS X (\d+).(\d+)/),h=!h||3>h.length?!1:[parseInt(h[1],10),parseInt(h[2],10)]):h=!1,h&&10===h[0]&&15===h[1])?!0:!1}var e=!1,g=!1,k=!1,l=!1,m=!0,n=!1,p={s:function(){return e.width},F:function(){return e.height},rc:function(){return e},pc:function(){return a},m:function(){return m},
flush:function(){a.flush()},wb:function(){n||(n=new Uint8Array(e.width*e.height*4));a.readPixels(0,0,e.width,e.height,a.RGBA,a.UNSIGNED_BYTE,n);return n},tc:function(){return e.toDataURL("image/jpeg")},uc:function(){G.B();g||(g=document.createElement("canvas"),k=g.getContext("2d"));g.width=e.width;g.height=e.height;var h=p.wb(),q=k.createImageData(g.width,g.height),r,x,D=g.width,A=g.height,z=q.data;for(x=0;x<A;++x){var F=A-x-1;for(r=0;r<D;++r){var H=4*(x*D+r);var f=4*(F*D+r);z[H]=h[f];z[H+1]=h[f+
1];z[H+2]=h[f+2];z[H+3]=h[f+3]}}k.putImageData(q,0,0);return g.toDataURL("image/png")},sc:function(h){!g&&h&&(g=document.createElement("canvas"),k=g.getContext("2d"));var q=h?g:document.createElement("canvas");q.width=e.width;q.height=e.height;(h?k:q.getContext("2d")).drawImage(e,0,0);return q},j:function(h){h.Ba&&!h.Aa?e=document.getElementById(h.Ba):h.Aa&&(e=h.Aa);e||(e=document.createElement("canvas"));e.width=h&&void 0!==h.width?h.width:512;e.height=h&&void 0!==h.height?h.height:512;"undefined"===
typeof h&&(h={});void 0===h.premultipliedAlpha&&(h.premultipliedAlpha=!1);void 0===h.na&&(h.na=!0);void 0===h.antialias&&(h.antialias=!1);var q={antialias:h.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:h.premultipliedAlpha,stencil:!1,depth:h.na};d()||(a=e.getContext("webgl2",q));a?m=!0:((a=e.getContext("webgl",q))||(a=e.getContext("experimental-webgl",q)),m=!1);if(!a)return b("WebGL is not enabled");(l=a.getExtension("WEBGL_lose_context"))&&e.addEventListener("webglcontextlost",
h.Oc,!1);if(!I.j())return b("Not enough capabilities");if(!I.hb()&&m)return b("Your configuration cannot process color buffer float");a.clearColor(0,0,0,0);a.disable(a.DEPTH_TEST);a.disable(a.BLEND);a.disable(a.DITHER);a.disable(a.STENCIL_TEST);a.disable(a.SCISSOR_TEST);a.GENERATE_MIPMAP_HINT&&a.hint(a.GENERATE_MIPMAP_HINT,a.FASTEST);a.disable(a.SAMPLE_ALPHA_TO_COVERAGE);a.disable(a.SAMPLE_COVERAGE);return!0},Fc:function(){if(!u.j())return!1;a.depthFunc(a.LEQUAL);a.clearDepth(1);return!0}};return p}(),
wa=function(){var b="undefined"===typeof u?JEShaders:u;return{Ub:function(d){b!==d&&(b.ca(),b=d)},oa:function(){return b.oa()},qa:function(){b.qa()},pa:function(){b.pa()},ca:function(){b.ca()},set:function(d){b.set(d)}}}(),L=function(){var b,d,e=0,g=-2,k=-2,l=!1,m={reset:function(){k=g=-2},j:function(){l||(b=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,b),a.bufferData(a.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),a.STATIC_DRAW),d=a.createBuffer(),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,d),a.bufferData(a.ELEMENT_ARRAY_BUFFER,
new Uint16Array([0,1,2]),a.STATIC_DRAW),m.fa(),l=!0)},a:function(n){var p=e++,h=n.J?n.J.length:0,q="undefined"===typeof n.mode?a.STATIC_DRAW:n.mode,r=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,r);a.bufferData(a.ARRAY_BUFFER,n.Za instanceof Float32Array?n.Za:new Float32Array(n.Za),q);g=p;if(n.J){var x=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,x);if(65536>n.J.length){var D=Uint16Array;var A=a.UNSIGNED_SHORT;var z=2}else D=Uint32Array,A=a.UNSIGNED_INT,z=4;a.bufferData(a.ELEMENT_ARRAY_BUFFER,
n.J instanceof D?n.J:new D(n.J),q);k=p}var F={fb:function(H){g!==p&&(a.bindBuffer(a.ARRAY_BUFFER,r),g=p);H&&wa.pa()},cb:function(){k!==p&&(a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,x),k=p)},bind:function(H){F.fb(H);F.cb()},kc:function(){a.drawElements(a.TRIANGLES,h,A,0)},lc:function(H,f){a.drawElements(a.TRIANGLES,H,A,f*z)},remove:function(){a.deleteBuffer(r);n.J&&a.deleteBuffer(x);F=null}};return F},fa:function(){-1!==g&&(a.bindBuffer(a.ARRAY_BUFFER,b),g=-1);-1!==k&&(a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,
d),k=-1)},g:function(n,p){n&&L.fa();p&&wa.qa();a.drawElements(a.TRIANGLES,3,a.UNSIGNED_SHORT,0)},vb:function(){a.deleteBuffer(b);a.deleteBuffer(d)}};return m}(),G=function(){var b,d,e,g=!1,k={o:-2,tb:1};return{j:function(){if(!g){b=a.createFramebuffer();var l=I.m();d=l&&a.DRAW_FRAMEBUFFER?a.DRAW_FRAMEBUFFER:a.FRAMEBUFFER;e=l&&a.READ_FRAMEBUFFER?a.READ_FRAMEBUFFER:a.FRAMEBUFFER;g=!0}},wc:function(){return d},ka:function(){return e},N:function(){return a.FRAMEBUFFER},Ac:function(){return k},oc:function(){return b},
a:function(l){void 0===l.Ka&&(l.Ka=!1);var m=l.Zb?l.Zb:!1,n=l.width,p=void 0!==l.height?l.height:l.width,h=b,q=!1,r=!1,x=0;m&&(n=n?n:m.s(),p=p?p:m.F());var D={Va:function(){r||(h=a.createFramebuffer(),r=!0,x=k.tb++)},$a:function(){D.Va();D.i();q=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,q);a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,n,p);a.framebufferRenderbuffer(d,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,q);a.clearDepth(1)},bind:function(A,z){x!==k.o&&(a.bindFramebuffer(d,h),
k.o=x);m&&m.i();z&&a.viewport(0,0,n,p);A&&a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)},ec:function(){x!==k.o&&(a.bindFramebuffer(d,h),k.o=x)},clear:function(){a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)},hc:function(){a.clear(a.COLOR_BUFFER_BIT)},ic:function(){a.clear(a.DEPTH_BUFFER_BIT)},Wb:function(){a.viewport(0,0,n,p)},i:function(){x!==k.o&&(a.bindFramebuffer(d,h),k.o=x)},rtt:function(A){m=A;k.o!==x&&(a.bindFramebuffer(a.FRAMEBUFFER,h),k.o=x);A.i()},B:function(){a.bindFramebuffer(d,null);
k.o=-1},resize:function(A,z){n=A;p=z;q&&(a.bindRenderbuffer(a.RENDERBUFFER,q),a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,n,p))},remove:function(){a.bindFramebuffer(d,h);a.framebufferTexture2D(d,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,null,0);q&&a.framebufferRenderbuffer(d,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,null);a.bindFramebuffer(d,null);a.deleteFramebuffer(h);q&&a.deleteRenderbuffer(q);D=null}};l.Ka&&D.$a();return D},B:function(){a.bindFramebuffer(d,null);k.o=-1},bc:function(){a.bindFramebuffer(d,
null);a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);a.viewport(0,0,I.s(),I.F());k.o=-1},reset:function(){k.o=-2},I:function(){0!==k.o&&(a.bindFramebuffer(d,b),k.o=0)},clear:function(){a.viewport(0,0,I.s(),I.F());a.clear(a.COLOR_BUFFER_BIT)}}}(),T=function(){function b(c){a.bindTexture(a.TEXTURE_2D,c)}function d(c){fa[0]=c;c=ja[0];var B=c>>16&32768,E=c>>12&2047,C=c>>23&255;return 103>C?B:142<C?B|31744|((255==C?0:1)&&c&8388607):113>C?(E|=2048,B|(E>>114-C)+(E>>113-C&1)):B=(B|C-112<<10|E>>1)+(E&1)}function e(c){var B=
new Uint16Array(c.length);c.forEach(function(E,C){B[C]=d(E)});return B}function g(){if(null!==X.la)return X.la;var c=l(e([1,1,1,1]));return null===c?!0:X.la=c}function k(){if(null!==X.ma)return X.ma;var c=l(new Uint8Array([255,255,255,255]));return null===c?!0:X.ma=c}function l(c){if(!wa.oa()||!A)return null;try{var B=a.getError(),E=N.a({isFloat:!1,A:!0,array:c,width:1});B=a.getError();if(B!==a.NO_ERROR)return!1}catch(C){return!1}G.B();a.viewport(0,0,1,1);a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT);
wa.set("s0");E.va(0);L.g(!1,!0);c=new Uint8Array(4);a.readPixels(0,0,1,1,a.RGBA,a.UNSIGNED_BYTE,c);c=.9<c[0];E.remove();G.I();return c}var m=0,n,p=0,h,q=!1,r,x,D,A=!1,z=!1,F,H,f,v=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],w=!1,Q=!1,fa=new Float32Array(1),ja=new Int32Array(fa.buffer),X={la:null,ma:null},N={j:function(){if(!A){x=[a.RGB,!1,a.RGB,a.RGBA];D=[a.RGB,!1,a.RGB,a.RGBA];n=[a.TEXTURE0,a.TEXTURE1,a.TEXTURE2,a.TEXTURE3,a.TEXTURE4,a.TEXTURE5,a.TEXTURE6,a.TEXTURE7];w="undefined"!==typeof JEContext;
Q="undefined"!==typeof I;w&&JEContext.Mc()&&n.push(a.TEXTURE8,a.TEXTURE9);h=[-1,-1,-1,-1,-1,-1,-1,-1];r=[a.UNSIGNED_BYTE,a.FLOAT,a.FLOAT];if(!q){for(var c=new Float32Array(16384),B=0;16384>B;++B)c[B]=2*Math.random()-1;q={random:N.a({isFloat:!0,isPot:!0,array:c,width:64}),Ya:N.a({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}A=!0}},Bb:function(){N.cc()},Dc:function(){return q.Ya},cc:function(){r[1]=I.X()},Ob:function(){D=x=[a.RGBA,a.RGBA,a.RGBA,a.RGBA]},Pc:function(c,B){u.set("s1");
G.B();var E=c.s(),C=c.F();a.viewport(0,0,E,C);c.b(0);L.g(!1,!1);a.readPixels(0,0,E,C,a.RGBA,a.UNSIGNED_BYTE,B)},ub:function(c,B,E){a.activeTexture(a.TEXTURE0);m=0;var C=a.createTexture();b(C);var R=I.m()&&a.RGBA32F?a.RGBA32F:a.FLOAT;B=B instanceof Float32Array?B:new Float32Array(B);var O=Math.log2(B.length);O!==Math.floor(O)&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE));a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,
a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,E);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,c.s(),c.F(),0,a.RGBA,R,B);b(null);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1);G.I();u.set("s0");c.w();a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT);b(C);L.g(!0,!1);a.deleteTexture(C)},a:function(c){function B(){b(U);ka&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,ka);c.isPot?(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,c.Ma?a.MIRRORED_REPEAT:a.REPEAT),a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_WRAP_T,c.K?a.MIRRORED_REPEAT:a.REPEAT)):(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE));c.Z&&"undefined"!==typeof JESETTINGS&&a.texParameterf(a.TEXTURE_2D,JEContext.vc().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.dc);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,c.isLinear?a.LINEAR:a.NEAREST);c.isLinear?a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,c.isMipmap&&!ra?a.NEAREST_MIPMAP_LINEAR:a.LINEAR):a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_MIN_FILTER,c.isMipmap&&!ra?a.NEAREST_MIPMAP_NEAREST:a.NEAREST);Y=x[c.S-1];ba=D[c.S-1];ca=r[E];if(I.m()){var t=a.RGBA32F;Y===a.RGBA&&ca===a.FLOAT&&t&&(ba=t);Y===a.RGB&&ca===a.FLOAT&&t&&(ba=t,Y=a.RGBA)}if(c.A&&!c.isFloat||c.isFloat&&c.isMipmap&&xa.Eb())(t=a.RGBA16F)&&(ba=t),ca=I.X();c.Oa&&"undefined"!==typeof a.texStorage2D&&(ya=c.Oa);c.Na&&4===c.S&&(Y=JEContext.Bc());if(c.u)a.texImage2D(a.TEXTURE_2D,0,ba,Y,ca,c.u);else if(c.url)a.texImage2D(a.TEXTURE_2D,0,ba,Y,ca,ia);else if(S){try{a.getError(),
a.texImage2D(a.TEXTURE_2D,0,ba,J,y,0,Y,ca,S),a.getError()!==a.NO_ERROR&&(a.texImage2D(a.TEXTURE_2D,0,ba,J,y,0,Y,ca,null),a.getError()!==a.NO_ERROR&&a.texImage2D(a.TEXTURE_2D,0,a.RGBA,J,y,0,a.RGBA,a.UNSIGNED_BYTE,null))}catch(da){a.texImage2D(a.TEXTURE_2D,0,ba,J,y,0,Y,ca,null)}c.isKeepArray||(S=null)}else a.texImage2D(a.TEXTURE_2D,0,ba,J,y,0,Y,ca,null);if(c.isMipmap)if(!ra&&P)P.ja(),za=!0;else if(ra){t=Math.log(Math.min(J,y))/Math.log(2);var K;ta=Array(1+t);ta[0]=U;for(K=1;K<=t;++K){var ea=Math.pow(2,
K);var oa=J/ea;ea=y/ea;var Z=a.createTexture();b(Z);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texImage2D(a.TEXTURE_2D,0,ba,oa,ea,0,Y,ca,null);b(null);ta[K]=Z}za=!0}b(null);h[m]=-1;ka&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1);M=!0;V&&P&&(V(P),V=!1)}"undefined"===typeof c.isFloat&&(c.isFloat=!1);"undefined"===typeof c.A&&(c.A=!1);"undefined"===typeof c.isPot&&(c.isPot=!0);"undefined"===typeof c.isLinear&&(c.isLinear=!1);
"undefined"===typeof c.isMipmap&&(c.isMipmap=!1);"undefined"===typeof c.ga_&&(c.ga_=!1);void 0===c.Z&&(c.Z=!1);void 0===c.K&&(c.K=!1);void 0===c.Ma&&(c.Ma=!1);void 0===c.Na&&(c.Na=!1);void 0===c.S&&(c.S=4);void 0===c.La&&(c.La=!1);"undefined"===typeof c.isFlipY&&(c.isFlipY=c.url||c.array?!0:!1);"undefined"===typeof c.isKeepArray&&(c.isKeepArray=!1);c.data&&(c.array="string"===typeof c.data?ua(c.data):c.isFloat?new Float32Array(c.data):new Uint8Array(c.data),c.isFlipY=!1);var E=0,C=c.u?!0:!1,R=null,
O=null,W=!1,ha=null;c.isFloat&&(c.A=!0);c.A&&(E=1);c.La||I.m()||!c.isFloat||!Q||I.ya()||(c.isFloat=!1);c.isFloat&&(E=2);c.Z&&w&&!JEContext.Hc()&&(c.Z=!1);var U=a.createTexture(),V=c.ga_,ia=null,S=!1,J=0,y=0,M=!1,aa=p++,la=!1,ma,pa,Ca,va,ba,Y,ca,ka=c.isFlipY,ra=c.A&&c.isMipmap&&"undefined"!==typeof xa&&!xa.jb()?!0:!1,ta,ya=-1,za=!1;"undefined"!==typeof c.width&&c.width&&(J=c.width,y="undefined"!==typeof c.height&&c.height?c.height:J);var P={get:function(){return U},s:function(){return J},F:function(){return y},
Ec:function(){return c.url},Ic:function(){return c.isFloat},Kc:function(){return c.A},Lc:function(){return c.isLinear},ja:function(){a.generateMipmap(a.TEXTURE_2D)},wa:function(t,K){ra?(t||(t=P.Fa()),P.ea(K),b(ta[t]),h[K]=-1):P.b(K)},Fa:function(){-1===ya&&(ya=Math.log(J)/Math.log(2));return ya},Ea:function(t){if(ra){t||(t=P.Fa());u.set("s11");P.ea(0);var K,ea=J,oa=y;for(K=1;K<=t;++K)ea/=2,oa/=2,u.T("u7",.25/ea,.25/oa),a.viewport(0,0,ea,oa),b(ta[K-1]),a.framebufferTexture2D(G.N(),a.COLOR_ATTACHMENT0,
a.TEXTURE_2D,ta[K],0),L.g(!1,1===K);h[0]=-1}else P.ja()},ea:function(t){t!==m&&(a.activeTexture(n[t]),m=t)},b:function(t){if(!M)return!1;P.ea(t);if(h[t]===aa)return!1;b(U);h[t]=aa;return!0},va:function(t){a.activeTexture(n[t]);m=t;b(U);h[t]=aa},i:function(){a.framebufferTexture2D(G.N(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,U,0)},w:function(){a.viewport(0,0,J,y);a.framebufferTexture2D(G.N(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,U,0)},$c:function(){a.framebufferTexture2D(G.N(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,
null,0)},resize:function(t,K){J=t;y=K;B()},clone:function(t){t=N.a({width:J,height:y,A:c.A,isFloat:c.isFloat,isLinear:c.isLinear,K:c.K,isFlipY:t?!ka:ka,isPot:c.isPot});wa.set("s0");G.I();t.i();a.viewport(0,0,J,y);P.b(0);L.g(!0,!0);return t},Wb:function(){a.viewport(0,0,J,y)},remove:function(){a.deleteTexture(U);P=null},refresh:function(){P.va(0);ka&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!0);C?a.texImage2D(a.TEXTURE_2D,0,ba,Y,a.UNSIGNED_BYTE,c.u):a.texImage2D(a.TEXTURE_2D,0,ba,J,y,0,Y,ca,S);ka&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,
!1)},za:function(){var t=J*y*4;pa=[new Uint8Array(t),new Uint8Array(t),new Uint8Array(t),new Uint8Array(t)];ma=[new Float32Array(pa[0].buffer),new Float32Array(pa[1].buffer),new Float32Array(pa[2].buffer),new Float32Array(pa[3].buffer)];Ca=new Uint8Array(4*t);va=new Float32Array(Ca.buffer);la=!0},Ta:function(){la||P.za();a.readPixels(0,0,J,4*y,a.RGBA,a.UNSIGNED_BYTE,Ca);var t,K=J*y,ea=2*K,oa=3*K;for(t=0;t<K;++t)ma[0][t]=va[t],ma[1][t]=va[t+K],ma[2][t]=va[t+ea],ma[3][t]=va[t+oa];return ma},Ca:function(){G.B();
u.set("s12");P.b(0);for(var t=0;4>t;++t)a.viewport(0,y*t,J,y),u.Wa("u8",v[t]),L.g(!1,0===t)},ad:function(t){var K=ca===r[0]&&!k();b(U);ka&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,ka);K?(W||(R=document.createElement("canvas"),R.width=J,R.height=y,O=R.getContext("2d"),ha=O.createImageData(J,y),W=!0),ha.data.set(t),O.putImageData(ha,0,0),a.texImage2D(a.TEXTURE_2D,0,ba,Y,ca,R)):a.texImage2D(a.TEXTURE_2D,0,ba,J,y,0,Y,ca,t);h[m]=aa;ka&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1)},bd:function(t,K){b(U);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,
K);a.texImage2D(a.TEXTURE_2D,0,ba,Y,ca,t);h[m]=aa;K&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1)},Rc:function(t,K){var ea=J*y,oa=4*ea;t=c.A?t?"RGBE":"JSON":"RGBA";K&&(t=K);K=I.m()&&!1;switch(t){case "RGBE":var Z="s41";break;case "JSON":Z=K?"s0":"s12";break;case "RGBA":case "RGBAARRAY":Z="s6"}la||("RGBA"===t||"RGBE"===t||"RGBAARRAY"===t?(pa=new Uint8Array(oa),la=!0):"JSON"!==t||K||P.za());G.B();u.set(Z);P.b(0);if("RGBA"===t||"RGBE"===t||"RGBAARRAY"===t){a.viewport(0,0,J,y);L.g(!0,!0);a.readPixels(0,0,
J,y,a.RGBA,a.UNSIGNED_BYTE,pa);if("RGBAARRAY"===t)return{data:pa};z||(F=document.createElement("canvas"),H=F.getContext("2d"),z=!0);F.width=J;F.height=y;f=H.createImageData(J,y);f.data.set(pa);H.putImageData(f,0,0);var da=F.toDataURL("image/png")}else if("JSON"===t)if(K)da=new Float32Array(ea),a.viewport(0,0,J,y),L.g(!0,!0),a.readPixels(0,0,J,y,a.RGBA,a.FLOAT,da);else{for(da=0;4>da;++da)a.viewport(0,y*da,J,y),u.Wa("u8",v[da]),L.g(!da,!da);P.Ta();da=Array(ea);for(Z=0;Z<ea;++Z)da[4*Z]=ma[0][Z],da[4*
Z+1]=ma[1][Z],da[4*Z+2]=ma[2][Z],da[4*Z+3]=ma[3][Z]}return{format:t,data:da,width:J,height:y,isMirrorY:c.K,isFlipY:"RGBA"===t?c.isFlipY:!c.isFlipY}}};c.isMipmap&&!ra&&M&&!za&&(P.ja(),za=!0);if(c.url)b(U),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,null),ia=new Image,ia.jc="Anonymous",ia.crossOrigin="Anonymous",ia.src=c.url,ia.onload=function(){J=ia.width;y=ia.height;B()};else if(c.u){var Ga=function(){J=void 0!==c.u.videoWidth?c.u.videoWidth:c.u.width;y=void 0!==c.u.videoHeight?
c.u.videoHeight:c.u.height;J?B():setTimeout(Ga,1)};Ga()}else c.array?(c.A&&!c.isFloat?c.array instanceof Uint16Array?(S=c.array,B()):g()?(S=e(c.array),B()):(B(),N.ub(P,c.array,ka)):(S=c.isFloat?c.array instanceof Float32Array?c.array:new Float32Array(c.array):c.array instanceof Uint8Array?c.array:new Uint8Array(c.array),B()),c.isKeepArray||(S&&S!==c.array&&(S=null),delete c.array)):B();P.zb=P.s;V&&M&&(V(P),V=!1);return P},B:function(c){c!==m&&(a.activeTexture(n[c]),m=c);h[c]=-1;b(null)},fc:function(c){q.random.b(c)},
reset:function(){for(var c=0;c<n.length;++c)h[c]=-1;m=-1},Qc:function(){m=-1},Yc:function(){for(var c=0;c<n.length;++c)N.B(c)},vb:function(){q&&(q.random.remove(),q.Ya.remove())},Zc:function(c,B){if("RGBA"===c.format||"RGBE"===c.format){var E=new Image;E.src=c.data;E.onload=function(){N.a({K:c.isMirrorY,isFlipY:c.isFlipY,isFloat:!1,u:E,ga_:function(C){if("RGBA"===c.format)B(C);else{var R=c.width,O=c.height,W=N.a({K:c.isMirrorY,isFloat:!0,width:R,height:O,isFlipY:c.isFlipY});G.I();a.viewport(0,0,R,
O);u.set("s42");W.i();C.b(0);L.g(!0,!0);N.B(0);B(W);a.flush();setTimeout(C.remove,50)}}})}}else"JSON"===c.format?B(N.a({isFloat:!0,isFlipY:c.isFlipY,width:c.width,height:c.height,array:new Float32Array(c.data)})):B(!1)}};return N}(),Ba={a:function(b){var d=[T.a(b),T.a(b)],e=[d[1],d[0]],g=e,k={Rb:function(l){g[1].i();g[0].b(l);k.Xa()},Sb:function(l){g[1].w();g[0].b(l);k.Xa()},Xa:function(){g=g===d?e:d},refresh:function(){g[0].refresh();g[1].refresh()},b:function(l){g[0].b(l)},xc:function(){return g[0]}};
return k}},I=function(){function b(){d="undefined"===typeof Aa?JEContext:Aa;e=!0}var d=null,e=!1,g=!1,k=!1,l=!1,m=!1,n=!1,p=!1,h=!1,q=!1,r=!1,x=!1,D=!0,A=!0,z=!0,F=null,H="undefined"===typeof window?{}:window,f={j:function(){if(e)return!0;b();f.Da();f.ia();f.qb();f.rb();G.j();T.j();if(!f.mb())return!1;L.j();T.Bb();return!0},s:function(){e||b();return d.s()},F:function(){e||b();return d.F()},m:function(){e||b();return d.m()},qb:function(){x=(r=a.getExtension("EXT_color_buffer_float")||a.getExtension("WEBGL_color_buffer_float")||
a.getExtension("OES_color_buffer_float"))?!0:!1;H.GL_EXT_COLORBUFFERFLOAT=r},rb:function(){a.getExtension("EXT_color_buffer_half_float")||a.getExtension("WEBGL_color_buffer_half_float")||a.getExtension("OES_color_buffer_half_float")},Da:function(){if(!g){this.m()||(k=a.getExtension("OES_texture_float")||a.getExtension("MOZ_OES_texture_float")||a.getExtension("WEBKIT_OES_texture_float"),m=(H.GL_EXT_FLOAT=k)?!0:!1);if(m||this.m())l=a.getExtension("OES_texture_float_linear")||a.getExtension("MOZ_OES_texture_float_linear")||
a.getExtension("WEBKIT_OES_texture_float_linear"),H.GL_EXT_FLOATLINEAR=l;g=!0}},ia:function(){if(!q){if(!this.m()){if(n=a.getExtension("OES_texture_half_float")||a.getExtension("MOZ_OES_texture_half_float")||a.getExtension("WEBKIT_OES_texture_half_float"))F=n.HALF_FLOAT_OES,p=!0;!F&&a.HALF_FLOAT&&(F=a.HALF_FLOAT);!F&&a.FLOAT&&(F=a.FLOAT);H.GL_EXT_HALFFLOAT=n}if(p||this.m())h=a.getExtension("OES_texture_half_float_linear")||a.getExtension("MOZ_OES_texture_half_float_linear")||a.getExtension("WEBKIT_OES_texture_half_float_linear"),
H.GL_EXT_HALFFLOATLINEAR=h;q=!0}},X:function(){if(f.m())return a.HALF_FLOAT;f.ia();return p?F:a.FLOAT},ya:function(){return D},ib:function(){return A},gc:function(){return z},hb:function(){return x},ob:function(){A=D=!0;var v=a.createFramebuffer();a.bindFramebuffer(a.FRAMEBUFFER,v);var w=a.createTexture();a.bindTexture(a.TEXTURE_2D,w);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texImage2D(a.TEXTURE_2D,0,f.m()&&a.RGBA32F?
a.RGBA32F:a.RGBA,1,1,0,a.RGBA,a.FLOAT,null);a.framebufferTexture2D(G.N(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,w,0);var Q=a.checkFramebufferStatus(G.ka());Q!==a.FRAMEBUFFER_COMPLETE&&(D=!1);a.texImage2D(a.TEXTURE_2D,0,f.m()&&a.RGBA16F?a.RGBA16F:a.RGBA,1,1,0,a.RGBA,f.X(),null);a.framebufferTexture2D(G.N(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,w,0);Q=a.checkFramebufferStatus(G.ka());Q!==a.FRAMEBUFFER_COMPLETE&&(A=!1);a.bindTexture(a.TEXTURE_2D,null);a.bindFramebuffer(a.FRAMEBUFFER,null);a.deleteTexture(w);a.deleteFramebuffer(v)},
nb:function(){var v=G.a({width:1});v.Va();var w=T.a({width:1,isFloat:!0,S:3});v.i();w.i();a.flush();a.checkFramebufferStatus(G.ka())!==a.FRAMEBUFFER_COMPLETE?(T.Ob(),z=!1):z=!0;v.remove();w.remove()},mb:function(){f.ob();if(!D&&!A)return!1;f.nb();return!0}};return f}(),xa=function(){function b(A,z,F,H){a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,H?a.NEAREST_MIPMAP_NEAREST:a.LINEAR);try{var f=a.getError();f!==a.NO_ERROR&&console.log("GLERR in test_mipmapping() :",f);a.texImage2D(a.TEXTURE_2D,
0,A,2,2,0,a.RGBA,z,F);f=a.getError();if(f!==a.NO_ERROR)return!1}catch(v){return!1}H&&a.generateMipmap(a.TEXTURE_2D);L.fa();L.g(!1,!0);a.readPixels(0,0,1,1,a.RGBA,a.UNSIGNED_BYTE,n);f=a.getError();f===a.INVALID_OPERATION&&"undefined"!==typeof a.PIXEL_PACK_BUFFER&&(a.bindBuffer(a.PIXEL_PACK_BUFFER,null),a.readPixels(0,0,1,1,a.RGBA,a.UNSIGNED_BYTE,n),f=a.getError());return f!==a.NO_ERROR?!1:0!==n[0]}function d(A){return I.ya()&&b(r,a.FLOAT,new Float32Array(h),A)?(l=k.ta,!0):!1}function e(A){return I.ib()?
b(x,I.X(),new Uint16Array(h),A)||b(x,a.FLOAT,new Float32Array(h),A)?(l=k.da,!0):!1:!1}var g=!1,k={ta:3,da:2,RGBA8:0},l=k.RGBA8,m,n=new Uint8Array(4),p=[.8,1,.8,1],h=p.concat(p,p,p),q=!0,r,x,D={j:function(){I.Da();I.ia();x=r=a.RGBA;if(Aa.m()){var A=a.RGBA32F;A&&(r=A);(A=a.RGBA16F)&&(x=A)}L.j();G.reset();G.B();a.viewport(0,0,1,1);u.set("s0");g=!0;m=a.createTexture();a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,m);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT);a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_WRAP_T,a.REPEAT);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);if(e(!0)||d(!0))return!0;q=!1;if(e(!1)||d(!1))return!0;if(Aa.m()){x=r=a.RGBA;if(e(!0)||d(!0))return!0;q=!1;if(e(!1)||d(!1))return!0}return!1},jb:function(){return q},yc:function(){return l},Jc:function(){g||D.j();return l===k.ta},Eb:function(){g||D.j();return l===k.da}};return D}(),Da={a:function(b){var d=T.a(b.alpha),e=T.a(b.beta);return{pb:function(){d.b(1);e.b(2)}}}},Ha={a:function(b){var d=b.Yb;d.index=b.index;
d.L=b.L;d.parent=b.parent;switch(d.type){case "input":b=Ea.a(d);break;default:b=Fa.a(d)}return b}},Ea={a:function(b){var d=null,e=!1,g=!1,k=!1,l=!1,m=null,n="undefined"===typeof b.preprocessing?!1:b.preprocessing,p="undefined"===typeof b.preprocessingSize?b.size:b.preprocessingSize;b.mask&&(e=!0,Ia&&void 0!==Ia.bb&&(b.mask=Ia.bb+b.mask),d=T.a({isFloat:!1,url:b.mask}));var h=!1;b.customInputShader&&(h="s43",u.ua({name:"_",id:h,c:b.customInputShader,f:["uSource"],precision:"lowp"}),u.D(h,[{type:"1i",
name:"_",value:0}]));switch(n){case "sobel":m="s32";k=!0;break;case "meanNormalization":m="s33";k=!0;break;case "grayScale":m="s29";k=!1;break;case "grayScaleTilt":m="s30";l=!0;k=!1;break;case "rgbGrayTilt":m="s31";l=!0;k=!1;break;case "copy":m=h?h:"s0";break;case "inputLightRegulation":m=h?h:"s29";Ja.j({Ja:p,Ra:b.size,Pa:b.nBlurPass,Db:!1});g=!0;break;case "direct":case "none":m=!1;break;default:m="s3"}l&&u.D(m,[{name:"u28",type:"1f",value:b.tilt}]);e&&(m+="Mask");var q=T.a({isFloat:!1,isPot:!1,
width:b.size}),r={s:function(){return p},Y:function(){return r.s()},yb:function(){return g?Ja.Ha():q},v:function(){G.I();m&&(u.set(m),k&&u.C("u29",1/b.size),q.w(),e&&d.b(1),L.g(!1,!1),q.b(0),g&&Ja.Kb(q))}};return r}},Fa={a:function(b){"undefined"===typeof b.disableNormalize&&(b.disableNormalize=!1);var d=[],e=[],g,k,l=!1,m,n=!0,p,h,q=b.isReorganize?b.isReorganize:!1,r=b.kernelsNumber?!0:!1,x=b.dynPelu?Da.a(b.dynPelu):!1,D=x?!0:!1,A={isEnabled:!1},z;if("softmax"===b.type){b.activation="softmax";b.size=
Math.pow(2,Math.ceil(Math.log2(Math.sqrt(b.num_classes))));b.sparsity="undefined"!==typeof b.sparsity?b.sparsity:b.L.Y();b.gain="undefined"!==typeof b.gain?b.gain:1;u.D("s20",[{type:"1f",name:"u10",value:b.gain}]);var F=T.a({isFloat:!0,isPot:!1,width:b.size}),H=T.a({isFloat:!0,isPot:!1,width:b.size,isMipmap:!0});n=!1;var f=new Uint8Array(Math.pow(4*b.size,2)),v;for(v=0;v<b.size*b.size;++v){var w=v<b.num_classes?255:0;f[4*v]=w;f[4*v+1]=w;f[4*v+2]=w;f[4*v+3]=w}var Q=T.a({isFloat:!1,isPot:!1,width:b.size,
array:f})}else b.cost?(b.sparsity="undefined"!==typeof b.sparsity?b.sparsity:b.L.Y(),n=!1):"full"===b.connectivityUp&&(b.sparsity=b.L.Y());var fa={elu:"s15",elu01:"s16",relu:"s14",arctan:"s18",sigmoid:"s13",copy:"s0",softplus:"s19",softmax:"s20",dynPelu:"s17"}[b.activation],ja=b.sparsity*b.sparsity,X=!1,N=b.size;if(b.maxPooling){switch(b.maxPooling.size){case 2:var c="s34";break;case 4:c="s35"}X=!0;N/=b.maxPooling.size;var B=T.a({isFloat:!0,isPot:!1,width:N})}var E=void 0!==b.Ib&&b.Ib?!0:!1,C=null,
R=null,O=null;E&&(C="s44"+b.index.toString(),u.Ia("s44",C,[((b.normalization.n-1)/2).toFixed(1)]),u.D(C,[{type:"1i",name:"u1",value:0},{type:"2f",name:"u7",value:[1/b.size,1/b.size]},{type:"1f",name:"u6",value:b.normalization.alpha},{type:"1f",name:"u9",value:b.normalization.beta},{type:"1f",name:"u33",value:b.normalization.k}]),R=T.a({isFloat:!0,isPot:!0,width:b.size}),O=T.a({isFloat:!0,isPot:!0,width:b.size}));var W,ha,U,V;n&&(V=T.a({isFloat:!0,isPot:!1,width:b.size}));var ia=T.a(b.bias),S,J={s:function(){return b.size},
Y:function(){return N},Ga:function(){return b.num_classes},eb:function(y){z.b(y)},Lb:function(){b.remap&&b.remap.isEnabled&&(A={isEnabled:!0,Gb:T.a({isFloat:!1,isFlipY:!1,array:new Uint8Array(b.remap.maskTexture.data),width:b.remap.maskTexture.width,isPot:!1}),layers:b.remap.layers.map(function(y){return b.parent.xb(y)}),depth:b.remap.depth})},Qb:function(){switch(b.connectivityUp){case "gaussian":S=Ka.a(b.connectivity);break;case "direct":S=La.a(b.connectivity);break;case "square":S=Ma.a(b.connectivity);
break;case "squareFast":S=Na.a(b.connectivity,b.activation);break;case "full":S=Oa.a(b.connectivity);break;case "conv":h=b.kernelsNumber,S=Pa.a(b.connectivity),q&&(p=T.a({width:N,isFloat:!0,isFlipY:!1,isPot:!1}))}if(S.M){var y=b.size*b.sparsity;ha=Math.log(y/b.size)/Math.log(2);W=T.a({isMipmap:!0,isFloat:!0,isPot:!0,width:y,Oa:ha});U=T.a({isFloat:!0,isPot:!0,width:b.size})}},v:function(y,M){z=y;S.M?(W.w(),r&&ia.b(2),S.v(A),W.b(0),W.Ea(ha),U.w(),r?u.set("s0"):(u.set("s28"),u.C("u27",ja),ia.b(1)),W.wa(ha,
0),L.g(!1,!1),u.set(fa),E?R.i():V.i(),U.b(0),D&&x.pb(),L.g(!1,!1)):(V.w(),ia.b(1),S.v());E&&(u.set(C),O.i(),R.b(0),L.g(!1,!1),u.set("s45"),u.C("u6",1),V.i(),O.b(1),L.g(!1,!1));if(n)return X?(B.w(),V.b(0),u.set(c),u.T("u7",1/b.size,1/b.size),L.g(!1,!1),M=B):M=V,M.b(0),q&&(p.i(),u.set("s22"),u.T("u14",h,N/h),L.g(!1,!1),M=p,p.b(0)),M;if("softmax"===b.type){u.set("s20");V.b(0);F.i();L.g(!1,!1);b.disableNormalize?y=F:(u.set("s2"),F.b(0),Q.b(1),H.i(),L.g(!1,!1),u.set("s0"),k.w(),H.b(0),H.Ea(!1),L.g(!1,
!1),u.set("s21"),g.w(),H.wa(!1,0),u.C("u12",V.zb()),k.b(1),L.g(!1,!1),y=g);if(M){switch(l){case "cpuRGBAAvg":break;default:var aa=J.Sa(y)}return aa}return!1}if(b.cost){u.set("gpuRawAvg"===l?"s8":"s7");M=V;b.disableNormalize||(u.C("u4",1/b.size),g.w(),V.b(0),L.g(!1,!1),M=g);switch(l){case "cpuRGBA2Float":M.Ca();aa=J.Sa(M);m(aa);break;case "gpuRawAvg":case "gpuRaw":M.b(0),m(M)}return!1}},lb:function(y){y&&"undefined"!==typeof y.Qa&&(l=y.Qa,m=y.Jb);V=T.a({isFloat:!0,isPot:!0,isMipmap:"softmax"===b.type,
width:b.size});"softmax"===b.type&&(k=T.a({isFloat:!0,isPot:!0,width:1}));var M=0,aa=0,la="undefined"!==typeof b.num_classes&&b.num_classes?b.num_classes:b.size*b.size;for(y=0;y<la;++y)d.push(M+(b.size-1-aa)*b.size),e.push([-1,-1,-1,-1]),++M,M===b.size&&(M=0,++aa);b.disableNormalize||(g=T.a({isFloat:!0,isPot:!0,width:b.size}))},Sa:function(y){y.Ca();var M=y.Ta();d.forEach(function(aa,la){e[la][0]=M[0][aa];e[la][1]=M[1][aa];e[la][2]=M[2][aa];e[la][3]=M[3][aa]});return e}};b.L&&J.Qb(b.L);return J}};
function Qa(){var b,d,e;b||(b={});this.xb=function(g){return d[g]};this.Nb=function(g){var k=!1;d=g.map(function(l,m){return k=l=Ha.a({index:m,parent:this,Yb:l,L:k})});e=d[d.length-1];d.forEach(function(l,m){0!==m&&l.Lb()})};this.v=function(g,k){var l=k;d.forEach(function(m){l=m.v(l,g)});return l};this.Ha=function(){return e.yb()};this.Pb=function(g){e.lb(g)};this.Ga=function(){return e.Ga()}}
var La={a:function(b){var d=T.a(b.weights);delete b.weights.data;return{M:!0,R:function(){return 1},Ab:function(){return d},v:function(){u.set("s27");d.b(1);L.g(!1,!1)}}}},Oa={a:function(b){var d=b.fromLayerSize,e=T.a(b.weights);return{M:!0,R:function(){return d},v:function(g){if(g.isEnabled){u.set("s25");g.Gb.b(3);var k,l=Math.min(g.layers.length,g.depth);for(k=0;k<l;++k)g.layers[k].eb(4+k)}else u.set("s24");u.C("u18",b.toLayerSize);e.b(1);L.g(!1,!1)}}}},Ka={a:function(b){var d=b.toSparsity*b.toLayerSize,
e=d/b.fromLayerSize,g=T.a(b.weights);T.a({width:d,isFloat:!0,array:new Float32Array(b.fromBindings),isPot:!0});var k=T.a({width:d,isFloat:!0,array:new Float32Array(b.toBindings),isPot:!0});return{M:!0,R:function(){return e},v:function(){u.set("s23");g.b(1);k.b(2);L.g(!1,!0)}}}},Ma={a:function(b){var d=b.fromLayerSize,e=b.toLayerSize,g=b.toSparsity,k=g*e,l=k/d,m=d/e,n,p,h,q,r=0,x=0,D=0,A=Array(g*e*g*e*4),z=Array(g*e*g*e*4),F=Array(d*d);for(n=0;n<F.length;++n)F[n]=0;var H=Math.floor(g/2),f=.5/e,v=.5/
d,w=.5/k;for(n=0;n<e;++n)for(p=0;p<e;++p){var Q=Math.round(n*m);var fa=Math.round(p*m);var ja=n/e;var X=p/e;ja+=f;X+=f;for(h=0;h<g;++h)for(q=0;q<g;++q){var N=r/k;var c=x/k;var B=Q+h-H;var E=fa+q-H;0>B&&(B+=d);0>E&&(E+=d);B>=d&&(B-=d);E>=d&&(E-=d);var C=B/d;var R=E/d;c=1-c-1/k;C+=v;R+=v;N+=w;c+=w;var O=n*g+h,W=p*g+q;W=e*g-W-1;O=W*e*g+O;A[4*O]=N;A[4*O+1]=c;A[4*O+2]=C;A[4*O+3]=R;C=F[E*d+B]++;R=C%l;B=B*l+R;E=E*l+(C-R)/l;E=d*l-1-E;E=E*d*l+B;z[4*E]=N;z[4*E+1]=c;z[4*E+2]=ja;z[4*E+3]=X;++r>=k&&(r=0,++x);
++D}}var ha=T.a(b.weights);T.a({width:k,isFloat:!0,array:new Float32Array(z),isPot:!0});z=null;var U=T.a({width:k,isFloat:!0,array:new Float32Array(A),isPot:!0});A=null;return{M:!0,R:function(){return l},v:function(){u.set("s23");ha.b(1);U.b(2);L.g(!1,!1)}}}},Pa={a:function(b){var d=b.kernelsNumber,e=b.toSparsity,g=e*b.toLayerSize/b.fromLayerSize,k=T.a(b.weights);return{M:!0,R:function(){return g},Cc:function(){return e},Ab:function(){return k},v:function(){u.set("s26");u.C("u24",d);u.C("u25",e);
u.C("u18",b.toLayerSize);u.C("u26",b.fromLayerSize);k.b(1);L.g(!1,!1)}}}},Na={a:function(b,d){var e=b.fromLayerSize,g=b.toLayerSize,k=b.toSparsity,l=b.stride?b.stride:1,m=k*g/e,n=g<e,p=e/g,h=T.a(b.weights),q="s46"+[e.toString(),g.toString(),k.toString(),l.toString(),d].join("_");u.sb(q)||(b=qa(d),g=[{type:"1f",name:"u18",value:g},{type:"1f",name:"u32",value:l}],n&&g.push({type:"1f",name:"u26",value:e}),e=[(n?m:k).toFixed(1),b],n&&e.push(p.toFixed(1)),u.Ia(n?"s40":"s39",q,e),u.D(q,g.concat([{type:"1i",
name:"u16",value:0},{type:"1i",name:"u23",value:1},{type:"1i",name:"u15",value:3}])));return{M:!1,R:function(){return m},v:function(){u.set(q);h.b(3);L.g(!1,!1)}}}},Ja=function(){var b=-1,d=-1,e=-1,g=-1,k=!1,l=null,m=null,n=null,p=null,h=null;return{j:function(q){b=q.Pa?q.Pa:3;d=q.Ja?q.Ja:64;e=q.Ra?q.Ra:64;k=q.Db?!0:!1;q={isFloat:!1,width:d,isPot:!1,isFlipY:!1};l=T.a(q);m=T.a(q);n=T.a(q);p=T.a(q);h=T.a({isFloat:!0,width:e,isPot:!1,isFlipY:!1});g=1/d},Kb:function(q){u.set("s36");p.i();L.g(k,!1);u.set("s37");
for(var r=0;r<b;++r)l.i(),u.T("u7",g,0),L.g(k,!1),n.i(),p.b(0),L.g(k,!1),m.i(),l.b(0),u.T("u7",0,g),L.g(k,!1),p.i(),n.b(0),L.g(k,!1),r!==b-1&&m.b(0);u.set("s38");h.i();q.b(0);m.b(1);p.b(2);L.g(k,!1);h.b(0)},Ha:function(){return h}}}();function Ra(b,d){b[d]=!0;b.setAttribute(d,"true")}function Sa(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}
function Ta(){var b=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return 2<b.length?[parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3]||0,10)]:[0,0,0]}function Ua(){var b=navigator.userAgent.toLowerCase();return-1!==b.indexOf("safari")&&-1===b.indexOf("chrome")?!0:!1}function Va(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1}
function Wa(b){if(!b)return b;var d=!1;if(b.video){var e=function(g){var k={};"undefined"!==typeof g.min&&(k.min=g.min);"undefined"!==typeof g.max&&(k.max=g.max);"undefined"!==typeof g.ideal&&(k.ideal=g.ideal);return k};d={};"undefined"!==typeof b.video.width&&(d.width=e(b.video.width));"undefined"!==typeof b.video.height&&(d.height=e(b.video.height));"undefined"!==typeof b.video.facingMode&&(d.facingMode=b.video.facingMode)}d={audio:b.audio,video:d};"undefined"!==typeof b.deviceId&&(d.deviceId=b.deviceId);
return d}function Xa(b){var d=b.video.width;b.video.width=b.video.height;b.video.height=d;return b}
function Ya(b){function d(r){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(x,D){return Math.abs(x-r)-Math.abs(D-r)})}function e(r){var x=Wa(b);g.push(r(x))}var g=[];if(!b||!b.video)return g;if(b.video.width&&b.video.height){if(b.video.width.ideal&&b.video.height.ideal){var k=d(b.video.width.ideal).slice(0,3),l=d(b.video.height.ideal).slice(0,3),m={},n=0;for(m.H=void 0;n<k.length;m={H:m.H},++n){m.H=k[n];var p={},h=0;for(p.G=void 0;h<l.length;p={G:p.G},++h)if(p.G=l[h],
m.H!==b.video.width.ideal||p.G!==b.video.height.ideal){var q=Math.max(m.H,p.G)/Math.min(m.H,p.G);q<4/3-.1||q>16/9+.1||e(function(r,x){return function(D){D.video.width.ideal=r.H;D.video.height.ideal=x.G;return D}}(m,p))}}}e(function(r){return Xa(r)})}b.video.width&&b.video.height&&(b.video.width.ideal&&b.video.height.ideal&&e(function(r){delete r.video.width.ideal;delete r.video.height.ideal;return r}),e(function(r){delete r.video.width;delete r.video.height;return r}));b.video.facingMode&&(e(function(r){delete r.video.facingMode;
return r}),b.video.width&&b.video.height&&e(function(r){Xa(r);delete r.video.facingMode;return r}));g.push({audio:b.audio,video:!0});return g}function Za(b){try{var d=window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(g){d=window.innerHeight>window.innerWidth}if(d&&b&&b.video){d=b.video.width;var e=b.video.height;d&&e&&d.ideal&&e.ideal&&d.ideal>e.ideal&&(b.video.height=d,b.video.width=e)}}
function $a(b){b.volume=0;Ra(b,"muted");if(Ua()){if(1===b.volume){var d=function(){b.volume=0;window.removeEventListener("mousemove",d,!1);window.removeEventListener("touchstart",d,!1)};window.addEventListener("mousemove",d,!1);window.addEventListener("touchstart",d,!1)}setTimeout(function(){b.volume=0;Ra(b,"muted")},5)}}
function ab(b,d,e,g){function k(m){l||(l=!0,e(m))}var l=!1;navigator.mediaDevices.getUserMedia(g).then(function(m){function n(){setTimeout(function(){if(b.currentTime){var p=b.videoWidth,h=b.videoHeight;if(0===p||0===h)k("VIDEO_NULLSIZE");else{p&&(b.style.width=p.toString()+"px");h&&(b.style.height=h.toString()+"px");p={kb:null,Xb:null,Hb:null};try{var q=m.getVideoTracks()[0];q&&(p.Hb=q,p.kb=q.getCapabilities(),p.Xb=q.getSettings())}catch(r){}Ua()||Sa()?b.parentNode&&null!==b.parentNode?(l||d(b,m,
p),setTimeout(function(){b.play()},100)):(document.body.appendChild(b),$a(b),l||d(b,m,p),setTimeout(function(){b.style.transform="scale(0.0001,0.0001)";b.style.position="fixed";b.style.bottom="0px";b.style.right="0px";$a(b);setTimeout(function(){b.play()},100)},80)):l||d(b,m,p)}}else k("VIDEO_NOTSTARTED")},700)}"undefined"!==typeof b.srcObject?b.srcObject=m:(b.src=window.URL.createObjectURL(m),b.videoStream=m);$a(b);b.addEventListener("loadeddata",function(){var p=b.play();$a(b);"undefined"===typeof p?
n():p.then(function(){n()}).catch(function(){k("VIDEO_PLAYPROMISEREJECTED")})},!1)}).catch(function(m){k(m)})}
function bb(b,d){var e=Va()?document.createElement("video"):!1,g={video:{facingMode:{ideal:"user"},width:{min:480,max:1280,ideal:800},height:{min:480,max:1280,ideal:600}},audio:!1};if(e)if(Va()){if(g&&g.video){if(Sa()){var k=Ta();(12>k[0]||12===k[0]&&2>k[1])&&Za(g)}g.video.width&&g.video.width.ideal&&(e.style.width=g.video.width.ideal+"px");g.video.height&&g.video.height.ideal&&(e.style.height=g.video.height.ideal+"px")}Ra(e,"autoplay");Ra(e,"playsinline");g&&g.audio?e.volume=0:Ra(e,"muted");ab(e,
b,function(){function l(n){if(0===n.length)d("INVALID_FALLBACKCONSTRAINTS");else{var p=n.shift();ab(e,b,function(){l(n)},p)}}var m=Ya(g);l(m)},g)}else d&&d("MEDIASTREAMAPI_NOTFOUND");else d&&d("VIDEO_NOTPROVIDED")}var cb=[1,1,2],db=[.2,.8],Ia={};
function eb(b){function d(C){X=setTimeout(g.bind(null,C),10)}function e(){ja&&(window.cancelAnimationFrame(ja),ja=!1);X&&(window.clearTimeout(X),X=!1)}function g(){if(F!==z.pause){G.reset();G.I();var C=p.currentTime-E;0>C&&(E=p.currentTime);20>1E3*C||(h.refresh(),E+=C,u.set("s49"),q.w(),h.b(0),L.g(!1,!0));for(C=0;1>C;++C)u.set("s50"),r.w(),q.b(0),x.b(1),L.g(!1,!1),r.b(0),l.v(!1,r);f===H.visible&&(G.bc(),u.set("s48"),q.b(1),x.b(0),L.g(!1,!1));a.flush();ja=window.requestAnimationFrame(d)}}var k=Date.now(),
l,m=1.25/3,n=[.16,.16],p,h,q,r,x,D,A=new Uint8Array([0,0,0,0]),z={Fb:0,ba:1,ha:2,pause:3},F=z.Fb,H={hidden:0,visible:1},f=b.Cb?H.visible:H.hidden,v=0,w=.25,Q=.25,fa=1.25,ja=!1,X=!1,N=0,c="undefined"!==typeof b.sa?b.sa:"./",B=(("undefined"!==typeof b.Ua?b.Ua:.55)-db[0])/(db[1]-db[0]),E=0;return{Tb:function(C){B=C},$b:function(C){f=C?H.visible:H.hidden},ac:function(C){C&&F!==z.pause?(F=z.pause,e()):C||F!==z.pause||(F=z.ha,e(),F=z.ba,g(0))},j:function(C){p=C;u.ab([{id:"s49",name:"_",U:"attribute vec2 a0;uniform vec2 u34,u35;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=u35+u34*a0;}",
W:["a0"],O:[2],c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:["u1","u34","u35"],precision:"lowp"},{id:"s50",name:"_",c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",U:"attribute vec2 a0;uniform sampler2D u36;uniform vec2 u37;const vec2 k=vec2(.25,.5),j=vec2(.75,.5),e=vec2(.5,.5);varying vec2 vv0;void main(){vec4 a=texture2D(u36,k);vec2 d=a.gb,b=a.a*u37;vec4 c=texture2D(u36,j);float l=c.a,g=c.y;vec2 f=vec2(1./cos(g),1.);b*=f;vec2 i=a0*.5+e;vv0=d+(i-e)*b,gl_Position=vec4(a0,0.,1.);}",
W:["a0"],O:[2],f:["u1","u36","u37"],precision:"lowp"},{id:"s51",name:"_",U:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",c:"uniform sampler2D u38,u36;uniform vec3 u39,u40;uniform float u41,u42,u43,u44,u45,u46;const vec4 e=vec4(.25,.25,.25,.25);const float f=1e-3;void main(){vec4 b=texture2D(u36,vec2(.25,.5));float a=floor(b.r+f),c=0.;vec4 h=texture2D(u38,vec2(.125,.625)),i=texture2D(u38,vec2(.375,.625));float d=dot(h,e),j=dot(i,e);bool k=d>u44&&d>j+u45;k?a=2.:a>u43?a=0.:a>1.9&&(b.a>u42||b.a<u41)?a=0.:a>1.9?a+=1.:0.;if(a<.9)b.gba=u39,a=1.;else{float l=dot(e,texture2D(u38,vec2(.375,.875))),m=dot(e,texture2D(u38,vec2(.625,.875))),n=dot(e,texture2D(u38,vec2(.875,.875))),o=dot(e,texture2D(u38,vec2(.125,.875)));c=clamp(o,-1.+f,1.-f);float p=step(1.5,a);a*=p;float g=b.a*u46;b.gba+=vec3(l,m,n)*u40*g;}b.r=a+c*.5+.5,gl_FragColor=b;}",
f:"u38 u36 u39 u41 u42 u43 u45 u44 u40 u46".split(" ")},{id:"s52",name:"_",c:"uniform sampler2D u36,u47;uniform float u48;varying vec2 vv0;const vec2 e=vec2(.5,.5);void main(){vec4 a=texture2D(u36,e),b=texture2D(u47,e);float c=step(2.,a.r),d=fract(a.r);vec4 f=vec4(c,d,0.,1.);gl_FragColor=mix(f,b,u48);}",f:["u36","u47","u48"]},{id:"s48",name:"_",c:"uniform sampler2D u36,u49;uniform vec2 u37;varying vec2 vv0;const vec2 j=vec2(1.,1.);const vec3 k=vec3(0.,.7,1.);void main(){vec4 g=texture2D(u36,vec2(.5,.5));vec3 l=texture2D(u49,vv0).rgb;vec2 h=g.gb;float m=g.a;vec2 b=m*u37,d=h+b,c=h;c-=b/2.,d-=b/2.;vec2 n=.5*(c+d),i=step(c,vv0)*step(vv0,d);float o=i.x*i.y;vec2 a=2.*abs(n-vv0)/b;a=pow(a,3.*j);float f=max(a.x,a.y);f*=o,gl_FragColor=vec4(mix(l,k,f),1.);}",
f:["u36","u49","u37"]}]);u.D("s50",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u36",value:1},{type:"2f",name:"u37",value:n}]);u.D("s52",[{type:"1i",name:"u36",value:0},{type:"1i",name:"u47",value:1},{type:"1f",name:"u48",value:.9}]);u.D("s48",[{type:"1i",name:"u36",value:0},{type:"1i",name:"u49",value:1},{type:"2f",name:"u37",value:n}]);u.D("s51",[{type:"1i",name:"u38",value:0},{type:"1i",name:"u36",value:1},{type:"1f",name:"u41",value:1.1},{type:"1f",name:"u42",value:5.8},{type:"1f",name:"u43",
value:55},{type:"1f",name:"u44",value:.95},{type:"1f",name:"u45",value:1.1},{type:"1f",name:"u46",value:n[0]},{type:"3f",name:"u40",value:[cb[0]*n[0],cb[1]*n[1],cb[2]]}]);h=T.a({u:p,isPot:!1,isFloat:!1,isFlipY:!0});q=T.a({isPot:!1,Nc:!0,isFloat:!1,width:400,height:400});r=T.a({isPot:!0,isFloat:!1,width:64});x=Ba.a({width:1,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,.25,.25,0])});D=Ba.a({width:1,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,.5,0,1])});na(c+'NNC.json',
function(R){R=JSON.parse(R);l=new Qa;l.Nb(R.layers);l.Pb({Qa:"gpuRawAvg",Jb:function(){x.Sb(1);u.set("s51");u.Vb("u39",w,Q,fa);L.g(!1,!1);0!==++v%2&&(fa+=m,2.5<fa&&(w+=.1,fa=1.25,.75<w&&(w=.25,Q+=.1,.75<Q&&(Q=.25))));u.set("s52");D.Rb(1);x.b(0);L.g(!1,!1);var O=Date.now();if(100<O-k){k=O;u.set("s1");G.B();D.b(0);L.g(!1,!1);a.readPixels(0,0,1,1,a.RGBA,a.UNSIGNED_BYTE,A);O=db[0]+B*(db[1]-db[0]);var W=Math.abs(A[1]/255*2-1),ha=128<A[0],U=ha&&W<O+.1;F===z.ba&&ha&&W<O-.1?(b.xa(!0),F=z.ha):F!==z.ha||U||
(b.xa(!1),F=z.ba);G.I()}}});++N;1===N&&(fb.ready=!0,b.gb(!1,{video:p,GL:a,videoTexture:h.get(),videoTextureCut:r.get()}),F!==z.pause&&(e(),F=z.ba,g(0)),N=0)})}}}
var fb={ready:!1,set_sensibility:function(b){fb.ready&&fb.V.Tb(b)},toggle_pause:function(b){fb.ready&&fb.V.ac(b)},toggle_display:function(b){fb.ready&&fb.V.$b(b)},init:function(b){function d(e){b.callbackReady&&b.callbackReady(e?e:"UNKNOW_ERROR")}fb.V=eb({Cb:"undefined"===typeof b.isDisplayVideo?!0:b.isDisplayVideo,gb:function(e,g){b.callbackReady&&b.callbackReady(e,g)},xa:b.callbackTrack,Ua:b.sensibility,sa:b.NNCpath});if(!Aa.j({Ba:b.canvasId,width:400,height:400,debug:!1,na:!1,premultipliedAlpha:!0}))return d&&
d("COMPAT_FAIL"),!1;u.j();bb(function(e){var g=[.5,.5],k=e.videoHeight/e.videoWidth,l=Aa.F()/Aa.s();k>l?1>=k?g[0]*=k:g[1]/=k:(g[0]*=k,k=1/l,g[0]*=k,g[1]*=k);g[1]*=l;fb.V.j(e);u.D("s49",[{type:"1i",name:"u1",value:0},{type:"2f",name:"u34",value:g},{type:"2f",name:"u35",value:[.5,.5]}])},function(){d("NO_WEBCAM")});return!0}};window.GLANCETRACKERAPI=fb;
;return GLANCETRACKERAPI;})();