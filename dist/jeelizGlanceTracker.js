 /**
 * Jeeliz Glance Tracker - https://github.com/jeeliz/jeelizGlanceTracker
 *
 * Copyright 2018 Jeeliz ( https://jeeliz.com )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

var GLANCETRACKERAPI=(function(){function oa(b,d){var e=new XMLHttpRequest;e.open("GET",b,!0);e.withCredentials=!1;e.onreadystatechange=function(){4===e.readyState&&200===e.status&&d(e.responseText)};e.send()}
function ra(b){switch(b){case "relu":return"gl_FragColor=max(vec4(0.,0.,0.,0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.,1.,1.,1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1,0.1,0.1,0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}
function ta(b,d){var e=d%8;return b[(d-e)/8]>>7-e&1}
function va(b){var d=JSON.parse(b);b=d.ne;var e=d.nf,g=d.n,l="undefined"===typeof btoa?Buffer.from(d.data,"base64").toString("latin1"):atob(d.data),k=l.length,t;d=new Uint8Array(k);for(t=0;t<k;++t)d[t]=l.charCodeAt(t);l=new Float32Array(g);k=new Float32Array(e);t=b+e+1;var m,h;for(m=0;m<g;++m){var n=t*m;var q=0===ta(d,n)?1:-1;var r=n+1;var y=1,F=0;for(h=r+b-1;h>=r;--h)F+=y*ta(d,h),y*=2;h=F;r=d;y=n+1+b;F=k;var C=0,B=F.length;for(n=y;n<y+B;++n)F[C]=ta(r,n),++C;for(n=r=0;n<e;++n)r+=k[n]*Math.pow(2,-n-
1);q=0===r&&0===h?0:q*(1+r)*Math.pow(2,1+h-Math.pow(2,b-1));l[m]=q}return l}
var u=function(){function b(f,w){f=a.createShader(f);a.shaderSource(f,w);a.compileShader(f);return a.getShaderParameter(f,a.COMPILE_STATUS)?f:!1}function d(f,w){f=b(a.VERTEX_SHADER,f);w=b(a.FRAGMENT_SHADER,w);var x=a.createProgram();a.attachShader(x,f);a.attachShader(x,w);a.linkProgram(x);return x}function e(f){void 0===f.U&&(f.U="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");void 0===f.W&&(f.W=["a0"]);void 0===f.O&&(f.O=[2]);
if(void 0===f.precision||"highp"===f.precision)f.precision=h;f.id=t++;void 0!==f.Hb&&f.Hb.forEach(function(x,R){f.c=f.c.replace(x,f.ba[R])});f.ra=0;f.O.forEach(function(x){f.ra+=4*x});f.aa=d(f.U,"precision "+f.precision+" float;\n"+f.c);f.l={};f.f.forEach(function(x){f.l[x]=a.getUniformLocation(f.aa,x)});f.attributes={};f.P=[];f.W.forEach(function(x){var R=a.getAttribLocation(f.aa,x);f.attributes[x]=R;f.P.push(R)});if(f.h){a.useProgram(f.aa);k=f;l=f.id;for(var w in f.h)a.uniform1i(f.l[w],f.h[w])}f.Ac=
!0}function g(f){xa.Pb(J);l!==f.id&&(J.N(),l=f.id,k=f,a.useProgram(f.aa),f.P.forEach(function(w){0!==w&&a.enableVertexAttribArray(w)}))}var l=-1,k=!1,t=0,m=!1,h="highp",n=["u1"],q=["u0"],r={u1:0},y={u0:0},F={u1:0,u2:1},C={u3:0},B={s0:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:n,h:r},s1:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:n,h:r,precision:"lowp"},s2:{c:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",
f:["u1","u2"],h:F},s3:{c:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",f:n,h:r},s4:{c:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",f:["u1","mask"],h:F},s5:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",f:n,h:r},s6:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",
f:n,h:r},s7:{c:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",f:["u0","u4"],h:y},s8:{c:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 g=vec4(.25,.25,.25,.25),e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,g);gl_FragColor=b*e;}",f:["u0","u4"],h:y},s9:{c:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",
f:n,h:r},s10:{c:"uniform sampler2D u1,u5;uniform float u6;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);gl_FragColor=mix(b,a,u6*f);}",f:["u1","u5","u6"],h:{u1:0,u5:1}},s11:{c:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u7)+texture2D(u1,vv0+u7*vec2(1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,1.)));}",f:["u1","u7"],h:r},s12:{c:"uniform sampler2D u1;uniform vec4 u8;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 k(float a){if(a==0.)return vec4(0.,0.,0.,0.);float l=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),m=c+127.,b=(a/exp2(c)-1.)*8388608.,d=m/2.,n=fract(d)*2.,o=floor(d),p=e(b,0.,8.),q=e(b,8.,16.),r=n*128.+e(b,16.,23.),j=l+o;return vec4(p,q,r,j)/255.;}void main(){float a=dot(texture2D(u1,vv0),u8);gl_FragColor=k(a);}",
f:["u1","u8"],h:r},s13:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",f:q,h:y},s14:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(e,a);}",f:q,h:y},s15:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-e,a,step(0.,a));}",f:q,h:y},s16:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-e;gl_FragColor=mix(.1*b,a,step(0.,a));}",
f:q,h:y},s17:{c:"uniform sampler2D u0,u6,u9;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u6,vv0),d=texture2D(u9,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",f:["u0","u6","u9"],h:{u0:0,u6:1,u9:2}},s18:{c:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",f:q,h:y},s19:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(.5,.5,.5,.5);void main(){vec4 a=texture2D(u0,vv0),b=log(e+a);gl_FragColor=b;}",
f:q,h:y},s20:{c:"uniform sampler2D u0;uniform float gain;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=exp(a);}",f:["u0","u10"],h:y},s21:{c:"uniform sampler2D u0,u11;uniform float u12;const vec2 f=vec2(.5,.5);const float g=1e-5;const vec4 h=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u11,f);float b=u12*u12;vec4 c=max(b*a,g*h);gl_FragColor=texture2D(u0,vv0)/c;}",f:["u0","u13","u12"],h:{u0:0,u13:1}},s22:{c:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){float a=u14.x*u14.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u14.y),g=floor(u14.x*fract(b*u14.y)),f=(g*u14.y+d)/a;gl_FragColor=texture2D(u1,f+c/a);}",
f:["u1","u14"],h:r},s23:{c:"uniform sampler2D u15,u16,u17;varying vec2 vv0;void main(){vec4 a=texture2D(u17,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u15,b),e=texture2D(u16,c);gl_FragColor=d*e;}",f:["u15","u16","u17"],h:{u16:0,u15:1,u17:2}},s24:{c:"uniform float u18;uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec2 a=fract(vv0*u18);vec4 b=texture2D(u15,vv0),c=texture2D(u16,a);gl_FragColor=b*c;}",f:["u16","u15","u18"],h:{u16:0,u15:1}},s25:{c:"uniform float u18;uniform sampler2D u15,u16,u19,u20,u21,u22;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 i=vv0*u18,m=floor(i),c=i-m;vec4 n=texture2D(u15,vv0),d=texture2D(u16,c),a=texture2D(u22,vv0);a=a*255.;vec4 o=texture2D(u19,c),p=texture2D(u20,c),q=texture2D(u21,c),j=step(-g,-a),b=e-j,k=b*step(-e-g,-a);b*=e-k;vec4 h=b*step(-2.*e-g,-a);b*=e-h;vec4 l=b;d=j*d+k*o+h*p+l*q,gl_FragColor=n*d;}",
f:"u15 u16 u18 u22 u19 u20 u21".split(" "),h:{u16:0,u15:1,u22:3,u19:4,u20:5,u21:6}},s26:{c:"uniform sampler2D u15,u16,u23;uniform float u18,u24,u25,u26;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u24*vv0),g=u24*vv0-a;float b=u18/u24;vec2 c=floor(g*b),d=g*b-c,h=(a+d)/u24;float l=u24*u26/u18;vec2 m=l*c,i=(m+d*u25)/u26,e=step(i,j);vec4 n=texture2D(u15,h),o=texture2D(u16,i),p=n*o*e.x*e.y,k=texture2D(u23,h);gl_FragColor=p*u25*u25+k;}",f:"u15 u16 u18 u24 u25 u26 u23".split(" "),h:{u16:0,
u15:1,u23:2}},s27:{c:"uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec4 a=texture2D(u15,vv0),b=texture2D(u16,vv0);gl_FragColor=a*b;}",f:["u15","u16"],h:{u16:0,u15:1}},s28:{c:"uniform sampler2D u1,u23;uniform float u27;varying vec2 vv0;void main(){gl_FragColor=texture2D(u23,vv0)+u27*texture2D(u1,vv0);}",f:["u1","u23","u27"],h:{u1:0,u23:1}},s29:{c:"varying vec2 vv0;uniform sampler2D u1;const vec4 g=vec4(1.,1.,1.,1.),e=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,e)*g;}",
f:n,h:r,precision:"lowp"},s30:{c:"varying vec2 vv0;uniform sampler2D u1;uniform float u28;const vec3 e=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u28)).rgb,c=texture2D(u1,vv0+vec2(u28,u28)).rgb,d=texture2D(u1,vv0+vec2(u28,0.)).rgb;gl_FragColor=vec4(dot(a,e),dot(b,e),dot(c,e),dot(d,e));}",f:["u1","u28"],h:r,precision:"lowp"},s31:{c:"varying vec2 vv0;uniform sampler2D u1;uniform float u28;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u28)).rgb,c=texture2D(u1,vv0+vec2(u28,u28)).rgb,d=texture2D(u1,vv0+vec2(u28,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
f:["u1","u28"],h:r,precision:"lowp"},s32:{c:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u29;const vec4 g=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u29,vv0.y-u29))*1.,a-=texture2D(u1,vec2(vv0.x-u29,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u29,vv0.y+u29))*1.,a+=texture2D(u1,vec2(vv0.x+u29,vv0.y-u29))*1.,a+=texture2D(u1,vec2(vv0.x+u29,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u29,vv0.y+u29))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u29,vv0.y-u29))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u29))*2.,b-=texture2D(u1,vec2(vv0.x+u29,vv0.y-u29))*1.,b+=texture2D(u1,vec2(vv0.x-u29,vv0.y+u29))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u29))*2.,b+=texture2D(u1,vec2(vv0.x+u29,vv0.y+u29))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),f=texture2D(u2,vv0);gl_FragColor=f.a*e.r*g;}",
f:["u1","u2","u29"],h:F},s33:{c:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u29;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float i=0.;vec2 l=k*u29,b,c;float d,a,g=0.;for(float f=-4.;f<=4.;f+=1.)for(float e=-4.;e<=4.;e+=1.)b=vec2(f,e),d=length(b)/2.,a=exp(-d*d),c=vv0+l*b,a=1.,i+=a*texture2D(u1,c).r,g+=a;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,c).r-i/g)*j;}",f:["u1","u2","u29"],h:F},s34:{c:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 h=vec2(.5,.5),i=vec2(1.,0.),j=vec2(0.,1.);void main(){vec2 a=vv0-u7*h;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*i),d=texture2D(u3,a+u7*j),k=texture2D(u3,a+u7),l=e(b,c),g=e(d,k);gl_FragColor=e(l,g);}",
f:["u3","u7"],h:C},s35:{c:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;const vec2 j=vec2(1.,0.),k=vec2(0.,1.),l=vec2(2.,0.),m=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*j),d=texture2D(u3,a+u7*k),g=texture2D(u3,a+u7),i=e(b,c),h=e(d,g);return e(i,h);}void main(){vec2 a=vv0+u7*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u7*l),d=f(a+u7*2.),g=f(a+u7*m),i=e(b,c),h=e(d,g);gl_FragColor=e(i,h);}",f:["u3","u7"],h:C},s36:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",
f:["u1"],h:r,precision:"lowp"},s37:{c:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);const float d=15444.;void main(){vec4 a=1001./d*texture2D(u1,vv0-3.*u7)+2002./d*texture2D(u1,vv0-2.*u7)+3003./d*texture2D(u1,vv0-u7)+3432./d*texture2D(u1,vv0)+3003./d*texture2D(u1,vv0+u7)+2002./d*texture2D(u1,vv0+2.*u7)+1001./d*texture2D(u1,vv0+3.*u7);gl_FragColor=a;}",f:["u7","u1"],h:r,precision:"lowp"},s38:{c:"uniform sampler2D u1,u30,u31;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);const float h=.1;void main(){vec4 a=texture2D(u30,vv0),b=texture2D(u31,vv0),c=texture2D(u1,vv0),d=max(g*h,b-a*a),f=sqrt(d);gl_FragColor=(c-a)/f;}",
f:["u1","u30","u31"],h:{u1:0,u30:1,u31:2}}},E={s39:{c:"uniform float u18,u32;uniform sampler2D u15,u16,u23;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(.01,.01);void main(){vec4 sum=texture2D(u23,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u18,xyTo=floor(vv0*u18+eps2);float weightSize=toSparsity*u18;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u32*(xyPatch-halfFromSparsity))/u18,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u15,uvWeight)*texture2D(u16,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
f:["u18","u15","u16","u23","u32"],ba:["1.1111","gl_FragColor\\*=2.2222;"]},s40:{c:"uniform float u18,u32,u26;uniform sampler2D u15,u16,u23;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(.01,.01);void main(){vec4 sum=texture2D(u23,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u26,xyTo=floor(vv0*u18+eps2);float weightSize=fromSparsity*u26;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u18;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u32*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u26,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u15,uvWeight)*texture2D(u16,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
f:"u18 u26 u15 u16 u23 u32".split(" "),ba:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},J={na:function(){return m},i:function(){if(!m){h="highp";for(var f in B)e(B[f],f);u.set("s0");a.enableVertexAttribArray(0);f=ya.i();m=!0;return f}},Wa:function(f){f.forEach(function(w){J.ta(w)})},ta:function(f){B[f.id]=f;e(f,f.id)},Fa:function(f,w,x){w||(w=f);B[w]=Object.create(E[f]);E[f].ba&&E[f].ba.forEach(function(R,ha){B[w].c=B[w].c.replace(new RegExp(R,"g"),x[ha])});e(B[w],w)},set:function(f){g(B[f])},nb:function(f){return"undefined"!==
typeof B[f]},lc:function(){return k.ic},N:function(){-1!==l&&(l=-1,k.P.forEach(function(f){0!==f&&a.disableVertexAttribArray(f)}))},pa:function(){var f=0;k.P.forEach(function(w,x){x=k.O[x];a.vertexAttribPointer(w,x,a.FLOAT,!1,k.ra,f);f+=4*x})},hc:function(){a.enableVertexAttribArray(0)},qa:function(){a.vertexAttribPointer(k.P[0],2,a.FLOAT,!1,8,0)},Nc:function(f,w){a.uniform1i(k.l[f],w)},C:function(f,w){a.uniform1f(k.l[f],w)},G:function(f,w,x){a.uniform2f(k.l[f],w,x)},Oc:function(f,w){a.uniform2fv(k.l[f],
w)},Pc:function(f,w){a.uniform3fv(k.l[f],w)},Qb:function(f,w,x,R){a.uniform3f(k.l[f],w,x,R)},Ra:function(f,w){a.uniform4fv(k.l[f],w)},Qc:function(f,w){a.uniformMatrix2fv(k.l[f],!1,w)},Rc:function(f,w){a.uniformMatrix3fv(k.l[f],!1,w)},Sc:function(f,w){a.uniformMatrix4fv(k.l[f],!1,w)},D:function(f,w){J.set(f);w.forEach(function(x){switch(x.type){case "4f":a.uniform4fv(k.l[x.name],x.value);break;case "3f":a.uniform3fv(k.l[x.name],x.value);break;case "2f":a.uniform2fv(k.l[x.name],x.value);break;case "1f":a.uniform1f(k.l[x.name],
x.value);break;case "1i":a.uniform1i(k.l[x.name],x.value);break;case "mat2":a.uniformMatrix2fv(k.l[x.name],!1,x.value);break;case "mat3":a.uniformMatrix3fv(k.l[x.name],!1,x.value);break;case "mat4":a.uniformMatrix4fv(k.l[x.name],!1,x.value)}})}};return J}(),a=!1,Ba=function(){function b(h){console.log("ERROR in ContextFeedForward : ",h);return!1}var d=!1,e=!1,g=!1,l=!1,k=!0,t=!1,m={s:function(){return d.width},F:function(){return d.height},mc:function(){return d},kc:function(){return a},m:function(){return k},
flush:function(){a.flush()},rb:function(){t||(t=new Uint8Array(d.width*d.height*4));a.readPixels(0,0,d.width,d.height,a.RGBA,a.UNSIGNED_BYTE,t);return t},oc:function(){return d.toDataURL("image/jpeg")},pc:function(){G.B();e||(e=document.createElement("canvas"),g=e.getContext("2d"));e.width=d.width;e.height=d.height;var h=m.rb(),n=g.createImageData(e.width,e.height),q,r,y=e.width,F=e.height,C=n.data;for(r=0;r<F;++r){var B=F-r-1;for(q=0;q<y;++q){var E=4*(r*y+q);var J=4*(B*y+q);C[E]=h[J];C[E+1]=h[J+
1];C[E+2]=h[J+2];C[E+3]=h[J+3]}}g.putImageData(n,0,0);return e.toDataURL("image/png")},nc:function(h){!e&&h&&(e=document.createElement("canvas"),g=e.getContext("2d"));var n=h?e:document.createElement("canvas");n.width=d.width;n.height=d.height;(h?g:n.getContext("2d")).drawImage(d,0,0);return n},i:function(h){h.za&&!h.X?d=document.getElementById(h.za):h.X&&(d=h.X);d||(d=document.createElement("canvas"));d.width=h&&void 0!==h.width?h.width:512;d.height=h&&void 0!==h.height?h.height:512;"undefined"===
typeof h&&(h={});void 0===h.premultipliedAlpha&&(h.premultipliedAlpha=!1);void 0===h.ma&&(h.ma=!0);void 0===h.antialias&&(h.antialias=!1);var n={antialias:h.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:h.premultipliedAlpha,stencil:!1,depth:h.ma};a:{if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){var q=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);q=[parseInt(q[1],10),parseInt(q[2],10),parseInt(q[3]||0,10)];if(12===q[0]||13===q[0]){q=!0;break a}}q=!1}q||
(a=d.getContext("webgl2",n));a?k=!0:((a=d.getContext("webgl",n))||(a=d.getContext("experimental-webgl",n)),k=!1);if(!a)return b("WebGL is not enabled");(l=a.getExtension("WEBGL_lose_context"))&&d.addEventListener("webglcontextlost",h.Ic,!1);if(!I.i())return b("Not enough capabilities");if(!I.bb()&&k)return b("Your configuration cannot process color buffer float");a.clearColor(0,0,0,0);a.disable(a.DEPTH_TEST);a.disable(a.BLEND);a.disable(a.DITHER);a.disable(a.STENCIL_TEST);a.GENERATE_MIPMAP_HINT&&
a.hint(a.GENERATE_MIPMAP_HINT,a.FASTEST);a.disable(a.SAMPLE_ALPHA_TO_COVERAGE);a.disable(a.SAMPLE_COVERAGE);return!0},zc:function(){if(!u.i())return!1;a.depthFunc(a.LEQUAL);a.clearDepth(1);return!0}};return m}(),xa=function(){var b="undefined"===typeof u?JEShaders:u;return{Pb:function(d){b!==d&&(b.N(),b=d)},na:function(){return b.na()},qa:function(){b.qa()},pa:function(){b.pa()},N:function(){b.N()},set:function(d){b.set(d)}}}(),M=function(){var b,d,e=0,g=-2,l=-2,k=!1,t={reset:function(){l=g=-2},i:function(){k||
(b=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,b),a.bufferData(a.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),a.STATIC_DRAW),d=a.createBuffer(),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,d),a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),a.STATIC_DRAW),t.ea(),k=!0)},a:function(m){var h=e++,n=m.I?m.I.length:0,q="undefined"===typeof m.mode?a.STATIC_DRAW:m.mode,r=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,r);a.bufferData(a.ARRAY_BUFFER,m.Ua instanceof Float32Array?m.Ua:new Float32Array(m.Ua),
q);g=h;if(m.I){var y=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,y);if(65536>m.I.length){var F=Uint16Array;var C=a.UNSIGNED_SHORT;var B=2}else F=Uint32Array,C=a.UNSIGNED_INT,B=4;a.bufferData(a.ELEMENT_ARRAY_BUFFER,m.I instanceof F?m.I:new F(m.I),q);l=h}var E={$a:function(J){g!==h&&(a.bindBuffer(a.ARRAY_BUFFER,r),g=h);J&&xa.pa()},Ya:function(){l!==h&&(a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,y),l=h)},bind:function(J){E.$a(J);E.Ya()},fc:function(){a.drawElements(a.TRIANGLES,n,C,0)},gc:function(J,
f){a.drawElements(a.TRIANGLES,J,C,f*B)},remove:function(){a.deleteBuffer(r);m.I&&a.deleteBuffer(y);E=null}};return E},ea:function(){-1!==g&&(a.bindBuffer(a.ARRAY_BUFFER,b),g=-1);-1!==l&&(a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,d),l=-1)},g:function(m,h){m&&M.ea();h&&xa.qa();a.drawElements(a.TRIANGLES,3,a.UNSIGNED_SHORT,0)},qb:function(){a.deleteBuffer(b);a.deleteBuffer(d)}};return t}(),G=function(){var b,d,e,g=!1,l={o:-2,ob:1};return{i:function(){if(!g){b=a.createFramebuffer();var k=I.m();d=k&&a.DRAW_FRAMEBUFFER?
a.DRAW_FRAMEBUFFER:a.FRAMEBUFFER;e=k&&a.READ_FRAMEBUFFER?a.READ_FRAMEBUFFER:a.FRAMEBUFFER;g=!0}},rc:function(){return d},ja:function(){return e},M:function(){return a.FRAMEBUFFER},uc:function(){return l},jc:function(){return b},a:function(k){void 0===k.Ga&&(k.Ga=!1);var t=k.Ub?k.Ub:!1,m=k.width,h=void 0!==k.height?k.height:k.width,n=b,q=!1,r=!1,y=0;t&&(m=m?m:t.s(),h=h?h:t.F());var F={Qa:function(){r||(n=a.createFramebuffer(),r=!0,y=l.ob++)},Va:function(){F.Qa();F.j();q=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,
q);a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,m,h);a.framebufferRenderbuffer(d,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,q);a.clearDepth(1)},bind:function(C,B){y!==l.o&&(a.bindFramebuffer(d,n),l.o=y);t&&t.j();B&&a.viewport(0,0,m,h);C&&a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)},$b:function(){y!==l.o&&(a.bindFramebuffer(d,n),l.o=y)},clear:function(){a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)},cc:function(){a.clear(a.COLOR_BUFFER_BIT)},dc:function(){a.clear(a.DEPTH_BUFFER_BIT)},Rb:function(){a.viewport(0,
0,m,h)},j:function(){y!==l.o&&(a.bindFramebuffer(d,n),l.o=y)},rtt:function(C){t=C;l.o!==y&&(a.bindFramebuffer(a.FRAMEBUFFER,n),l.o=y);C.j()},B:function(){a.bindFramebuffer(d,null);l.o=-1},resize:function(C,B){m=C;h=B;q&&(a.bindRenderbuffer(a.RENDERBUFFER,q),a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,m,h))},remove:function(){a.bindFramebuffer(d,n);a.framebufferTexture2D(d,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,null,0);q&&a.framebufferRenderbuffer(d,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,null);a.bindFramebuffer(d,
null);a.deleteFramebuffer(n);q&&a.deleteRenderbuffer(q);F=null}};k.Ga&&F.Va();return F},B:function(){a.bindFramebuffer(d,null);l.o=-1},Xb:function(){a.bindFramebuffer(d,null);a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);a.viewport(0,0,I.s(),I.F());l.o=-1},reset:function(){l.o=-2},H:function(){0!==l.o&&(a.bindFramebuffer(d,b),l.o=0)},clear:function(){a.viewport(0,0,I.s(),I.F());a.clear(a.COLOR_BUFFER_BIT)}}}(),U=function(){function b(c){a.bindTexture(a.TEXTURE_2D,c)}function d(c){ha[0]=c;c=ka[0];
var A=c>>16&32768,H=c>>12&2047,D=c>>23&255;return 103>D?A:142<D?A|31744|((255==D?0:1)&&c&8388607):113>D?(H|=2048,A|(H>>114-D)+(H>>113-D&1)):A=(A|D-112<<10|H>>1)+(H&1)}function e(c){var A=new Uint16Array(c.length);c.forEach(function(H,D){A[D]=d(H)});return A}function g(){if(null!==Y.ka)return Y.ka;var c=k(e([1,1,1,1]));return null===c?!0:Y.ka=c}function l(){if(null!==Y.la)return Y.la;var c=k(new Uint8Array([255,255,255,255]));return null===c?!0:Y.la=c}function k(c){if(!xa.na()||!C)return null;c=O.a({isFloat:!1,
A:!0,array:c,width:1});G.B();a.viewport(0,0,1,1);a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT);xa.set("s0");c.ua(0);M.g(!1,!0);var A=new Uint8Array(4);a.readPixels(0,0,1,1,a.RGBA,a.UNSIGNED_BYTE,A);A=.9<A[0];c.remove();G.H();return A}var t=0,m,h=0,n,q=!1,r,y,F,C=!1,B=!1,E,J,f,w=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],x=!1,R=!1,ha=new Float32Array(1),ka=new Int32Array(ha.buffer),Y={ka:null,la:null},O={i:function(){if(!C){y=[a.RGB,!1,a.RGB,a.RGBA];F=[a.RGB,!1,a.RGB,a.RGBA];m=[a.TEXTURE0,a.TEXTURE1,
a.TEXTURE2,a.TEXTURE3,a.TEXTURE4,a.TEXTURE5,a.TEXTURE6,a.TEXTURE7];x="undefined"!==typeof JEContext;R="undefined"!==typeof I;x&&JEContext.Gc()&&m.push(a.TEXTURE8,a.TEXTURE9);n=[-1,-1,-1,-1,-1,-1,-1,-1];r=[a.UNSIGNED_BYTE,a.FLOAT,a.FLOAT];if(!q){for(var c=new Float32Array(16384),A=0;16384>A;++A)c[A]=2*Math.random()-1;q={random:O.a({isFloat:!0,isPot:!0,array:c,width:64}),Ta:O.a({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}C=!0}},xb:function(){O.Yb()},xc:function(){return q.Ta},Yb:function(){r[1]=
I.Y()},Jb:function(){F=y=[a.RGBA,a.RGBA,a.RGBA,a.RGBA]},Kc:function(c,A){u.set("s1");G.B();var H=c.s(),D=c.F();a.viewport(0,0,H,D);c.b(0);M.g(!1,!1);a.readPixels(0,0,H,D,a.RGBA,a.UNSIGNED_BYTE,A)},pb:function(c,A,H){a.activeTexture(a.TEXTURE0);t=0;var D=a.createTexture();b(D);var S=I.m()&&a.RGBA32F?a.RGBA32F:a.FLOAT;A=A instanceof Float32Array?A:new Float32Array(A);var P=Math.log(A.length)/Math.log(2);P!==Math.floor(P)&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE));a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,H);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,c.s(),c.F(),0,a.RGBA,S,A);b(null);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1);G.H();u.set("s0");c.u();a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT);b(D);M.g(!0,!1);a.deleteTexture(D)},a:function(c){function A(){b(V);la&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,la);c.isPot?(a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_WRAP_S,c.Ia?a.MIRRORED_REPEAT:a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,c.J?a.MIRRORED_REPEAT:a.REPEAT)):(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE));c.$&&"undefined"!==typeof JESETTINGS&&a.texParameterf(a.TEXTURE_2D,JEContext.qc().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.Zb);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,c.isLinear?a.LINEAR:a.NEAREST);c.isLinear?a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_MIN_FILTER,c.isMipmap&&!sa?a.NEAREST_MIPMAP_LINEAR:a.LINEAR):a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,c.isMipmap&&!sa?a.NEAREST_MIPMAP_NEAREST:a.NEAREST);Z=y[c.T-1];ca=F[c.T-1];da=r[H];if(I.m()){var v=a.RGBA32F;Z===a.RGBA&&da===a.FLOAT&&v&&(ca=v);Z===a.RGB&&da===a.FLOAT&&v&&(ca=v,Z=a.RGBA)}if(c.A&&!c.isFloat||c.isFloat&&c.isMipmap&&ya.Ab())(v=a.RGBA16F)&&(ca=v),da=I.Y();c.Ka&&"undefined"!==typeof a.texStorage2D&&(za=c.Ka);c.Ja&&4===c.T&&(Z=JEContext.vc());if(c.v)a.texImage2D(a.TEXTURE_2D,
0,ca,Z,da,c.v);else if(c.url)a.texImage2D(a.TEXTURE_2D,0,ca,Z,da,ja);else if(T){try{a.getError(),a.texImage2D(a.TEXTURE_2D,0,ca,K,z,0,Z,da,T),a.getError()!==a.NO_ERROR&&(a.texImage2D(a.TEXTURE_2D,0,ca,K,z,0,Z,da,null),a.getError()!==a.NO_ERROR&&a.texImage2D(a.TEXTURE_2D,0,a.RGBA,K,z,0,a.RGBA,a.UNSIGNED_BYTE,null))}catch(ea){a.texImage2D(a.TEXTURE_2D,0,ca,K,z,0,Z,da,null)}c.isKeepArray||(T=null)}else a.texImage2D(a.TEXTURE_2D,0,ca,K,z,0,Z,da,null);if(c.isMipmap)if(!sa&&Q)Q.ia(),Aa=!0;else if(sa){v=
Math.log(Math.min(K,z))/Math.log(2);var L;ua=Array(1+v);ua[0]=V;for(L=1;L<=v;++L){var fa=Math.pow(2,L);var pa=K/fa;fa=z/fa;var aa=a.createTexture();b(aa);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texImage2D(a.TEXTURE_2D,0,ca,pa,fa,0,Z,da,null);b(null);ua[L]=aa}Aa=!0}b(null);n[t]=-1;la&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1);N=!0;W&&Q&&(W(Q),W=!1)}"undefined"===typeof c.isFloat&&(c.isFloat=!1);"undefined"===typeof c.A&&
(c.A=!1);"undefined"===typeof c.isPot&&(c.isPot=!0);"undefined"===typeof c.isLinear&&(c.isLinear=!1);"undefined"===typeof c.isMipmap&&(c.isMipmap=!1);"undefined"===typeof c.fa&&(c.fa=!1);void 0===c.$&&(c.$=!1);void 0===c.J&&(c.J=!1);void 0===c.Ia&&(c.Ia=!1);void 0===c.Ja&&(c.Ja=!1);void 0===c.T&&(c.T=4);void 0===c.Ha&&(c.Ha=!1);"undefined"===typeof c.isFlipY&&(c.isFlipY=c.url||c.array?!0:!1);"undefined"===typeof c.isKeepArray&&(c.isKeepArray=!1);c.data&&(c.array="string"===typeof c.data?va(c.data):
c.isFloat?new Float32Array(c.data):new Uint8Array(c.data),c.isFlipY=!1);var H=0,D=c.v?!0:!1,S=null,P=null,X=!1,ia=null;c.isFloat&&(c.A=!0);c.A&&(H=1);c.Ha||I.m()||!c.isFloat||!R||I.xa()||(c.isFloat=!1);c.isFloat&&(H=2);c.$&&x&&!JEContext.Bc()&&(c.$=!1);var V=a.createTexture(),W=c.fa,ja=null,T=!1,K=0,z=0,N=!1,ba=h++,ma=!1,na,qa,Da,wa,ca,Z,da,la=c.isFlipY,sa=c.A&&c.isMipmap&&"undefined"!==typeof ya&&!ya.eb()?!0:!1,ua,za=-1,Aa=!1;"undefined"!==typeof c.width&&c.width&&(K=c.width,z="undefined"!==typeof c.height&&
c.height?c.height:K);var Q={get:function(){return V},s:function(){return K},F:function(){return z},yc:function(){return c.url},Cc:function(){return c.isFloat},Ec:function(){return c.A},Fc:function(){return c.isLinear},ia:function(){a.generateMipmap(a.TEXTURE_2D)},va:function(v,L){sa?(v||(v=Q.Da()),Q.da(L),b(ua[v]),n[L]=-1):Q.b(L)},Da:function(){-1===za&&(za=Math.log(K)/Math.log(2));return za},Ca:function(v){if(sa){v||(v=Q.Da());u.set("s11");Q.da(0);var L,fa=K,pa=z;for(L=1;L<=v;++L)fa/=2,pa/=2,u.G("u7",
.25/fa,.25/pa),a.viewport(0,0,fa,pa),b(ua[L-1]),a.framebufferTexture2D(G.M(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,ua[L],0),M.g(!1,1===L);n[0]=-1}else Q.ia()},da:function(v){v!==t&&(a.activeTexture(m[v]),t=v)},b:function(v){if(!N)return!1;Q.da(v);if(n[v]===ba)return!1;b(V);n[v]=ba;return!0},ua:function(v){a.activeTexture(m[v]);t=v;b(V);n[v]=ba},j:function(){a.framebufferTexture2D(G.M(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,V,0)},u:function(){a.viewport(0,0,K,z);a.framebufferTexture2D(G.M(),a.COLOR_ATTACHMENT0,
a.TEXTURE_2D,V,0)},Vc:function(){a.framebufferTexture2D(G.M(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,null,0)},resize:function(v,L){K=v;z=L;A()},clone:function(v){v=O.a({width:K,height:z,A:c.A,isFloat:c.isFloat,isLinear:c.isLinear,J:c.J,isFlipY:v?!la:la,isPot:c.isPot});xa.set("s0");G.H();v.j();a.viewport(0,0,K,z);Q.b(0);M.g(!0,!0);return v},Rb:function(){a.viewport(0,0,K,z)},remove:function(){a.deleteTexture(V);Q=null},refresh:function(){Q.ua(0);la&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!0);D?a.texImage2D(a.TEXTURE_2D,
0,ca,Z,a.UNSIGNED_BYTE,c.v):a.texImage2D(a.TEXTURE_2D,0,ca,K,z,0,Z,da,T);la&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1)},ya:function(){var v=K*z*4;qa=[new Uint8Array(v),new Uint8Array(v),new Uint8Array(v),new Uint8Array(v)];na=[new Float32Array(qa[0].buffer),new Float32Array(qa[1].buffer),new Float32Array(qa[2].buffer),new Float32Array(qa[3].buffer)];Da=new Uint8Array(4*v);wa=new Float32Array(Da.buffer);ma=!0},Oa:function(){ma||Q.ya();a.readPixels(0,0,K,4*z,a.RGBA,a.UNSIGNED_BYTE,Da);var v,L=K*z,fa=
2*L,pa=3*L;for(v=0;v<L;++v)na[0][v]=wa[v],na[1][v]=wa[v+L],na[2][v]=wa[v+fa],na[3][v]=wa[v+pa];return na},Aa:function(){G.B();u.set("s12");Q.b(0);for(var v=0;4>v;++v)a.viewport(0,z*v,K,z),u.Ra("u8",w[v]),M.g(!1,0===v)},Wc:function(v){var L=da===r[0]&&!l();b(V);la&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,la);L?(X||(S=document.createElement("canvas"),S.width=K,S.height=z,P=S.getContext("2d"),ia=P.createImageData(K,z),X=!0),ia.data.set(v),P.putImageData(ia,0,0),a.texImage2D(a.TEXTURE_2D,0,ca,Z,da,S)):a.texImage2D(a.TEXTURE_2D,
0,ca,K,z,0,Z,da,v);n[t]=ba;la&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1)},Xc:function(v,L){b(V);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,L);a.texImage2D(a.TEXTURE_2D,0,ca,Z,da,v);n[t]=ba;L&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1)},Mc:function(v,L){var fa=K*z,pa=4*fa;v=c.A?v?"RGBE":"JSON":"RGBA";L&&(v=L);L=I.m()&&!1;switch(v){case "RGBE":var aa="s41";break;case "JSON":aa=L?"s0":"s12";break;case "RGBA":case "RGBAARRAY":aa="s6"}ma||("RGBA"===v||"RGBE"===v||"RGBAARRAY"===v?(qa=new Uint8Array(pa),ma=!0):"JSON"!==
v||L||Q.ya());G.B();u.set(aa);Q.b(0);if("RGBA"===v||"RGBE"===v||"RGBAARRAY"===v){a.viewport(0,0,K,z);M.g(!0,!0);a.readPixels(0,0,K,z,a.RGBA,a.UNSIGNED_BYTE,qa);if("RGBAARRAY"===v)return{data:qa};B||(E=document.createElement("canvas"),J=E.getContext("2d"),B=!0);E.width=K;E.height=z;f=J.createImageData(K,z);f.data.set(qa);J.putImageData(f,0,0);var ea=E.toDataURL("image/png")}else if("JSON"===v)if(L)ea=new Float32Array(fa),a.viewport(0,0,K,z),M.g(!0,!0),a.readPixels(0,0,K,z,a.RGBA,a.FLOAT,ea);else{for(ea=
0;4>ea;++ea)a.viewport(0,z*ea,K,z),u.Ra("u8",w[ea]),M.g(!ea,!ea);Q.Oa();ea=Array(fa);for(aa=0;aa<fa;++aa)ea[4*aa]=na[0][aa],ea[4*aa+1]=na[1][aa],ea[4*aa+2]=na[2][aa],ea[4*aa+3]=na[3][aa]}return{format:v,data:ea,width:K,height:z,isMirrorY:c.J,isFlipY:"RGBA"===v?c.isFlipY:!c.isFlipY}}};c.isMipmap&&!sa&&N&&!Aa&&(Q.ia(),Aa=!0);if(c.url)b(V),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,null),ja=new Image,ja.ec="Anonymous",ja.crossOrigin="Anonymous",ja.src=c.url,ja.onload=function(){K=
ja.width;z=ja.height;A()};else if(c.v){var Ha=function(){K=void 0!==c.v.videoWidth?c.v.videoWidth:c.v.width;z=void 0!==c.v.videoHeight?c.v.videoHeight:c.v.height;K?A():setTimeout(Ha,1)};Ha()}else c.array?(c.A&&!c.isFloat?c.array instanceof Uint16Array?(T=c.array,A()):g()?(T=e(c.array),A()):(A(),O.pb(Q,c.array,la)):(T=c.isFloat?c.array instanceof Float32Array?c.array:new Float32Array(c.array):c.array instanceof Uint8Array?c.array:new Uint8Array(c.array),A()),c.isKeepArray||(T&&T!==c.array&&(T=null),
delete c.array)):A();Q.ub=Q.s;W&&N&&(W(Q),W=!1);return Q},B:function(c){c!==t&&(a.activeTexture(m[c]),t=c);n[c]=-1;b(null)},ac:function(c){q.random.b(c)},reset:function(){for(var c=0;c<m.length;++c)n[c]=-1;t=-1},Lc:function(){t=-1},Tc:function(){for(var c=0;c<m.length;++c)O.B(c)},qb:function(){q&&(q.random.remove(),q.Ta.remove())},Uc:function(c,A){if("RGBA"===c.format||"RGBE"===c.format){var H=new Image;H.src=c.data;H.onload=function(){O.a({J:c.isMirrorY,isFlipY:c.isFlipY,isFloat:!1,v:H,fa:function(D){if("RGBA"===
c.format)A(D);else{var S=c.width,P=c.height,X=O.a({J:c.isMirrorY,isFloat:!0,width:S,height:P,isFlipY:c.isFlipY});G.H();a.viewport(0,0,S,P);u.set("s42");X.j();D.b(0);M.g(!0,!0);O.B(0);A(X);a.flush();setTimeout(D.remove,50)}}})}}else"JSON"===c.format?A(O.a({isFloat:!0,isFlipY:c.isFlipY,width:c.width,height:c.height,array:new Float32Array(c.data)})):A(!1)}};return O}(),Ca={a:function(b){var d=[U.a(b),U.a(b)],e=[d[1],d[0]],g=e,l={Mb:function(k){g[1].j();g[0].b(k);l.Sa()},Nb:function(k){g[1].u();g[0].b(k);
l.Sa()},Sa:function(){g=g===d?e:d},refresh:function(){g[0].refresh();g[1].refresh()},b:function(k){g[0].b(k)},sc:function(){return g[0]}};return l}},I=function(){function b(){d="undefined"===typeof Ba?JEContext:Ba;e=!0}var d,e=!1,g=!1,l=!1,k=!1,t=!1,m=!1,h=!1,n=!1,q=!1,r=!1,y=!1,F=!0,C=!0,B=!0,E=!1,J="undefined"===typeof window?{}:window,f={i:function(){if(e)return!0;b();f.Ba();f.ha();f.lb();f.mb();G.i();U.i();if(!f.hb())return!1;M.i();U.xb();return!0},s:function(){e||b();return d.s()},F:function(){e||
b();return d.F()},m:function(){e||b();return d.m()},lb:function(){y=(r=a.getExtension("EXT_color_buffer_float")||a.getExtension("WEBGL_color_buffer_float")||a.getExtension("OES_color_buffer_float"))?!0:!1;J.GL_EXT_COLORBUFFERFLOAT=r},mb:function(){a.getExtension("EXT_color_buffer_half_float")||a.getExtension("WEBGL_color_buffer_half_float")||a.getExtension("OES_color_buffer_half_float")},Ba:function(){if(!g){this.m()||(l=a.getExtension("OES_texture_float")||a.getExtension("MOZ_OES_texture_float")||
a.getExtension("WEBKIT_OES_texture_float"),t=(J.GL_EXT_FLOAT=l)?!0:!1);if(t||this.m())k=a.getExtension("OES_texture_float_linear")||a.getExtension("MOZ_OES_texture_float_linear")||a.getExtension("WEBKIT_OES_texture_float_linear"),J.GL_EXT_FLOATLINEAR=k;g=!0}},ha:function(){if(!q){if(!this.m()){if(m=a.getExtension("OES_texture_half_float")||a.getExtension("MOZ_OES_texture_half_float")||a.getExtension("WEBKIT_OES_texture_half_float"))E=m.HALF_FLOAT_OES,h=!0;!E&&a.HALF_FLOAT&&(E=a.HALF_FLOAT);!E&&a.FLOAT&&
(E=a.FLOAT);J.GL_EXT_HALFFLOAT=m}if(h||this.m())n=a.getExtension("OES_texture_half_float_linear")||a.getExtension("MOZ_OES_texture_half_float_linear")||a.getExtension("WEBKIT_OES_texture_half_float_linear"),J.GL_EXT_HALFFLOATLINEAR=n;q=!0}},Y:function(){if(f.m())return a.HALF_FLOAT;f.ha();return h?E:a.FLOAT},xa:function(){return F},cb:function(){return C},bc:function(){return B},bb:function(){return y},jb:function(){C=F=!0;var w=a.createFramebuffer();a.bindFramebuffer(a.FRAMEBUFFER,w);var x=a.createTexture();
a.bindTexture(a.TEXTURE_2D,x);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texImage2D(a.TEXTURE_2D,0,f.m()&&a.RGBA32F?a.RGBA32F:a.RGBA,1,1,0,a.RGBA,a.FLOAT,null);a.framebufferTexture2D(G.M(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,x,0);var R=a.checkFramebufferStatus(G.ja());R!==a.FRAMEBUFFER_COMPLETE&&(F=!1);a.texImage2D(a.TEXTURE_2D,0,f.m()&&a.RGBA16F?a.RGBA16F:a.RGBA,1,1,0,a.RGBA,f.Y(),null);a.framebufferTexture2D(G.M(),a.COLOR_ATTACHMENT0,
a.TEXTURE_2D,x,0);R=a.checkFramebufferStatus(G.ja());R!==a.FRAMEBUFFER_COMPLETE&&(C=!1);a.bindTexture(a.TEXTURE_2D,null);a.bindFramebuffer(a.FRAMEBUFFER,null);a.deleteTexture(x);a.deleteFramebuffer(w)},ib:function(){var w=G.a({width:1});w.Qa();var x=U.a({width:1,isFloat:!0,T:3});w.j();x.j();a.flush();a.checkFramebufferStatus(G.ja())!==a.FRAMEBUFFER_COMPLETE?(U.Jb(),B=!1):B=!0;w.remove();x.remove()},hb:function(){f.jb();if(!F&&!C)return!1;f.ib();return!0}};return f}(),ya=function(){var b=!1,d=[.8,
1,.8,1],e=0,g,l=new Uint8Array(4),k=d.concat(d,d,d),t=!0,m={i:function(){function h(C,B,E,J){a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,J?a.NEAREST_MIPMAP_NEAREST:a.LINEAR);try{var f=a.getError();f!==a.NO_ERROR&&console.log("GLERR in test_mipmapping() :",f);a.texImage2D(a.TEXTURE_2D,0,C,2,2,0,a.RGBA,B,E);f=a.getError();if(f!==a.NO_ERROR)return!1}catch(w){return!1}J&&a.generateMipmap(a.TEXTURE_2D);M.ea();M.g(!1,!0);a.readPixels(0,0,1,1,a.RGBA,a.UNSIGNED_BYTE,l);f=a.getError();f===a.INVALID_OPERATION&&
"undefined"!==typeof a.PIXEL_PACK_BUFFER&&(a.bindBuffer(a.PIXEL_PACK_BUFFER,null),a.readPixels(0,0,1,1,a.RGBA,a.UNSIGNED_BYTE,l),f=a.getError());return f!==a.NO_ERROR?!1:0!==l[0]}function n(C){return I.xa()&&h(r,a.FLOAT,new Float32Array(k),C)?(e=3,!0):!1}function q(C){return I.cb()?h(y,I.Y(),new Uint16Array(k),C)||h(y,a.FLOAT,new Float32Array(k),C)?(e=2,!0):!1:!1}I.Ba();I.ha();var r=a.RGBA,y=a.RGBA;if(Ba.m()){var F=a.RGBA32F;F&&(r=F);(F=a.RGBA16F)&&(y=F)}M.i();G.reset();G.B();a.viewport(0,0,1,1);
u.set("s0");b=!0;g=a.createTexture();a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,g);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);if(q(!0)||n(!0))return!0;t=!1;if(q(!1)||n(!1))return!0;if(Ba.m()){y=r=a.RGBA;if(q(!0)||n(!0))return!0;t=!1;if(q(!1)||n(!1))return!0}return!1},eb:function(){return t},tc:function(){return e},Dc:function(){b||m.i();return 3===e},Ab:function(){b||
m.i();return 2===e}};return m}(),Ea={a:function(b){var d=U.a(b.alpha),e=U.a(b.beta);return{kb:function(){d.b(1);e.b(2)}}}},Ia={a:function(b){var d=b.Tb;d.index=b.index;d.K=b.K;d.parent=b.parent;switch(d.type){case "input":b=Fa.a(d);break;default:b=Ga.a(d)}return b}},Fa={a:function(b){"undefined"===typeof b.sift&&(b.sift=!1);"undefined"===typeof b.DWT&&(b.DWT=!1);"undefined"===typeof b.blur&&(b.blur=!1);"undefined"===typeof b.siftOutWidth&&(b.siftOutWidth=!1);"undefined"===typeof b.density&&(b.density=
1);var d=!1;if(b.mask){d=!0;Ja&&void 0!==Ja.Xa&&(b.mask=Ja.Xa+b.mask);var e=U.a({isFloat:!1,url:b.mask})}var g=!1,l="undefined"!==typeof b.preprocessing?b.preprocessing:!1,k=!1,t=!1;b.sift?Sift.i({wb:a,X:!1,width:b.size,Jc:b.siftOutWidth}):b.DWT&&DWT.i({wb:a,X:!1,width:b.size});var m=!1;b.customInputShader&&(m="s43",u.ta({name:"_",id:m,c:b.customInputShader,f:["uSource"],precision:"lowp"}),u.D(m,[{type:"1i",name:"_",value:0}]));switch(l){case "sobel":var h="s32";k=!0;break;case "meanNormalization":h=
"s33";k=!0;break;case "grayScale":h="s29";k=!1;break;case "grayScaleTilt":h="s30";t=!0;k=!1;break;case "rgbGrayTilt":h="s31";t=!0;k=!1;break;case "copy":h=m?m:"s0";break;case "inputLightRegulation":h=m?m:"s29";Ka.i({width:b.size,La:b.nBlurPass,zb:!1});g=!0;break;case "direct":case "none":h=!1;break;default:h="s3"}t&&u.D(h,[{name:"u28",type:"1f",value:b.tilt}]);d&&(h+="Mask");if(b.blur)var n=U.a({isFloat:!1,isPot:!1,width:b.size});var q=U.a({isFloat:!1,isPot:!1,width:b.size}),r={s:function(){return b.sift?
Sift.S():b.size},S:function(){return r.s()},tb:function(){return b.sift?Sift.Z():b.DWT?DWT.Z():g?Ka.Z():q},w:function(){G.H();b.blur&&(n.u(),u.set("s44"),u.G("u7",1/b.size,1/b.size),M.g(!1,!0),n.b(0));h&&(u.set(h),k&&u.C("u29",1/b.size),q.u(),d&&e.b(1),M.g(!1,!1),q.b(0),g?Ka.oa(q):b.sift?(u.N(),Sift.oa()):b.DWT&&(u.N(),DWT.oa(4)))}};return r}},Ga={a:function(b){"undefined"===typeof b.disableNormalize&&(b.disableNormalize=!1);var d=[],e=[],g,l,k=!1,t,m=!0,h,n,q=b.isReorganize?b.isReorganize:!1,r=b.kernelsNumber?
!0:!1,y=b.dynPelu?Ea.a(b.dynPelu):!1,F=y?!0:!1,C={isEnabled:!1},B;if("softmax"===b.type){b.activation="softmax";b.size=Math.pow(2,Math.ceil(Math.log(Math.sqrt(b.num_classes))/Math.log(2)));b.sparsity="undefined"!==typeof b.sparsity?b.sparsity:b.K.S();b.gain="undefined"!==typeof b.gain?b.gain:1;u.D("s20",[{type:"1f",name:"u10",value:b.gain}]);var E=U.a({isFloat:!0,isPot:!1,width:b.size}),J=U.a({isFloat:!0,isPot:!1,width:b.size,isMipmap:!0});m=!1;var f=new Uint8Array(Math.pow(4*b.size,2)),w;for(w=0;w<
b.size*b.size;++w){var x=w<b.num_classes?255:0;f[4*w]=x;f[4*w+1]=x;f[4*w+2]=x;f[4*w+3]=x}var R=U.a({isFloat:!1,isPot:!1,width:b.size,array:f})}else b.cost?(b.sparsity="undefined"!==typeof b.sparsity?b.sparsity:b.K.S(),m=!1):"full"===b.connectivityUp&&(b.sparsity=b.K.S());var ha={elu:"s15",elu01:"s16",relu:"s14",arctan:"s18",sigmoid:"s13",copy:"s0",softplus:"s19",softmax:"s20",dynPelu:"s17"}[b.activation],ka=b.sparsity*b.sparsity,Y=!1,O=b.size;if(b.maxPooling){switch(b.maxPooling.size){case 2:var c=
"s34";break;case 4:c="s35"}Y=!0;O/=b.maxPooling.size;var A=U.a({isFloat:!0,isPot:!1,width:O})}var H=void 0!==b.Eb&&b.Eb?!0:!1,D=null,S=null,P=null;H&&(D="s45"+b.index.toString(),u.Fa("s45",D,[((b.normalization.n-1)/2).toFixed(1)]),u.D(D,[{type:"1i",name:"u1",value:0},{type:"2f",name:"u7",value:[1/b.size,1/b.size]},{type:"1f",name:"u6",value:b.normalization.alpha},{type:"1f",name:"u9",value:b.normalization.beta},{type:"1f",name:"u33",value:b.normalization.k}]),S=U.a({isFloat:!0,isPot:!0,width:b.size}),
P=U.a({isFloat:!0,isPot:!0,width:b.size}));var X,ia,V,W;m&&(W=U.a({isFloat:!0,isPot:!1,width:b.size}));var ja=U.a(b.bias),T,K={s:function(){return b.size},S:function(){return O},Ea:function(){return b.num_classes},Za:function(z){B.b(z)},Gb:function(){b.remap&&b.remap.isEnabled&&(C={isEnabled:!0,Cb:U.a({isFloat:!1,isFlipY:!1,array:new Uint8Array(b.remap.maskTexture.data),width:b.remap.maskTexture.width,isPot:!1}),layers:b.remap.layers.map(function(z){return b.parent.sb(z)}),depth:b.remap.depth})},
Lb:function(){switch(b.connectivityUp){case "gaussian":T=La.a(b.connectivity);break;case "direct":T=Ma.a(b.connectivity);break;case "square":T=Na.a(b.connectivity);break;case "squareFast":T=Oa.a(b.connectivity,b.activation);break;case "full":T=Pa.a(b.connectivity);break;case "conv":n=b.kernelsNumber,T=Qa.a(b.connectivity),q&&(h=U.a({width:O,isFloat:!0,isFlipY:!1,isPot:!1}))}if(T.L){var z=b.size*b.sparsity;ia=Math.log(z/b.size)/Math.log(2);X=U.a({isMipmap:!0,isFloat:!0,isPot:!0,width:z,Ka:ia});V=U.a({isFloat:!0,
isPot:!0,width:b.size})}},w:function(z,N){B=z;T.L?(X.u(),r&&ja.b(2),T.w(C),X.b(0),X.Ca(ia),V.u(),r?u.set("s0"):(u.set("s28"),u.C("u27",ka),ja.b(1)),X.va(ia,0),M.g(!1,!1),u.set(ha),H?S.j():W.j(),V.b(0),F&&y.kb(),M.g(!1,!1)):(W.u(),ja.b(1),T.w());H&&(u.set(D),P.j(),S.b(0),M.g(!1,!1),u.set("s46"),u.C("u6",1),W.j(),P.b(1),M.g(!1,!1));if(m)return Y?(A.u(),W.b(0),u.set(c),u.G("u7",1/b.size,1/b.size),M.g(!1,!1),N=A):N=W,N.b(0),q&&(h.j(),u.set("s22"),u.G("u14",n,O/n),M.g(!1,!1),N=h,h.b(0)),N;if("softmax"===
b.type){u.set("s20");W.b(0);E.j();M.g(!1,!1);b.disableNormalize?z=E:(u.set("s2"),E.b(0),R.b(1),J.j(),M.g(!1,!1),u.set("s0"),l.u(),J.b(0),J.Ca(!1),M.g(!1,!1),u.set("s21"),g.u(),J.va(!1,0),u.C("u12",W.ub()),l.b(1),M.g(!1,!1),z=g);if(N){switch(k){case "cpuRGBAAvg":break;default:var ba=K.Na(z)}return ba}return!1}if(b.cost){u.set("gpuRawAvg"===k?"s8":"s7");N=W;b.disableNormalize||(u.C("u4",1/b.size),g.u(),W.b(0),M.g(!1,!1),N=g);switch(k){case "cpuRGBA2Float":N.Aa();ba=K.Na(N);t(ba);break;case "gpuRawAvg":case "gpuRaw":N.b(0),
t(N)}return!1}},gb:function(z){z&&"undefined"!==typeof z.Ma&&(k=z.Ma,t=z.Fb);W=U.a({isFloat:!0,isPot:!0,isMipmap:"softmax"===b.type,width:b.size});"softmax"===b.type&&(l=U.a({isFloat:!0,isPot:!0,width:1}));var N=0,ba=0,ma="undefined"!==typeof b.num_classes&&b.num_classes?b.num_classes:b.size*b.size;for(z=0;z<ma;++z)d.push(N+(b.size-1-ba)*b.size),e.push([-1,-1,-1,-1]),++N,N===b.size&&(N=0,++ba);b.disableNormalize||(g=U.a({isFloat:!0,isPot:!0,width:b.size}))},Na:function(z){z.Aa();var N=z.Oa();d.forEach(function(ba,
ma){e[ma][0]=N[0][ba];e[ma][1]=N[1][ba];e[ma][2]=N[2][ba];e[ma][3]=N[3][ba]});return e}};b.K&&K.Lb(b.K);return K}};
function Ra(){var b,d,e;b||(b={});this.sb=function(g){return d[g]};this.Ib=function(g){var l=!1;d=g.map(function(k,t){return l=k=Ia.a({index:t,parent:this,Tb:k,K:l})});e=d[d.length-1];d.forEach(function(k,t){0!==t&&k.Gb()})};this.w=function(g,l){var k=l;d.forEach(function(t){k=t.w(k,g)});return k};this.Z=function(){return e.tb()};this.Kb=function(g){e.gb(g)};this.Ea=function(){return e.Ea()}}
var Ma={a:function(b){var d=U.a(b.weights);delete b.weights.data;return{L:!0,R:function(){return 1},vb:function(){return d},w:function(){u.set("s27");d.b(1);M.g(!1,!1)}}}},Pa={a:function(b){var d=b.fromLayerSize,e=U.a(b.weights);return{L:!0,R:function(){return d},w:function(g){if(g.isEnabled){u.set("s25");g.Cb.b(3);var l,k=Math.min(g.layers.length,g.depth);for(l=0;l<k;++l)g.layers[l].Za(4+l)}else u.set("s24");u.C("u18",b.toLayerSize);e.b(1);M.g(!1,!1)}}}},La={a:function(b){var d=b.toSparsity*b.toLayerSize,
e=d/b.fromLayerSize,g=U.a(b.weights);U.a({width:d,isFloat:!0,array:new Float32Array(b.fromBindings),isPot:!0});var l=U.a({width:d,isFloat:!0,array:new Float32Array(b.toBindings),isPot:!0});return{L:!0,R:function(){return e},w:function(){u.set("s23");g.b(1);l.b(2);M.g(!1,!0)}}}},Na={a:function(b){var d=b.fromLayerSize,e=b.toLayerSize,g=b.toSparsity,l=g*e,k=l/d,t=d/e,m,h,n,q,r=0,y=0,F=0,C=Array(g*e*g*e*4),B=Array(g*e*g*e*4),E=Array(d*d);for(m=0;m<E.length;++m)E[m]=0;var J=Math.floor(g/2),f=.5/e,w=.5/
d,x=.5/l;for(m=0;m<e;++m)for(h=0;h<e;++h){var R=Math.round(m*t);var ha=Math.round(h*t);var ka=m/e;var Y=h/e;ka+=f;Y+=f;for(n=0;n<g;++n)for(q=0;q<g;++q){var O=r/l;var c=y/l;var A=R+n-J;var H=ha+q-J;0>A&&(A+=d);0>H&&(H+=d);A>=d&&(A-=d);H>=d&&(H-=d);var D=A/d;var S=H/d;c=1-c-1/l;D+=w;S+=w;O+=x;c+=x;var P=m*g+n,X=h*g+q;X=e*g-X-1;P=X*e*g+P;C[4*P]=O;C[4*P+1]=c;C[4*P+2]=D;C[4*P+3]=S;D=E[H*d+A]++;S=D%k;A=A*k+S;H=H*k+(D-S)/k;H=d*k-1-H;H=H*d*k+A;B[4*H]=O;B[4*H+1]=c;B[4*H+2]=ka;B[4*H+3]=Y;++r>=l&&(r=0,++y);
++F}}var ia=U.a(b.weights);U.a({width:l,isFloat:!0,array:new Float32Array(B),isPot:!0});B=null;var V=U.a({width:l,isFloat:!0,array:new Float32Array(C),isPot:!0});C=null;return{L:!0,R:function(){return k},w:function(){u.set("s23");ia.b(1);V.b(2);M.g(!1,!1)}}}},Qa={a:function(b){var d=b.kernelsNumber,e=b.toSparsity,g=e*b.toLayerSize/b.fromLayerSize,l=U.a(b.weights);return{L:!0,R:function(){return g},wc:function(){return e},vb:function(){return l},w:function(){u.set("s26");u.C("u24",d);u.C("u25",e);
u.C("u18",b.toLayerSize);u.C("u26",b.fromLayerSize);l.b(1);M.g(!1,!1)}}}},Oa={a:function(b,d){var e=b.fromLayerSize,g=b.toLayerSize,l=b.toSparsity,k=b.stride?b.stride:1,t=l*g/e,m=g<e,h=e/g,n=U.a(b.weights),q="s47"+[e.toString(),g.toString(),l.toString(),k.toString(),d].join("_");u.nb(q)||(b=ra(d),g=[{type:"1f",name:"u18",value:g},{type:"1f",name:"u32",value:k}],m&&g.push({type:"1f",name:"u26",value:e}),e=[(m?t:l).toFixed(1),b],m&&e.push(h.toFixed(1)),u.Fa(m?"s40":"s39",q,e),u.D(q,g.concat([{type:"1i",
name:"u16",value:0},{type:"1i",name:"u23",value:1},{type:"1i",name:"u15",value:3}])));return{L:!1,R:function(){return t},w:function(){u.set(q);n.b(3);M.g(!1,!1)}}}},Ka=function(){var b,d,e,g,l,k,t,m,h;return{i:function(n){b=n.La?n.La:3;d=n.width?n.width:64;g=n.zb?!0:!1;n={isFloat:!1,width:d,isPot:!1,isFlipY:!1};l=U.a(n);k=U.a(n);t=U.a(n);m=U.a(n);h=U.a({isFloat:!0,width:d,isPot:!1,isFlipY:!1});e=1/d},oa:function(n){u.set("s37");for(var q=0;q<b;++q)l.j(),u.G("u7",e,0),M.g(g,!1),k.j(),l.b(0),u.G("u7",
0,e),M.g(g,!1),k.b(0);u.set("s36");m.j();n.b(0);M.g(g);u.set("s37");for(q=0;q<b;++q)t.j(),m.b(0),u.G("u7",e,0),M.g(g,!1),m.j(),t.b(0),u.G("u7",0,e),M.g(g,!1);u.set("s38");h.j();n.b(0);k.b(1);m.b(2);M.g(g,!1);h.b(0)},Z:function(){return h}}}();function Sa(b,d){b[d]=!0;b.setAttribute(d,"true")}function Ta(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}
function Ua(){var b=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3]||0,10)]}function Va(){var b=navigator.userAgent.toLowerCase();return-1!==b.indexOf("safari")&&-1===b.indexOf("chrome")?!0:!1}function Wa(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1}
function Xa(b){if(!b)return b;var d=!1;if(b.video){var e=function(g){var l={};"undefined"!==typeof g.min&&(l.min=g.min);"undefined"!==typeof g.max&&(l.max=g.max);"undefined"!==typeof g.ideal&&(l.ideal=g.ideal);return l};d={};"undefined"!==typeof b.video.width&&(d.width=e(b.video.width));"undefined"!==typeof b.video.height&&(d.height=e(b.video.height));"undefined"!==typeof b.video.facingMode&&(d.facingMode=b.video.facingMode)}d={audio:b.audio,video:d};"undefined"!==typeof b.deviceId&&(d.deviceId=b.deviceId);
return d}function Ya(b){var d=b.video.width;b.video.width=b.video.height;b.video.height=d;return b}
function Za(b){function d(r){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(y,F){return Math.abs(y-r)-Math.abs(F-r)})}function e(r){var y=Xa(b);g.push(r(y))}var g=[];if(!b||!b.video)return g;if(b.video.width&&b.video.height){if(b.video.width.ideal&&b.video.height.ideal)for(var l=d(b.video.width.ideal).slice(0,3),k=d(b.video.height.ideal).slice(0,3),t=0,m;t<l.length;++t){m=l[t];for(var h=0,n;h<k.length;++h)if(n=k[h],m!==b.video.width.ideal||n!==b.video.height.ideal){var q=
Math.max(m,n)/Math.min(m,n);q<4/3-.1||q>16/9+.1||e(function(r){r.video.width.ideal=m;r.video.height.ideal=n;return r})}}e(function(r){return Ya(r)})}b.video.width&&b.video.height&&(b.video.width.ideal&&b.video.height.ideal&&e(function(r){delete r.video.width.ideal;delete r.video.height.ideal;return r}),e(function(r){delete r.video.width;delete r.video.height;return r}));b.video.facingMode&&(e(function(r){delete r.video.facingMode;return r}),b.video.width&&b.video.height&&e(function(r){Ya(r);delete r.video.facingMode;
return r}));g.push({audio:b.audio,video:!0});return g}function $a(b){try{var d=window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(g){d=window.innerHeight>window.innerWidth}if(d&&b&&b.video){d=b.video.width;var e=b.video.height;d&&e&&d.ideal&&e.ideal&&d.ideal>e.ideal&&(b.video.height=d,b.video.width=e)}}
function ab(b){b.volume=0;Sa(b,"muted");if(Va()){if(1===b.volume){var d=function(){b.volume=0;window.removeEventListener("mousemove",d,!1);window.removeEventListener("touchstart",d,!1)};window.addEventListener("mousemove",d,!1);window.addEventListener("touchstart",d,!1)}setTimeout(function(){b.volume=0;Sa(b,"muted")},5)}}
function bb(b,d,e,g){function l(t){k||(k=!0,e(t))}var k=!1;navigator.mediaDevices.getUserMedia(g).then(function(t){function m(){setTimeout(function(){if(b.currentTime){var h=b.videoWidth,n=b.videoHeight;if(0===h||0===n)l("VIDEO_NULLSIZE");else{h&&(b.style.width=h.toString()+"px");n&&(b.style.height=n.toString()+"px");h={fb:null,Sb:null,Db:null};try{var q=t.getVideoTracks()[0];q&&(h.Db=q,h.fb=q.getCapabilities(),h.Sb=q.getSettings())}catch(r){}Va()||Ta()?b.parentNode&&null!==b.parentNode?(k||d(b,t,
h),setTimeout(function(){b.play()},100)):(document.body.appendChild(b),ab(b),k||d(b,t,h),setTimeout(function(){b.style.transform="scale(0.0001,0.0001)";b.style.position="fixed";b.style.bottom="0px";b.style.right="0px";ab(b);setTimeout(function(){b.play()},100)},80)):k||d(b,t,h)}}else l("VIDEO_NOTSTARTED")},700)}"undefined"!==typeof b.srcObject?b.srcObject=t:(b.src=window.URL.createObjectURL(t),b.videoStream=t);ab(b);b.addEventListener("loadeddata",function(){var h=b.play();ab(b);"undefined"===typeof h?
m():h.then(function(){m()}).catch(function(){l("VIDEO_PLAYPROMISEREJECTED")})},!1)}).catch(function(t){l(t)})}
function cb(b,d){var e=Wa()?document.createElement("video"):!1,g={video:{facingMode:{ideal:"user"},width:{min:480,max:1280,ideal:800},height:{min:480,max:1280,ideal:600}},audio:!1};if(e)if(Wa()){if(g&&g.video){if(Ta()){var l=Ua();(12>l[0]||12===l[0]&&2>l[1])&&$a(g)}g.video.width&&g.video.width.ideal&&(e.style.width=g.video.width.ideal+"px");g.video.height&&g.video.height.ideal&&(e.style.height=g.video.height.ideal+"px")}Sa(e,"autoplay");Sa(e,"playsinline");g&&g.audio?e.volume=0:Sa(e,"muted");bb(e,
b,function(){function k(m){if(0===m.length)d("INVALID_FALLBACKCONSTRAINS");else{var h=m.shift();bb(e,b,function(){k(m)},h)}}var t=Za(g);k(t)},g)}else d&&d("MEDIASTREAMAPI_NOTFOUND");else d&&d("VIDEO_NOTPROVIDED")}var db=[1,1,2],eb=[.2,.8],Ja={};
function fb(b){function d(D){Y=setTimeout(g.bind(null,D),10)}function e(){ka&&(window.cancelAnimationFrame(ka),ka=!1);Y&&(window.clearTimeout(Y),Y=!1)}function g(){if(E!==B.pause){G.reset();G.H();var D=h.currentTime-H;0>D&&(H=h.currentTime);20>1E3*D||(n.refresh(),H+=D,u.set("s50"),q.u(),n.b(0),M.g(!1,!0));for(D=0;1>D;++D)u.set("s51"),r.u(),q.b(0),y.b(1),M.g(!1,!1),r.b(0),k.w(!1,r);f===J.visible&&(G.Xb(),u.set("s49"),q.b(1),y.b(0),M.g(!1,!1));a.flush();ka=window.requestAnimationFrame(d)}}var l=Date.now(),
k,t=1.25/3,m=[.16,.16],h,n,q,r,y,F,C=new Uint8Array([0,0,0,0]),B={Bb:0,ca:1,ga_:2,pause:3},E=B.Bb,J={hidden:0,visible:1},f=b.yb?J.visible:J.hidden,w=0,x=.25,R=.25,ha=1.25,ka=!1,Y=!1,O=0,c="undefined"!==typeof b.sa?b.sa:"./",A=(("undefined"!==typeof b.Pa?b.Pa:.55)-eb[0])/(eb[1]-eb[0]),H=0;return{Ob:function(D){A=D},Vb:function(D){f=D?J.visible:J.hidden},Wb:function(D){D&&E!==B.pause?(E=B.pause,e()):D||E!==B.pause||(E=B.ga_,e(),E=B.ca,g(0))},i:function(D){h=D;u.Wa([{id:"s50",name:"_",U:"attribute vec2 a0;uniform vec2 u34,u35;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=u35+u34*a0;}",
W:["a0"],O:[2],c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:["u1","u34","u35"],precision:"lowp"},{id:"s51",name:"_",c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",U:"attribute vec2 a0;uniform sampler2D u36;uniform vec2 u37;const vec2 k=vec2(.25,.5),j=vec2(.75,.5),e=vec2(.5,.5);varying vec2 vv0;void main(){vec4 a=texture2D(u36,k);vec2 d=a.gb,b=a.a*u37;vec4 c=texture2D(u36,j);float l=c.a,g=c.y;vec2 f=vec2(1./cos(g),1.);b*=f;vec2 i=a0*.5+e;vv0=d+(i-e)*b,gl_Position=vec4(a0,0.,1.);}",
W:["a0"],O:[2],f:["u1","u36","u37"],precision:"lowp"},{id:"s52",name:"_",U:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",c:"uniform sampler2D u38,u36;uniform vec3 u39,u40;uniform float u41,u42,u43,u44,u45,u46;const vec4 e=vec4(.25,.25,.25,.25);const float f=1e-3;void main(){vec4 b=texture2D(u36,vec2(.25,.5));float a=floor(b.r+f),c=0.;vec4 h=texture2D(u38,vec2(.125,.625)),i=texture2D(u38,vec2(.375,.625));float d=dot(h,e),j=dot(i,e);bool k=d>u44&&d>j+u45;k?a=2.:a>u43?a=0.:a>1.9&&(b.a>u42||b.a<u41)?a=0.:a>1.9?a+=1.:0.;if(a<.9)b.gba=u39,a=1.;else{float l=dot(e,texture2D(u38,vec2(.375,.875))),m=dot(e,texture2D(u38,vec2(.625,.875))),n=dot(e,texture2D(u38,vec2(.875,.875))),o=dot(e,texture2D(u38,vec2(.125,.875)));c=clamp(o,-1.+f,1.-f);float p=step(1.5,a);a*=p;float g=b.a*u46;b.gba+=vec3(l,m,n)*u40*g;}b.r=a+c*.5+.5,gl_FragColor=b;}",
f:"u38 u36 u39 u41 u42 u43 u45 u44 u40 u46".split(" ")},{id:"s53",name:"_",c:"uniform sampler2D u36,u47;uniform float u48;varying vec2 vv0;const vec2 e=vec2(.5,.5);void main(){vec4 a=texture2D(u36,e),b=texture2D(u47,e);float c=step(2.,a.r),d=fract(a.r);vec4 f=vec4(c,d,0.,1.);gl_FragColor=mix(f,b,u48);}",f:["u36","u47","u48"]},{id:"s49",name:"_",c:"uniform sampler2D u36,u49;uniform vec2 u37;varying vec2 vv0;const vec2 j=vec2(1.,1.);const vec3 k=vec3(0.,.7,1.);void main(){vec4 g=texture2D(u36,vec2(.5,.5));vec3 l=texture2D(u49,vv0).rgb;vec2 h=g.gb;float m=g.a;vec2 b=m*u37,d=h+b,c=h;c-=b/2.,d-=b/2.;vec2 n=.5*(c+d),i=step(c,vv0)*step(vv0,d);float o=i.x*i.y;vec2 a=2.*abs(n-vv0)/b;a=pow(a,3.*j);float f=max(a.x,a.y);f*=o,gl_FragColor=vec4(mix(l,k,f),1.);}",
f:["u36","u49","u37"]}]);u.D("s51",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u36",value:1},{type:"2f",name:"u37",value:m}]);u.D("s53",[{type:"1i",name:"u36",value:0},{type:"1i",name:"u47",value:1},{type:"1f",name:"u48",value:.9}]);u.D("s49",[{type:"1i",name:"u36",value:0},{type:"1i",name:"u49",value:1},{type:"2f",name:"u37",value:m}]);u.D("s52",[{type:"1i",name:"u38",value:0},{type:"1i",name:"u36",value:1},{type:"1f",name:"u41",value:1.1},{type:"1f",name:"u42",value:5.8},{type:"1f",name:"u43",
value:55},{type:"1f",name:"u44",value:.95},{type:"1f",name:"u45",value:1.1},{type:"1f",name:"u46",value:m[0]},{type:"3f",name:"u40",value:[db[0]*m[0],db[1]*m[1],db[2]]}]);n=U.a({v:h,isPot:!1,isFloat:!1,isFlipY:!0});q=U.a({isPot:!1,Hc:!0,isFloat:!1,width:400,height:400});r=U.a({isPot:!0,isFloat:!1,width:64});y=Ca.a({width:1,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,.25,.25,0])});F=Ca.a({width:1,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,.5,0,1])});oa(c+'NNC.json',
function(S){S=JSON.parse(S);k=new Ra;k.Ib(S.layers);k.Kb({Ma:"gpuRawAvg",Fb:function(){y.Nb(1);u.set("s52");u.Qb("u39",x,R,ha);M.g(!1,!1);0!==++w%2&&(ha+=t,2.5<ha&&(x+=.1,ha=1.25,.75<x&&(x=.25,R+=.1,.75<R&&(R=.25))));u.set("s53");F.Mb(1);y.b(0);M.g(!1,!1);var P=Date.now();if(100<P-l){l=P;u.set("s1");G.B();F.b(0);M.g(!1,!1);a.readPixels(0,0,1,1,a.RGBA,a.UNSIGNED_BYTE,C);P=eb[0]+A*(eb[1]-eb[0]);var X=Math.abs(C[1]/255*2-1),ia=128<C[0],V=ia&&X<P+.1;E===B.ca&&ia&&X<P-.1?(b.wa(!0),E=B.ga_):E!==B.ga_||V||
(b.wa(!1),E=B.ca);G.H()}}});++O;1===O&&(gb.ready=!0,b.ab(!1,{video:h,GL:a,videoTexture:n.get(),videoTextureCut:r.get()}),E!==B.pause&&(e(),E=B.ca,g(0)),O=0)})}}}
var gb={ready:!1,set_sensibility:function(b){gb.ready&&gb.V.Ob(b)},toggle_pause:function(b){gb.ready&&gb.V.Wb(b)},toggle_display:function(b){gb.ready&&gb.V.Vb(b)},init:function(b){function d(e){b.callbackReady&&b.callbackReady(e?e:"UNKNOW_ERROR")}gb.V=fb({yb:"undefined"===typeof b.isDisplayVideo?!0:b.isDisplayVideo,ab:function(e,g){b.callbackReady&&b.callbackReady(e,g)},wa:b.callbackTrack,Pa:b.sensibility,sa:b.NNCpath});if(!Ba.i({za:b.canvasId,width:400,height:400,debug:!1,ma:!1,premultipliedAlpha:!0}))return d&&
d("COMPAT_FAIL"),!1;u.i();cb(function(e){var g=[.5,.5],l=e.videoHeight/e.videoWidth,k=Ba.F()/Ba.s();l>k?1>=l?g[0]*=l:g[1]/=l:(g[0]*=l,l=1/k,g[0]*=l,g[1]*=l);g[1]*=k;gb.V.i(e);u.D("s50",[{type:"1i",name:"u1",value:0},{type:"2f",name:"u34",value:g},{type:"2f",name:"u35",value:[.5,.5]}])},function(){d("NO_WEBCAM")});return!0}};window.GLANCETRACKERAPI=gb;
;return GLANCETRACKERAPI;})();